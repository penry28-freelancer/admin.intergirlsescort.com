/*!For license information please see main.js.LICENSE.txt*/(()=>{var e,t,n,r,i,o,a={785:(e,t,n)=>{"use strict";var r,i=n(5117);!function(){var o,a="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if("object"==typeof i&&"object"==typeof i.versions&&i.versions.node&&!i.browser){var s=i.versions.node.toString().replace("v","");a="Nodejs/"+s+" (NodeOS) AppleWebKit/"+s+" (KHTML, like Gecko) Nodejs/"+s+" Nodejs/"+s}o=void 0!==n.g?n.g:window,"undefined"==typeof window&&("undefined"==typeof window&&void 0!==n.g&&(n.g.navigator={userAgent:a,getUserMedia:function(){}},o.window=n.g),"undefined"==typeof location&&(o.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(o.screen={width:0,height:0}));var c=window.navigator;void 0!==c?(void 0!==c.webkitGetUserMedia&&(c.getUserMedia=c.webkitGetUserMedia),void 0!==c.mozGetUserMedia&&(c.getUserMedia=c.mozGetUserMedia)):c={getUserMedia:function(){},userAgent:a};var u=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(c.userAgent||""),l=!(-1===c.userAgent.indexOf("Edge")||!c.msSaveOrOpenBlob&&!c.msSaveBlob),d=!!window.opera||c.userAgent.indexOf(" OPR/")>=0,f=c.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(c.userAgent),h=/^((?!chrome|android).)*safari/i.test(c.userAgent),p=!!window.chrome&&!d,v="undefined"!=typeof document&&!!document.documentMode&&!l;function m(e,t){var n=0,r=!1,i=window.setInterval((function(){e()&&(window.clearInterval(i),t(r)),n++>50&&(window.clearInterval(i),t(r=!0))}),10)}var g,y,b={Android:function(){return c.userAgent.match(/Android/i)},BlackBerry:function(){return c.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return c.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return c.userAgent.match(/Opera Mini/i)},Windows:function(){return c.userAgent.match(/IEMobile/i)},any:function(){return b.Android()||b.BlackBerry()||b.iOS()||b.Opera()||b.Windows()},getOsName:function(){var e="Unknown OS";return b.Android()&&(e="Android"),b.BlackBerry()&&(e="BlackBerry"),b.iOS()&&(e="iOS"),b.Opera()&&(e="Opera Mini"),b.Windows()&&(e="Windows"),e}},w="Unknown OS",_="Unknown OS Version",S=function(){for(var e,t=c.appVersion,n=c.userAgent,r="-",i=[{s:"Chrome OS",r:/CrOS/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],o=0;e=i[o];o++)if(e.r.test(n)){r=e.s;break}var a="-";switch(/Windows/.test(r)&&(/Windows (.*)/.test(r)&&(a=/Windows (.*)/.exec(r)[1]),r="Windows"),r){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(n)&&(a=/Mac OS X (10[\.\_\d]+)/.exec(n)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(n)&&(a=/Android ([\.\_\d]+)/.exec(n)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(n)&&(a=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))&&a.length>3&&(a=a[1]+"."+a[2]+"."+(0|a[3]))}return{osName:r,osVersion:a}}();S&&S.osName&&"-"!=S.osName?(w=S.osName,_=S.osVersion):b.any()&&"Android"==(w=b.getOsName())&&(_=!!(y=(g=(g||c.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/))&&y[1]);var E="object"==typeof i&&"object"==typeof i.versions&&i.versions.node;"Unknown OS"===w&&E&&(w="Nodejs",_=i.versions.node.toString().replace("v",""));var C=!1,T=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!C&&e in document.createElement("canvas")&&(C=!0),!T&&e in document.createElement("video")&&(T=!0))}));var k=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,O=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,I=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/,R=[],x=[],A=[],M=[];c.mediaDevices&&c.mediaDevices.enumerateDevices&&(c.enumerateDevices=function(e){var t=c.mediaDevices.enumerateDevices();t&&t.then?c.mediaDevices.enumerateDevices().then(e).catch((function(){e([])})):e([])});var D=!1;("undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack||c.mediaDevices&&c.mediaDevices.enumerateDevices)&&(D=!0);var L=!1,P=!1,N=!1,j=!1,F=!1;var B=window.DetectRTC||{};B.browser=function(){c.appVersion;var e,t,n,r=c.userAgent,i=c.appName,o=""+parseFloat(c.appVersion),a=parseInt(c.appVersion,10);if(d){i="Opera";try{a=(o=c.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(e){o="0.0.0.0",a=0}}else v?((t=r.indexOf("rv:"))>0?o=r.substring(t+3):(t=r.indexOf("MSIE"),o=r.substring(t+5)),i="IE"):p?(t=r.indexOf("Chrome"),i="Chrome",o=r.substring(t+7)):h?-1!==r.indexOf("CriOS")?(t=r.indexOf("CriOS"),i="Chrome",o=r.substring(t+6)):-1!==r.indexOf("FxiOS")?(t=r.indexOf("FxiOS"),i="Firefox",o=r.substring(t+6)):(t=r.indexOf("Safari"),i="Safari",o=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(o=r.substring(t+8)),-1!==c.userAgent.indexOf("Version/")&&(o=c.userAgent.split("Version/")[1].split(" ")[0])):f?(t=r.indexOf("Firefox"),i="Firefox",o=r.substring(t+8)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(i=r.substring(e,t),o=r.substring(t+1),i.toLowerCase()===i.toUpperCase()&&(i=c.appName));return l&&(i="Edge",o=c.userAgent.split("Edge/")[1]),-1!==(n=o.search(/[; \)]/))&&(o=o.substring(0,n)),a=parseInt(""+o,10),isNaN(a)&&(o=""+parseFloat(c.appVersion),a=parseInt(c.appVersion,10)),{fullVersion:o,version:a,name:i,isPrivateBrowsing:!1}}(),function(e){var t;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,(function(){t=!1}),(function(e){t=!0}));else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var n;try{(n=window.indexedDB.open("test")).onerror=function(){return!0}}catch(e){t=!0}void 0===t&&m((function(){return"done"===n.readyState}),(function(e){e||(t=!n.result)}))}else if(function(e){var t=window.navigator.userAgent.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(n&&parseInt(n[1],10)>=10)}()){t=!1;try{window.indexedDB||(t=!0)}catch(e){t=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(e){t=!0}void 0===t&&(t=!1,window.localStorage.removeItem("test"))}}catch(e){t=!1}m((function(){return void 0!==t}),(function(e){var n;n=t,B.browser.isPrivateBrowsing=!!n}))}(),B.browser["is"+B.browser.name]=!0,B.osName=w,B.osVersion=_,"object"==typeof i&&"object"==typeof i.versions&&i.versions["node-webkit"];var W=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach((function(e){W||e in window&&(W=!0)})),B.isWebRTCSupported=W,B.isORTCSupported="undefined"!=typeof RTCIceGatherer;var U=!1;(B.browser.isChrome&&B.browser.version>=35||B.browser.isFirefox&&B.browser.version>=34||B.browser.isEdge&&B.browser.version>=17||"Android"===B.osName&&B.browser.isChrome)&&(U=!0),(c.getDisplayMedia||c.mediaDevices&&c.mediaDevices.getDisplayMedia)&&(U=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||"")||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(B.browser.isChrome||B.browser.isEdge||B.browser.isOpera)||B.browser.isFirefox)&&(U=!1),B.isScreenCapturingSupported=U;var V={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach((function(e){V.isSupported||e in window&&(V.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(V.isCreateMediaStreamSourceSupported=!0))})),B.isAudioContextSupported=V.isSupported,B.isCreateMediaStreamSourceSupported=V.isCreateMediaStreamSourceSupported;var H=!1;B.browser.isChrome&&B.browser.version>31&&(H=!0),B.isRtpDataChannelsSupported=H;var Z=!1;(B.browser.isFirefox&&B.browser.version>28||B.browser.isChrome&&B.browser.version>25||B.browser.isOpera&&B.browser.version>=11)&&(Z=!0),B.isSctpDataChannelsSupported=Z,B.isMobileDevice=u;var q=!1;(c.getUserMedia||c.mediaDevices&&c.mediaDevices.getUserMedia)&&(q=!0),B.browser.isChrome&&B.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(q="Requires HTTPs"),"Nodejs"===B.osName&&(q=!1),B.isGetUserMediaSupported=q;var z,G,$,K="";screen.width&&(K+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:"")),B.displayResolution=K,B.displayAspectRatio=(z=screen.width,G=screen.height,$=function e(t,n){return 0==n?t:e(n,t%n)}(z,G),z/$/(G/$)).toFixed(2),B.isCanvasSupportsStreamCapturing=C,B.isVideoSupportsStreamCapturing=T,"Chrome"==B.browser.name&&B.browser.version>=53&&(B.isCanvasSupportsStreamCapturing||(B.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),B.isVideoSupportsStreamCapturing||(B.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),B.DetectLocalIPAddress=function(e,t){if(B.isWebRTCSupported){var n=!0,r=!0;!function(e,t){if("undefined"!=typeof document&&"function"==typeof document.getElementById){var n={},r=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!r){var i=document.getElementById("iframe");if(!i)return;var o=i.contentWindow;r=o.RTCPeerConnection||o.mozRTCPeerConnection||o.webkitRTCPeerConnection}if(r){var a=null;"Chrome"===B.browser&&B.browser.version<58&&(a={optional:[{RtpDataChannels:!0}]});var s=new r({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},a);if(t&&(s.addStream?s.addStream(t):s.addTrack&&t.getTracks()[0]&&s.addTrack(t.getTracks()[0],t)),s.onicecandidate=function(e){e.candidate&&e.candidate.candidate?c(e.candidate.candidate):c()},!t)try{s.createDataChannel("sctp",{})}catch(e){}B.isPromisesSupported?s.createOffer().then((function(e){s.setLocalDescription(e).then(u)})):s.createOffer((function(e){s.setLocalDescription(e,u,(function(){}))}),(function(){}))}}function c(t){if(t){var r=O.exec(t);if(r){var i=r[1];t.match(k);void 0===n[i]&&e(i),n[i]=!0}}else e()}function u(){s.localDescription.sdp.split("\n").forEach((function(e){e&&0===e.indexOf("a=candidate:")&&c(e)}))}}((function(t){t?t.match(k)?e("Local: "+t,n=!1,r):t.match(I)?e("Public: "+t,n,r=!1):e("Public: "+t,n,r):e()}),t)}},B.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,B.isWebSocketsBlocked=!B.isWebSocketsSupported,"Nodejs"===B.osName&&(B.isWebSocketsSupported=!0,B.isWebSocketsBlocked=!1),B.checkWebSocketsSupport=function(e){e=e||function(){};try{var t,n=new WebSocket("wss://echo.websocket.org:443/");n.onopen=function(){B.isWebSocketsBlocked=!1,t=(new Date).getTime(),n.send("ping")},n.onmessage=function(){B.WebsocketLatency=(new Date).getTime()-t+"ms",e(),n.close(),n=null},n.onerror=function(){B.isWebSocketsBlocked=!0,e()}}catch(t){B.isWebSocketsBlocked=!0,e()}},B.load=function(e){!function(e){if(D)if(!c.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(c.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!c.enumerateDevices&&c.enumerateDevices&&(c.enumerateDevices=c.enumerateDevices.bind(c)),c.enumerateDevices){R=[],x=[],A=[],M=[],L=!1,P=!1,N=!1,j=!1,F=!1;var t={};c.enumerateDevices((function(n){R=[],x=[],A=[],M=[],n.forEach((function(e){var n={};for(var r in e)try{"function"!=typeof e[r]&&(n[r]=e[r])}catch(e){}t[n.deviceId+n.label+n.kind]||("audio"===n.kind&&(n.kind="audioinput"),"video"===n.kind&&(n.kind="videoinput"),n.deviceId||(n.deviceId=n.id),n.id||(n.id=n.deviceId),n.label?("videoinput"!==n.kind||F||(F=!0),"audioinput"!==n.kind||j||(j=!0)):(n.isCustomLabel=!0,"videoinput"===n.kind?n.label="Camera "+(M.length+1):"audioinput"===n.kind?n.label="Microphone "+(x.length+1):"audiooutput"===n.kind?n.label="Speaker "+(A.length+1):n.label="Please invoke getUserMedia once.",void 0!==B&&B.browser.isChrome&&B.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(n.label="HTTPs is required to get label of this "+n.kind+" device.")),"audioinput"===n.kind&&(L=!0,-1===x.indexOf(n)&&x.push(n)),"audiooutput"===n.kind&&(P=!0,-1===A.indexOf(n)&&A.push(n)),"videoinput"===n.kind&&(N=!0,-1===M.indexOf(n)&&M.push(n)),R.push(n),t[n.deviceId+n.label+n.kind]=n)})),void 0!==B&&(B.MediaDevices=R,B.hasMicrophone=L,B.hasSpeakers=P,B.hasWebcam=N,B.isWebsiteHasWebcamPermissions=F,B.isWebsiteHasMicrophonePermissions=j,B.audioInputDevices=x,B.audioOutputDevices=A,B.videoInputDevices=M),e&&e()}))}else e&&e();else e&&e()}(e=e||function(){})},B.MediaDevices=void 0!==R?R:[],B.hasMicrophone=L,B.hasSpeakers=P,B.hasWebcam=N,B.isWebsiteHasWebcamPermissions=F,B.isWebsiteHasMicrophonePermissions=j,B.audioInputDevices=x,B.audioOutputDevices=A,B.videoInputDevices=M;var Y=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(Y=!0),B.isSetSinkIdSupported=Y;var X=!1;B.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(X=!0):B.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(X=!0),B.isRTPSenderReplaceTracksSupported=X;var J=!1;B.browser.isFirefox&&B.browser.version>38&&(J=!0),B.isRemoteStreamProcessingSupported=J;var Q=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(Q=!0),B.isApplyConstraintsSupported=Q;var ee=!1;B.browser.isFirefox&&B.browser.version>=43&&(ee=!0),B.isMultiMonitorScreenCapturingSupported=ee,B.isPromisesSupported=!!("Promise"in window),B.version="1.4.1",void 0===B&&(window.DetectRTC={});var te=window.MediaStream;void 0===te&&"undefined"!=typeof webkitMediaStream&&(te=webkitMediaStream),B.MediaStream=void 0!==te&&"function"==typeof te&&Object.keys(te.prototype),"undefined"!=typeof MediaStreamTrack?B.MediaStreamTrack=Object.keys(MediaStreamTrack.prototype):B.MediaStreamTrack=!1;var ne=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;B.RTCPeerConnection=void 0!==ne&&Object.keys(ne.prototype),window.DetectRTC=B,e.exports=B,void 0===(r=function(){return B}.apply(t,[]))||(e.exports=r)}()},1378:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}v(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&v(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,o,a,u;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=p(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},5117:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],u=!1,l=-1;function d(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&f())}function f(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},3528:(e,t,n)=>{"use strict";var r,i,o,a,s,c;n.d(t,{FX:()=>a,Y2:()=>o,tw:()=>r,yh:()=>i}),function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin"}(r||(r={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration"}(i||(i={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel"}(o||(o={})),function(e){e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2"}(a||(a={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange"}(s||(s={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(c||(c={}))},7757:(e,t,n)=>{e.exports=n(5666)},6403:(e,t,n)=>{"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[Z]}function o(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[H]||!!e.constructor[H]||d(e)||f(e))}function a(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:q)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function s(e){var t=e[Z];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:d(e)?2:f(e)?3:0}function c(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t,n){var r=s(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function l(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){return B&&e instanceof Map}function f(e){return W&&e instanceof Set}function h(e){return e.o||e.t}function p(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=z(e);delete t[Z];for(var n=q(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function v(e,t){g(e)||i(e)||!o(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&a(e,(function(e,t){return v(t,!0)}),!0))}function m(){r(2)}function g(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=G[e];return t||r(19,e),t}function b(){return j}function w(e,t){t&&(y("Patches"),e.u=[],e.s=[],e.v=t)}function _(e){S(e),e.p.forEach(C),e.p=null}function S(e){e===j&&(j=e.l)}function E(e){return j={p:[],l:j,h:e,m:!0,_:0}}function C(e){var t=e[Z];0===t.i||1===t.i?t.j():t.g=!0}function T(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.O||y("ES5").S(t,e,i),i?(n[Z].P&&(_(t),r(4)),o(e)&&(e=k(t,e),t.l||I(t,e)),t.u&&y("Patches").M(n[Z],e,t.u,t.s)):e=k(t,n,[]),_(t),t.u&&t.v(t.u,t.s),e!==V?e:void 0}function k(e,t,n){if(g(t))return t;var r=t[Z];if(!r)return a(t,(function(i,o){return O(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return I(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=p(r.k):r.o;a(3===r.i?new Set(i):i,(function(t,o){return O(e,r,i,t,o,n)})),I(e,i,!1),n&&e.u&&y("Patches").R(r,n,e.u,e.s)}return r.o}function O(e,t,n,r,a,s){if(i(a)){var l=k(e,a,s&&t&&3!==t.i&&!c(t.D,r)?s.concat(r):void 0);if(u(n,r,l),!i(l))return;e.m=!1}if(o(a)&&!g(a)){if(!e.h.N&&e._<1)return;k(e,a),t&&t.A.l||I(e,a)}}function I(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&v(t,n)}function R(e,t){var n=e[Z];return(n?h(n):e)[t]}function x(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function A(e){e.P||(e.P=!0,e.l&&A(e.l))}function M(e){e.o||(e.o=p(e.t))}function D(e,t,n){var r=d(t)?y("MapSet").T(t,n):f(t)?y("MapSet").F(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:b(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=$;n&&(i=[r],o=K);var a=Proxy.revocable(i,o),s=a.revoke,c=a.proxy;return r.k=c,r.j=s,c}(t,n):y("ES5").J(t,n);return(n?n.A:b()).p.push(r),r}function L(e){return i(e)||r(22,e),function e(t){if(!o(t))return t;var n,r=t[Z],i=s(t);if(r){if(!r.P&&(r.i<4||!y("ES5").K(r)))return r.t;r.I=!0,n=P(t,i),r.I=!1}else n=P(t,i);return a(n,(function(t,i){r&&function(e,t){return 2===s(e)?e.get(t):e[t]}(r.t,t)===i||u(n,t,e(i))})),3===i?new Set(n):n}(e)}function P(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return p(e)}n.d(t,{xC:()=>fe,hg:()=>be,oM:()=>ve,SI:()=>we});var N,j,F="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),B="undefined"!=typeof Map,W="undefined"!=typeof Set,U="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,V=F?Symbol.for("immer-nothing"):((N={})["immer-nothing"]=!0,N),H=F?Symbol.for("immer-draftable"):"__$immer_draftable",Z=F?Symbol.for("immer-state"):"__$immer_state",q=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames),z=Object.getOwnPropertyDescriptors||function(e){var t={};return q(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},G={},$={get:function(e,t){if(t===Z)return e;var n=h(e);if(!c(n,t))return function(e,t,n){var r,i=x(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!o(r)?r:r===R(e.t,t)?(M(e),e.o[t]=D(e.A.h,r,e)):r},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,n){var r=x(h(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(e.D[t]=!0,!e.P){if(l(n,R(h(e),t))&&(void 0!==n||c(e.t,t)))return!0;M(e),A(e)}return e.o[t]=n,!0},deleteProperty:function(e,t){return void 0!==R(e.t,t)||t in e.t?(e.D[t]=!1,M(e),A(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=h(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},K={};a($,(function(e,t){K[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),K.deleteProperty=function(e,t){return $.deleteProperty.call(this,e[0],t)},K.set=function(e,t,n){return $.set.call(this,e[0],t,n,e[0])};var Y=function(){function e(e){this.O=U,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,n){if("function"==typeof e&&"function"!=typeof t){var i=t;t=e;var a=this;return function(e){var n=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(o))}))}}var s;if("function"!=typeof t&&r(6),void 0!==n&&"function"!=typeof n&&r(7),o(e)){var c=E(this),u=D(this,e,void 0),l=!0;try{s=t(u),l=!1}finally{l?_(c):S(c)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return w(c,n),T(e,c)}),(function(e){throw _(c),e})):(w(c,n),T(s,c))}if(!e||"object"!=typeof e){if((s=t(e))===V)return;return void 0===s&&(s=e),this.N&&v(s,!0),s}r(21,e)},t.produceWithPatches=function(e,t){var n,r,i=this;return"function"==typeof e?function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return i.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(r))}))}:[this.produce(e,t,(function(e,t){n=e,r=t})),n,r]},t.createDraft=function(e){o(e)||r(8),i(e)&&(e=L(e));var t=E(this),n=D(this,e,void 0);return n[Z].C=!0,S(t),n},t.finishDraft=function(e,t){var n=(e&&e[Z]).A;return w(n,t),T(void 0,n)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!U&&r(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var o=y("Patches").$;return i(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(n+1))}))},e}(),X=new Y,J=X.produce;X.produceWithPatches.bind(X),X.setAutoFreeze.bind(X),X.setUseProxies.bind(X),X.applyPatches.bind(X),X.createDraft.bind(X),X.finishDraft.bind(X);const Q=J;var ee=n(4890);function te(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}n(2222);var ne=te();ne.withExtraArgument=te;const re=ne;function ie(){return ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function ae(e,t){return ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ae(e,t)}function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ce(e,t,n){return ce=se()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ae(i,n.prototype),i},ce.apply(null,arguments)}function ue(e){var t="function"==typeof Map?new Map:void 0;return ue=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ce(e,arguments,oe(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ae(r,e)},ue(e)}var le="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?ee.qC:ee.qC.apply(null,arguments)};var de=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.concat=function(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ce(r,(t=e.prototype.concat).call.apply(t,[this].concat(i)))},i.prepend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?ce(r,t[0].concat(this)):ce(r,t.concat(this))},r}(ue(Array));function fe(e){var t,n=function(e){return function(e){void 0===e&&(e={});var t=e,n=t.thunk,r=void 0===n||n,i=(t.immutableCheck,t.serializableCheck,new de);return r&&(function(e){return"boolean"==typeof e}(r)?i.push(re):i.push(re.withExtraArgument(r.extraArgument))),i}(e)},r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,c=r.devTools,u=void 0===c||c,l=r.preloadedState,d=void 0===l?void 0:l,f=r.enhancers,h=void 0===f?void 0:f;if("function"==typeof o)t=o;else{if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,ee.UY)(o)}var p=ee.md.apply(void 0,"function"==typeof s?s(n):s),v=ee.qC;u&&(v=le(ie({trace:!1},"object"==typeof u&&u)));var m=[p];Array.isArray(h)?m=[p].concat(h):"function"==typeof h&&(m=h(m));var g=v.apply(void 0,m);return(0,ee.MT)(t,d,g)}function he(e,t){function n(){if(t){var n=t.apply(void 0,arguments);if(!n)throw new Error("prepareAction did not return an object");return ie({type:e,payload:n.payload},"meta"in n&&{meta:n.meta},{},"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function pe(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function ve(e){var t=e.name,n=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var r=e.reducers||{},a=void 0===e.extraReducers?[]:"function"==typeof e.extraReducers?pe(e.extraReducers):[e.extraReducers],s=a[0],c=void 0===s?{}:s,u=a[1],l=void 0===u?[]:u,d=a[2],f=void 0===d?void 0:d,h=Object.keys(r),p={},v={},m={};h.forEach((function(e){var n,i,o=r[e],a=t+"/"+e;"reducer"in o?(n=o.reducer,i=o.prepare):n=o,p[e]=n,v[a]=n,m[e]=i?he(a,i):he(a)}));var g=function(e,t,n,r){void 0===n&&(n=[]);var a="function"==typeof t?pe(t):[t,n,r],s=a[0],c=a[1],u=a[2];return function(t,n){void 0===t&&(t=e);var r=[s[n.type]].concat(c.filter((function(e){return(0,e.matcher)(n)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[u]),r.reduce((function(e,t){if(t){if(i(e)){var r=t(e,n);return void 0===r?e:r}if(o(e))return Q(e,(function(e){return t(e,n)}));var a=t(e,n);if(void 0===a)throw Error("A case reducer on a non-draftable value must not return undefined");return a}return e}),t)}}(n,ie({},c,{},v),l,f);return{name:t,reducer:g,actions:m,caseReducers:p}}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var me=["name","message","stack","code"],ge=function(e){this.value=e},ye=function(e){if("object"==typeof e&&null!==e){var t={},n=me,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;"string"==typeof e[a]&&(t[a]=e[a])}return t}return{message:String(e)}};function be(e,t,n){var r=he(e+"/fulfilled",(function(e,t,n){return{payload:e,meta:{arg:n,requestId:t}}})),i=he(e+"/pending",(function(e,t){return{payload:void 0,meta:{arg:t,requestId:e}}})),o=he(e+"/rejected",(function(e,t,n,r){var i=!!e&&"AbortError"===e.name,o=!!e&&"ConditionError"===e.name;return{payload:r,error:ye(e||"Rejected"),meta:{arg:n,requestId:t,aborted:i,condition:o}}})),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,c,u){var l,d=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),f=new a,h=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),p=!1,v=function(){try{var a,l=function(e){return v?e:(n&&!n.dispatchConditionRejection&&o.match(a)&&a.meta.condition||s(a),a)},v=!1,m=function(l,v){try{var m=function(){if(n&&n.condition&&!1===n.condition(e,{getState:c,extra:u}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return p=!0,s(i(d,e)),Promise.resolve(Promise.race([h,Promise.resolve(t(e,{dispatch:s,getState:c,extra:u,requestId:d,signal:f.signal,rejectWithValue:function(e){return new ge(e)}})).then((function(t){return t instanceof ge?o(null,d,e,t.value):r(t,d,e)}))])).then((function(e){a=e}))}()}catch(e){return v(e)}return m&&m.then?m.then(void 0,v):m}(0,(function(t){a=o(t,d,e)}));return Promise.resolve(m&&m.then?m.then(l):l(m))}catch(e){return Promise.reject(e)}}();return Object.assign(v,{abort:function(e){p&&(l=e,f.abort())}})}}),{pending:i,rejected:o,fulfilled:r,typePrefix:e})}function we(e){if("error"in e)throw e.error;return e.payload}!function(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Z];return $.get(t,e)},set:function(t){var n=this[Z];$.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Z];if(!i.P)switch(i.i){case 5:r(i)&&A(i);break;case 4:n(i)&&A(i)}}}function n(e){for(var t=e.t,n=e.k,r=q(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==Z){var a=t[o];if(void 0===a&&!c(t,o))return!0;var s=n[o],u=s&&s[Z];if(u?u.t!==a:!l(s,a))return!0}}var d=!!t[Z];return r.length!==q(t).length+(d?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var o={};!function(e,t){G[e]=t}("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=z(n);delete o[Z];for(var a=q(o),s=0;s<a.length;s++){var c=a[s];o[c]=e(c,t||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:b(),P:!1,I:!1,D:{},l:n,t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Z,{value:o,writable:!0}),i},S:function(e,n,o){o?i(n)&&n[Z].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Z];if(n){var i=n.t,o=n.k,s=n.D,u=n.i;if(4===u)a(o,(function(t){t!==Z&&(void 0!==i[t]||c(i,t)?s[t]||e(o[t]):(s[t]=!0,A(n)))})),a(i,(function(e){void 0!==o[e]||c(o,e)||(s[e]=!1,A(n))}));else if(5===u){if(r(n)&&(A(n),s.length=!0),o.length<i.length)for(var l=o.length;l<i.length;l++)s[l]=!1;else for(var d=i.length;d<o.length;d++)s[d]=!0;for(var f=Math.min(o.length,i.length),h=0;h<f;h++)void 0===s[h]&&e(o[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}()},7937:(e,t,n)=>{"use strict";n.d(t,{J:()=>r,i:()=>i});const r=()=>parseInt(4),i=()=>"47fdf44ce6911dfb668a48ff94cc566fad169579"},7856:(e,t,n)=>{"use strict";n.d(t,{UJ:()=>M,as:()=>I,dW:()=>A,jc:()=>O});var r,i,o,a,s,c,u,l,d,f,h,p,v,m,g,y,b,w,_,S,E,C=n(1378),T=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},k=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};var O,I,R,x;!function(e){e.CLIENT_DISCONNECT="CLIENT_DISCONNECT",e.CONNECT_REJECTED="CONNECT_REJECTED",e.BLOCKED="BLOCKED",e.MAX_SESSIONS="MAX_SESSIONS",e.PROTOCOL_VERSION_AHEAD="PROTOCOL_VERSION_AHEAD",e.PROTOCOL_VERSION_BEHIND="PROTOCOL_VERSION_BEHIND",e.DISPLACED="DISPLACED",e.OFFLINE="OFFLINE",e.UNKNOWN="UNKNOWN",e.BAD_ACCOUNT="BAD_ACCOUNT",e.EXISTING_USER_SOCKET_BUSY="EXISTING_USER_SOCKET_BUSY",e.PASSIVE_REJECTION="PASSIVE_REJECTION",e.STALE="STALE",e.ACTION_RESPONSE_TIMEOUT="ACTION_RESPONSE_TIMEOUT",e.BUSY_CONNECTION="BUSY_CONNECTION",e.CONNECTION_DATA_NOT_FOUND="CONNECTION_DATA_NOT_FOUND"}(O||(O={})),function(e){e.pong="pong"}(I||(I={})),function(e){e.disconnecting="disconnecting",e.connectError="connect_error",e.ping="_ping",e.actionResponse="action_response"}(R||(R={})),function(e){e.status="status"}(x||(x={}));const A=Object.assign(Object.assign({},x),R);class M{constructor({logger:e,protocolVersion:t,url:n,reconnectWhenOffline:g}){r.add(this),this.eventEmitter=new C.EventEmitter,i.set(this,void 0),o.set(this,void 0),a.set(this,void 0),s.set(this,void 0),c.set(this,new Map),u.set(this,0),l.set(this,new Set),this.connectArgs=void 0,d.set(this,null),f.set(this,M.calculateDelay()),h.set(this,0),p.set(this,0),v.set(this,0),m.set(this,!1),this.log=e,T(this,o,t,"f"),T(this,i,n,"f"),T(this,a,"disconnected","f"),T(this,s,null,"f"),T(this,m,g,"f")}static calculateDelay(e){e||(e=500);let t=Math.min(2*e,2e4);return t=Math.round(t-t/2+Math.random()*t),t}connect(e){!1!==(null==e?void 0:e.reconnectReset)&&(this.resetReconnect(),(null==e?void 0:e.reconnectReset)&&delete e.reconnectReset),this.connectArgs=e||this.connectArgs,this.destroy();const t=new URL(k(this,i,"f"));Object.entries(this.makeConnectQuery()).forEach((([e,n])=>{["number","string","boolean"].includes(typeof n)?t.searchParams.append(e,n.toString()):this.log.warn(`Found a bad socket connect query parameter ${e}: ${n} (${typeof n})`)})),T(this,s,new WebSocket(t),"f"),k(this,r,"m",g).call(this)}makeConnectQuery(){return{protocolVersion:k(this,o,"f")}}addChattyAction(e){k(this,l,"f").add(e)}disconnect(e){this.destroy(e)}destroy(e){k(this,s,"f")&&(this.stopPonger(),T(this,d,e||null,"f"),k(this,r,"m",E).call(this,k(this,d,"f")||O.UNKNOWN),T(this,u,0,"f"),k(this,s,"f").onerror=null,k(this,s,"f").onopen=null,k(this,s,"f").onmessage=null,k(this,s,"f").readyState===WebSocket.CLOSED||k(this,s,"f").close(1e3,"client"),T(this,s,null,"f"))}getSocket(){return k(this,s,"f")}getStatus(){return k(this,a,"f")}on(e,t){this.eventEmitter.on(e,t)}async emit(e,t,n){return new Promise(((i,o)=>{var a,c;if((null===(a=k(this,s,"f"))||void 0===a?void 0:a.readyState)!==WebSocket.OPEN)throw new Error(`Tried to emit action [${e}], but WebSocket not open`);{const a={action:e,payload:t};n||(a.actionId=k(this,r,"m",w).call(this,{res:i,rej:o},e,t)),null===(c=k(this,s,"f"))||void 0===c||c.send(JSON.stringify(a)),n&&i(void 0)}}))}changeStatus(e){T(this,a,e,"f"),this.eventEmitter.emit(A.status,{status:k(this,a,"f"),disconnectCode:k(this,d,"f")})}wsOnCloseHandler(e){if(1006===e.code||4999===e.code)if(navigator.onLine)T(this,d,O.CONNECT_REJECTED,"f");else if(T(this,d,O.OFFLINE,"f"),k(this,m,"f"))return this.log.debug("Connection failed because we are offline, will retry soon"),void k(this,r,"m",b).call(this);if(e.code>1e3&&1006!==e.code&&4999!==e.code)return this.log.debug(`WS closed with non-normal code [${e.code}], reconnecting...`),void k(this,r,"m",b).call(this);this.resetReconnect(),this.log.debug(`WS close, ws code [${e.code}], ws reason [${e.reason}], disconnectingCode [${k(this,d,"f")}]`),k(this,r,"m",E).call(this,k(this,d,"f")),this.changeStatus("disconnected"),this.stopPonger()}wsOnOpenHandler(){this.log.debug("WebSocket.onopen"),this.resetReconnect(),this.changeStatus("connected"),this.startPonger()}wsOnErrorHandler(e){this.log.error("WebSocket.onerror",e)}wsOnMessageHandler(e){const t=JSON.parse(e.data||"{}"),n=t.message||"";["Internal server error","Endpoint request timed out"].includes(n)&&this.log.warn(`Server returned an error message [${n}]`);const i=t.action||"",o=t.payload||{},{error:a,actionId:s,failedAction:c}=t;if(a)return this.log.warn(`Ws error response code [${a}], action [${c}]`),void(s&&this.absorbEmitFailedMessage(t));if(k(this,l,"f").has(i)||this.log.debug(`On message action [${i}]`),i===R.actionResponse){const e=t.actionId||null;e?k(this,r,"m",_).call(this,e,o):this.log.warn("Received an action_response without an actionId",{payload:o})}else if(i===R.disconnecting){const e=o&&o.code;e||this.log.warn("Expected disconnecting event to have a 'code' field",t),T(this,d,this.resolveSocketError(e),"f")}else k(this,r,"m",y).call(this,i)?this.eventEmitter.emit(i,o):this.log.warn(`Received action for which there is no handler [${i}]`)}resetReconnect(){clearTimeout(k(this,p,"f")),T(this,f,M.calculateDelay(),"f"),T(this,h,0,"f")}absorbEmitFailedMessage(e){const t=k(this,c,"f").get(e.actionId.toString());t&&t.rej(e.error),k(this,r,"m",S).call(this,e.actionId)}resolveSocketError(e){let t=Object.values(O).includes(e)?e:O.UNKNOWN;return t===O.UNKNOWN&&this.log.warn(`Received unexpected socket error code [${e}]`),e||(t=O.CLIENT_DISCONNECT),t}startPonger(){this.log.debug("start pong");const e=Math.round(8e3),t=4e4-e,n=()=>t+Math.random()*e*2,r=()=>{this.emit(I.pong,void 0,!0),T(this,v,window.setTimeout(r.bind(this),n()),"f")};T(this,v,window.setTimeout(r,n()),"f")}stopPonger(){k(this,v,"f")&&(this.log.debug("stop pong"),clearTimeout(k(this,v,"f")),T(this,v,0,"f"))}}i=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,v=new WeakMap,m=new WeakMap,r=new WeakSet,g=function(){if(!k(this,s,"f"))throw new Error("Cannot setupWebsocket without WebSocket instance");this.changeStatus("connecting"),k(this,s,"f").onclose=this.wsOnCloseHandler.bind(this),k(this,s,"f").onerror=this.wsOnErrorHandler.bind(this),k(this,s,"f").onopen=this.wsOnOpenHandler.bind(this),k(this,s,"f").onmessage=this.wsOnMessageHandler.bind(this)},y=function(e){return this.eventEmitter.eventNames().includes(e)},b=function(){var e;clearTimeout(k(this,p,"f")),T(this,h,(e=k(this,h,"f"),++e),"f"),this.log.debug(`Will attempt reconnect #${k(this,h,"f")} in ${k(this,f,"f")}ms`),T(this,p,window.setTimeout((()=>{if(!this.connectArgs)throw new Error("Cannot reconnect without connect arguments, has there been an initial 'connect(...)' called?");this.connect(Object.assign(Object.assign({},this.connectArgs),{reconnectReset:!1}))}),k(this,f,"f")),"f"),T(this,f,M.calculateDelay(k(this,f,"f")),"f")},w=function(e,t,n){var r;const i=T(this,u,(r=k(this,u,"f"),++r),"f");return k(this,c,"f").set(i.toString(),e),setTimeout((()=>{k(this,c,"f").has(i.toString())&&(this.log.debug(`Emit action ${t} timed out (actionId=${i})`),this.absorbEmitFailedMessage({actionId:i,action:t,payload:n||{},error:O.ACTION_RESPONSE_TIMEOUT}))}),5e3),i},_=function(e,t){const n=k(this,c,"f").get(e.toString());n?n.res(t):this.log.warn(`No callback found for actionId [${e}]`),k(this,r,"m",S).call(this,e)},S=function(e){k(this,c,"f").delete(e.toString())},E=function(e){k(this,c,"f").forEach((({rej:t},n)=>{t(e||O.UNKNOWN)})),k(this,c,"f").clear()}},1151:(e,t,n)=>{"use strict";var r;n.d(t,{_:()=>r}),function(e){e.TEXT="text",e.ANSWER_BUTTONS="answer_buttons",e.TYPING="typing"}(r||(r={}))},4173:(e,t,n)=>{"use strict";n.d(t,{_y:()=>d._,Bu:()=>r,tw:()=>u.tw,yh:()=>u.yh,IB:()=>i});var r,i,o,a,s,c,u=n(3528);!function(e){e.RECORDING_START_EVENT_TAG="sb-recording-start",e.IFRAME_LOADING_EVENT_TAG="sb-iframe-loading"}(r||(r={})),function(e){e.IDLE="IDLE",e.WAITING="WAITING",e.ALERT="ALERT",e.ACTIVE="ACTIVE",e.FINISHED="FINISHED",e.MISSED="MISSED"}(i||(i={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE"}(o||(o={})),function(e){e.VISITOR="VISITOR",e.IP_ADDRESS="IP_ADDRESS"}(a||(a={})),function(e){e.BLOCK="BLOCK",e.SILENCE="SILENCE"}(s||(s={})),function(e){e.ADMIN="ADMIN",e.MEMBER="MEMBER"}(c||(c={}));var l,d=n(1151);n(8931),n(2024),n(3889),function(e){e.SCREENER="SCREENER",e.WIDGET_POPUP="WIDGET_POPUP",e.PROACTIVE_VIDEOS="PROACTIVE_VIDEOS",e.JOURNEY_BUILDER="JOURNEY_BUILDER",e.CHAT="CHAT",e.TOUR="TOUR"}(l||(l={}))},8931:(e,t,n)=>{"use strict";var r,i;n.d(t,{E:()=>r,O:()=>i}),function(e){e.ALERT="alert",e.VIDEO="video",e.EXPAND="expand",e.POPUP="popup",e.MODAL="modal"}(r||(r={})),function(e){e.VISIT="VISIT",e.CLICK="CLICK",e.FORM="FORM"}(i||(i={}))},3889:(e,t,n)=>{"use strict";var r,i,o;n.d(t,{Cs:()=>r}),function(e){e.GOTO="GOTO",e.DIAL="DIAL",e.BOOK_MEETING="BOOK_MEETING"}(r||(r={})),function(e){e.CHOICE="CHOICE"}(i||(i={})),function(e){e.CHOICES="CHOICES"}(o||(o={}))},2024:(e,t,n)=>{"use strict";var r,i,o;n.d(t,{QO:()=>i,r4:()=>r}),function(e){e.IMMEDIATE="immediate",e.SHOW="show",e.EXPAND="expand",e.ALERT="alert",e.DIAL="dial",e.INTERCOM="intercom",e.JS="js"}(r||(r={})),function(e){e.OFF_HOURS="off-hours",e.NONE_ONLINE="none-online",e.BUSY="busy"}(i||(i={})),function(e){e.IDLE_HELP_TEXT="IDLE_HELP_TEXT",e.IDLE_HELP_TEXT_FOCUSED="IDLE_HELP_TEXT_FOCUSED",e.IDLE_BUSY_TEXT="IDLE_BUSY_TEXT",e.IDLE_BUSY_TEXT_FOCUSED="IDLE_BUSY_TEXT_FOCUSED",e.IDLE_AWAY_TEXT="IDLE_AWAY_TEXT",e.IDLE_AWAY_TEXT_FOCUSED="IDLE_AWAY_TEXT_FOCUSED",e.ANSWER_CALL="ANSWER_CALL",e.NEED_HELP_TITLE="NEED_HELP_TITLE",e.NEED_HELP_TEXT="NEED_HELP_TEXT",e.NEED_HELP_CTA="NEED_HELP_CTA",e.DIALING_TITLE="DIALING_TITLE",e.RECORDING_OPTIN_TITLE="RECORDING_OPTIN_TITLE",e.RECORDING_OPTIN_TEXT="RECORDING_OPTIN_TEXT"}(o||(o={}))},3668:(e,t,n)=>{"use strict";n.d(t,{Zt:()=>f,b6:()=>g,GB:()=>v,_F:()=>h,iL:()=>y,fA:()=>p,H_:()=>d,Oj:()=>m});var r=n(5861),i=n(7757),o=n.n(i),a="https://api.servicebell.com",s=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,i,a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:if(!(r=e.sent).ok){e.next=8;break}return e.next=6,r.json();case 6:return i=e.sent,e.abrupt("return",{data:i});case 8:return e.next=10,r.text();case 10:s=e.sent,e.prev=11,c=JSON.parse(s),a=c.message,e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(11),new Error(s);case 19:throw new Error(a);case 20:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(t,n){return e.apply(this,arguments)}}();const c=function(e,t){return s("".concat(a).concat(e),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)})},u=function(e,t){var n=new URLSearchParams(t.params).toString(),r=n?"".concat(a).concat(e,"?").concat(n):"".concat(a).concat(e);return s(r,{headers:{Accept:"application/json"}})};var l=n(9943);function d(e,t,n){return c("/api/v1/visitor/email",{visitorId:e,email:t,clientKey:n}).catch((function(e){l.Z.error("Unable to send visitor email",void 0,e)}))}function f(e,t){return u("/api/v1/visitor/calendly",{params:{clientKey:e,visitorId:t}})}function h(e,t,n,r){return c("/api/v1/visitor/calendly",{visitorId:e,eventUri:t,inviteeUri:n,clientKey:r})}function p(e,t,n){return c("/api/v1/visitor/feedback",{visitorId:e,clientKey:t,feedbackAnswers:n})}function v(e){return u("/api/v1/visitor/init",{params:{clientKey:e}})}function m(e,t,n){var r=new FormData;return r.append("visitorSid",e),r.append("sbid",t),r.append("snapshot",n,"snapshot"),fetch("".concat("https://api.servicebell.com","/api/v1/visitor/snapshot"),{method:"POST",body:r})}function g(e,t,n){var r=new URLSearchParams({clientKey:t,visitorId:e});return n&&r.set("cursor",n.toString()),u("/api/v1/visitor/chat",{params:r})}function y(e,t,n){return c("/api/v1/widget/images",{clientKey:t,visitorId:e,filename:n})}},1663:(e,t,n)=>{"use strict";n.d(t,{FU:()=>S,Fg:()=>_,LO:()=>g,VL:()=>C,X$:()=>E,dv:()=>b,eY:()=>m,iP:()=>v,mS:()=>y,my:()=>w});var r=n(885),i=n(5776),o=n(5713),a=n(8891),s=n(5592),c=n(7109),u=n(2212),l=n(3593),d=n(3109),f=n(7887),h=n(6242),p=function(){var e=document.getElementById(l.uK);return e&&e.contentDocument},v=function(){var e=(p()||document).documentElement,t=(0,i.eJ)({width:(null==e?void 0:e.clientWidth)||0,height:(null==e?void 0:e.clientHeight)||0}),n=(0,r.Z)(t,2),o=n[0],a=n[1];return(0,i.d4)((function(){var e=function(){var e=(p()||document).documentElement;a({width:e.clientWidth,height:e.clientHeight})};return window.addEventListener("resize",e,{passive:!0}),window.top&&(window.top.addEventListener("load",e),window.top.addEventListener(d.tP,e)),function(){window.removeEventListener("resize",e),window.top&&(window.top.removeEventListener("load",e),window.top.removeEventListener(d.tP,e))}}),[e]),o},m=function(){var e=(0,s.Q)((function(e){return e.app.org.widgetSettings})),t=(0,s.Q)((function(e){return e.app.pageWidgetSettings})),n=(0,s.Q)((function(e){return e.app.options}));return(0,i.Ye)((function(){return Object.assign(Object.assign(Object.assign({},e),t),n)}),[e,t,n])},g=function(e){var t=(0,i.sO)(e);return(0,i.d4)((function(){t.current=e}),[e]),t},y=function(){var e=(0,s.Q)((function(e){return e.app})),t=e.stage,n=e.org,r=m(),i=r.hidden,o=r.hideConditions,a=(0,s.Q)((function(e){return e.chat})).isChatExpanded;if(t!==c.Hf.NEED_HELP||a)return!1;if(o){if(o.includes(c.QO.OFF_HOURS)&&!n.isWorkingHours)return!0;if(o.includes(c.QO.NONE_ONLINE)&&!n.available)return!0;if(o.includes(c.QO.BUSY)&&n.busy)return!0}return i},b=function(){var e=(0,s.Q)((function(e){return e.app.org.id}));return"https://www.servicebell.com?referrer=".concat(e)};function w(e){var t=(0,i.sO)(!0);(0,i.d4)((function(){t.current?t.current=!1:(0,o.Tm)(e?"sb:collapse":"sb:expand")}),[e])}function _(){var e=(0,i.eJ)(Object.assign({},a.rS)),t=(0,r.Z)(e,2),n=t[0],o=t[1],c=(0,s.Q)((function(e){return e.app.org.widgetSettings})),u=c.color,l=c.bgColor;return(0,i.d4)((function(){o(Object.assign({},a.rS))}),[u,l]),n}function S(){var e=m().copy;return(0,i.Ye)((function(){var t=(0,u.E_)(),n={};return Object.keys(t).forEach((function(r){var i=r,o=e[i]||t[i];n[i]=(0,u.Tu)(o)})),n}),[e])}function E(e){var t=(0,i.eJ)(),n=(0,r.Z)(t,2),o=n[0],a=n[1],u=(0,s.Q)(f.Dg),l=(0,s.Q)((function(e){return e.chat.isChatExpanded}));return(0,i.d4)((function(){e!==c.Hf.NEED_HELP||l?u.id&&a(u):a(void 0)}),[e,l,u]),u.id?u:o}function C(){var e=m().disableMobile;return(0,i.Ye)((function(){return h.s2&&e&&window.screen.width<450}),[e])}},3109:(e,t,n)=>{"use strict";n.d(t,{Vz:()=>y,qr:()=>r,tP:()=>g});var r,i=n(5861),o=n(7757),a=n.n(o),s=n(9046),c=n(7220),u=n(2611),l=n(2795),d=n(3593),f=n(1088),h=n(6688),p=n(8477),v=(0,l.U)("iframe"),m="https://cdn.servicebell.com/main.js";!function(e){e.frameFocus="sbiframefocus",e.frameMousemove="sbiframemousemove",e.frameKeydown="sbiframekeydown"}(r||(r={}));var g="sbiframeloaded",y=function(e){return new Promise((function(t){if(document.getElementById(d.uK))return v.warn("Attempted to create iframe, but it is already created"),void t();var n=document.createElement("div");n.setAttribute("id",d.Hb);var o=document.createElement("iframe");n.prepend(o),o.setAttribute("class",d.uK),o.setAttribute("id",d.uK),o.setAttribute("frameBorder","0"),o.setAttribute("allow","fullscreen"),o.setAttribute("src",window.location.href),v.debug("Set Iframe src ".concat(window.location.href)),document.body.prepend(n);var l=document.body.getAttribute("id");document.body.setAttribute("id","svb-top-body"),o.addEventListener("load",(function r(){if(o.contentWindow){try{o.contentWindow.scroll(0,window.scrollY)}catch(e){if("SecurityError"===e.name)return v.warn("Iframe failed, will fallback to retrigger mode"),o.remove(),n.remove(),l?document.body.setAttribute("id",l):document.body.removeAttribute("id"),c.ZP.dispatch((0,u.c)()),void t()}!function(){var t=[];document.body.childNodes.forEach((function(n){var r=n;r.id&&[e,d.Hb].includes(r.id)||t.push(r)}));var n=[];document.head.childNodes.forEach((function(e){var t=e,r=!t.src||t.src!==m;(!t.id||"svb-styles"!==t.id)&&r&&n.push(t)})),t.forEach((function(e){return document.body.removeChild(e)})),n.forEach((function(e){return document.head.removeChild(e)}))}();var i="margin: 0; overflow: hidden; width: 100vw; height: 100vh;";document.body.setAttribute("style",i),document.body.setAttribute("class",""),o.setAttribute("class","".concat(d.uK," ").concat(d.uK,"--loaded")),o.removeEventListener("load",r),v.debug("Iframe initialized and loaded ".concat(o.contentWindow.location.href)),t();var a=document.body.getBoundingClientRect().top;0!==a&&document.body.setAttribute("style","".concat(i," position: relative; top: ").concat(-a,"px;"))}})),o.addEventListener("load",(function(){(0,i.Z)(a().mark((function e(){var t,n,r,i,u,l,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.contentWindow&&o.contentDocument){e.next=2;break}return e.abrupt("return");case 2:if(v.info("Iframe has loaded ".concat(o.contentWindow.location.href)),(0,f.a)(!0),o.contentWindow.ServiceBell){e.next=9;break}return v.warn("Iframe just loaded a page without ServiceBell, attempting to inject & init"),e.next=8,(0,s.ve)(m,o.contentDocument);case 8:o.contentWindow.ServiceBell.init("",{mode:"iframe-immediate"});case 9:window.history.replaceState({},"",o.contentWindow.location.href),document.title=o.contentDocument.title,u='link[rel="icon"], link[rel="shortcut icon"]',l=document.querySelector(u),(d=o.contentDocument.querySelector(u))&&document.head.appendChild(d),l&&l.remove(),window.dispatchEvent(new CustomEvent(g,{detail:{href:o.contentWindow.location.href,title:o.contentDocument.title}})),null===(t=o.contentWindow)||void 0===t||t.addEventListener("focus",y),null===(n=o.contentWindow)||void 0===n||n.addEventListener("mousemove",w),null===(r=o.contentWindow)||void 0===r||r.addEventListener("keydown",b),null===(i=o.contentWindow)||void 0===i||i.addEventListener("beforeunload",(function(){if(c.ZP.getState().realtime.isRrwebRecording){var e=(0,p.lz)();e&&(0,h.if)(e)}}));case 21:case"end":return e.stop()}}),e)})))()}));var y=function(){return window.dispatchEvent(new CustomEvent(r.frameFocus))},b=function(){return window.dispatchEvent(new CustomEvent(r.frameKeydown))},w=function(){return window.dispatchEvent(new CustomEvent(r.frameMousemove))}}))}},9943:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Nt});var r=n(2982),i=n(1002),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(){var e={};return{get:function(){return e},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},set:function(t){e=t}}}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function c(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var u={log:console.log.bind(console),warn:console.warn.bind(console),error:console.error.bind(console)},l=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function d(e){if(h){if(f===e)return;S()}var t=C(e);throw h=t,f=e,setTimeout(q((function(){f===e&&S()})),t.incomplete?2e3:0),e}var f,h,p,v,m,g,y=[];function b(e,t,n){var r;if(y.forEach((function(i){try{i(e,t,n)}catch(e){r=e}})),r)throw r}function w(e,t,n,r,i){if(h)k(h,t,n),S();else if(i)b(C(i),!0,i);else{var o,a={url:t,column:r,line:n},s=e;if("[object String]"==={}.toString.call(e)){var c=l.exec(s);c&&(o=c[1],s=c[2])}b({name:o,message:"string"==typeof s?s:void 0,stack:[a]},!0,e)}return!!p&&p.apply(this,arguments)}function _(e){var t=e.reason||"Empty reason";b(C(t),!0,t)}function S(){var e=h,t=f;h=void 0,f=void 0,b(e,!1,t)}var E="?";function C(e,t){var n,r=void 0===t?0:+t;try{if(n=function(e){var t=I(e,"stacktrace");if(t){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=t.split("\n"),a=[],s=0;s<o.length;s+=2){var c=void 0;r.exec(o[s])?c={args:[],column:void 0,func:(n=r.exec(o[s]))[3],line:+n[1],url:n[2]}:i.exec(o[s])&&(c={args:(n=i.exec(o[s]))[5]?n[5].split(","):[],column:+n[2],func:n[3]||n[4],line:+n[1],url:n[6]}),c&&(!c.func&&c.line&&(c.func=E),c.context=[o[s+1]],a.push(c))}if(a.length)return{stack:a,message:I(e,"message"),name:I(e,"name")}}}(e),n)return n}catch(e){if(T)throw e}try{if(n=function(e){var t=I(e,"stack");if(t){for(var n,r,i,o,a=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,s=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,c=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,l=/\((\S*)(?::(\d+))(?::(\d+))\)/,d=t.split("\n"),f=[],h=0,p=d.length;h<p;h+=1){if(a.exec(d[h])){var v=(i=a.exec(d[h]))[2]&&0===i[2].indexOf("native");n=i[2]&&0===i[2].indexOf("eval"),r=l.exec(i[2]),n&&r&&(i[2]=r[1],i[3]=r[2],i[4]=r[3]),o={args:v?[i[2]]:[],column:i[4]?+i[4]:void 0,func:i[1]||E,line:i[3]?+i[3]:void 0,url:v?void 0:i[2]}}else if(c.exec(d[h]))o={args:[],column:(i=c.exec(d[h]))[4]?+i[4]:void 0,func:i[1]||E,line:+i[3],url:i[2]};else{if(!s.exec(d[h]))continue;n=(i=s.exec(d[h]))[3]&&i[3].indexOf(" > eval")>-1,r=u.exec(i[3]),n&&r?(i[3]=r[1],i[4]=r[2],i[5]=void 0):0!==h||i[5]||void 0===e.columnNumber||(f[0].column=e.columnNumber+1),o={args:i[2]?i[2].split(","):[],column:i[5]?+i[5]:void 0,func:i[1]||E,line:i[4]?+i[4]:void 0,url:i[3]}}!o.func&&o.line&&(o.func=E),f.push(o)}if(f.length)return{stack:f,message:I(e,"message"),name:I(e,"name")}}}(e),n)return n}catch(e){if(T)throw e}try{if(n=function(e){var t=I(e,"message");if(t){var n=t.split("\n");if(!(n.length<4)){var r,i,o,a=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,s=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,c=/^\s*Line (\d+) of function script\s*$/i,u=[],l=window&&window.document&&window.document.getElementsByTagName("script"),d=[];for(var f in l)i=l,o=f,Object.prototype.hasOwnProperty.call(i,o)&&!l[f].src&&d.push(l[f]);for(var h=2;h<n.length;h+=2){var p=void 0;a.exec(n[h])?p={args:[],column:void 0,func:(r=a.exec(n[h]))[3],line:+r[1],url:r[2]}:s.exec(n[h])?p={args:[],column:void 0,func:(r=s.exec(n[h]))[4],line:+r[1],url:r[3]}:c.exec(n[h])&&(r=c.exec(n[h]),p={url:window.location.href.replace(/#.*$/,""),args:[],column:void 0,func:"",line:+r[1]}),p&&(p.func||(p.func=E),p.context=[n[h+1]],u.push(p))}if(u.length)return{stack:u,message:n[0],name:I(e,"name")}}}}(e),n)return n}catch(e){if(T)throw e}try{if(n=O(e,r+1))return n}catch(e){if(T)throw e}return{message:I(e,"message"),name:I(e,"name"),stack:[]}}var T=!1;function k(e,t,n){var r={url:t,line:n?+n:void 0};if(r.url&&r.line){e.incomplete=!1;var i=e.stack;if(i.length>0&&i[0].url===r.url){if(i[0].line===r.line)return!1;if(!i[0].line&&i[0].func===r.func)return i[0].line=r.line,i[0].context=r.context,!1}return i.unshift(r),e.partial=!0,!0}return e.incomplete=!0,!1}function O(e,t){for(var n,r,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,o=[],a={},s=!1,c=O.caller;c&&!s;c=c.caller)c!==C&&c!==d&&(r={args:[],column:void 0,func:E,line:void 0,url:void 0},n=i.exec(c.toString()),c.name?r.func=c.name:n&&(r.func=n[1]),void 0===r.func&&(r.func=n?n.input.substring(0,n.input.indexOf("{")):void 0),a[c.toString()]?s=!0:a[c.toString()]=!0,o.push(r));t&&o.splice(0,t);var u={stack:o,message:I(e,"message"),name:I(e,"name")};return k(u,I(e,"sourceURL")||I(e,"fileName"),I(e,"line")||I(e,"lineNumber")),u}function I(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}var R,x="agent",A="console";function M(e){var t=D(e);return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"("+e.args.join(", ")+")":"",i=e.line?":"+e.line:"",o=e.line&&e.column?":"+e.column:"";t+="\n  at "+n+r+" @ "+e.url+i+o})),t}function D(e){return(e.name||"Error")+": "+e.message}function L(){var e,t=new Error;if(!t.stack)try{throw t}catch(e){}return z((function(){var n=C(t);n.stack=n.stack.slice(2),e=M(n)})),e}!function(e){e.HANDLED="handled",e.UNHANDLED="unhandled"}(R||(R={}));var P,N=/[^\u0000-\u007F]/,j=!1,F=function(){function e(e,t,n){void 0===n&&(n=!1),this.endpointUrl=e,this.bytesLimit=t,this.withBatchTime=n}return e.prototype.send=function(e,t){var n=this.withBatchTime?function(e){return e+(-1===e.indexOf("?")?"?":"&")+"batch_time="+(new Date).getTime()}(this.endpointUrl):this.endpointUrl,r=!!navigator.sendBeacon&&t<this.bytesLimit;if(r)try{if(navigator.sendBeacon(n,e))return}catch(e){!function(e){B||(B=!0,G(e))}(e)}var i=new XMLHttpRequest;i.addEventListener("loadend",q((function(e){return function(e){var i,o,a=null==e?void 0:e.currentTarget;a.status>=200&&a.status<300||j||(j=!0,i="XHR fallback failed",o={on_line:navigator.onLine,size:t,url:n,try_beacon:r,event:{is_trusted:e.isTrusted,total:e.total,loaded:e.loaded},request:{status:a.status,ready_state:a.readyState,response_text:a.responseText.slice(0,64)}},V.debugMode&&u.log("[MONITORING MESSAGE]","XHR fallback failed"),$(s(s({message:i},o),{status:P.info})))}(e)}))),i.open("POST",n,!0),i.send(e)},e}(),B=!1,W=function(){function e(e,t,n,r,i,o){void 0===o&&(o=ne),this.request=e,this.maxSize=t,this.bytesLimit=n,this.maxMessageSize=r,this.flushTimeout=i,this.beforeUnloadCallback=o,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0,this.flushOnVisibilityHidden(),this.flushPeriodically()}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.flush=function(){if(0!==this.bufferMessageCount){var e=c(this.pushOnlyBuffer,(t=this.upsertBuffer,n=[],Object.keys(t).forEach((function(e){n.push(t[e])})),n));this.request.send(e.join("\n"),this.bufferBytesSize),this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0}var t,n},e.prototype.sizeInBytes=function(e){return N.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},e.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,i=n.messageBytesSize;i>=this.maxMessageSize?u.warn("Discarded a message whose size was bigger than the maximum allowed size "+this.maxMessageSize+"KB."):(this.hasMessageFor(t)&&this.remove(t),this.willReachedBytesLimitWith(i)&&this.flush(),this.push(r,i,t),this.isFull()&&this.flush())},e.prototype.process=function(e){var t=re(e);return{processedMessage:t,messageBytesSize:this.sizeInBytes(t)}},e.prototype.push=function(e,t,n){this.bufferMessageCount>0&&(this.bufferBytesSize+=1),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.bufferBytesSize+=t,this.bufferMessageCount+=1},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=this.sizeInBytes(t);this.bufferBytesSize-=n,this.bufferMessageCount-=1,this.bufferMessageCount>0&&(this.bufferBytesSize-=1)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesSize+e+1>=this.bytesLimit},e.prototype.isFull=function(){return this.bufferMessageCount===this.maxSize||this.bufferBytesSize>=this.bytesLimit},e.prototype.flushPeriodically=function(){var e=this;setTimeout(q((function(){e.flush(),e.flushPeriodically()})),this.flushTimeout)},e.prototype.flushOnVisibilityHidden=function(){var e=this;navigator.sendBeacon&&(ae(window,"beforeunload",this.beforeUnloadCallback),ae(document,"visibilitychange",(function(){"hidden"===document.visibilityState&&e.flush()})),ae(window,"beforeunload",(function(){return e.flush()})))},e}();!function(e){e.info="info",e.error="error"}(P||(P={}));var U,V={maxMessagesPerPage:0,sentMessageCount:0};function H(e){if(e.internalMonitoringEndpoint){var t=function(e){var t,n=r(e.internalMonitoringEndpoint);function r(t){return new W(new F(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}return void 0!==e.replica&&(t=r(e.replica.internalMonitoringEndpoint)),{add:function(e){var r=function(e){return ue({date:(new Date).getTime(),view:{referrer:document.referrer,url:window.location.href}},void 0!==U?U():{},e)}(e);n.add(r),t&&t.add(r)}}}(e);!function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))}(V,{batch:t,maxMessagesPerPage:e.maxInternalMonitoringMessagesPerPage,sentMessageCount:0})}return{setExternalContextProvider:function(e){U=e}}}function Z(e,t,n){var r=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=V.batch?q(r):r;return n.apply(this,e)}}function q(e){return function(){return z(e,this,arguments)}}function z(e,t,n){try{return e.apply(t,n)}catch(e){Y(e);try{G(e)}catch(e){Y(e)}}}function G(e){$(s(s({},function(e){if(e instanceof Error){var t=C(e);return{error:{kind:t.name,stack:M(t)},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught "+re(e)}}(e)),{status:P.error}))}function $(e){V.batch&&V.sentMessageCount<V.maxMessagesPerPage&&(V.sentMessageCount+=1,V.batch.add(e))}function K(e){V.debugMode=e}function Y(e){V.debugMode&&u.error("[INTERNAL ERROR]",e)}var X,J,Q,ee=1e3;function te(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,te)}function ne(){}function re(e,t,n){if(null==e)return JSON.stringify(e);var r=[!1,void 0];ie(e)&&(r=[!0,e.toJSON],delete e.toJSON);var i,o,a=[!1,void 0];"object"==typeof e&&ie(i=Object.getPrototypeOf(e))&&(a=[!0,i.toJSON],delete i.toJSON);try{o=JSON.stringify(e,t,n)}catch(e){o="<error: unable to serialize object>"}finally{r[0]&&(e.toJSON=r[1]),a[0]&&(i.toJSON=a[1])}return o}function ie(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("toJSON")}function oe(e,t){return-1!==e.indexOf(t)}function ae(e,t,n,r){return se(e,[t],n,r)}function se(e,t,n,r){var i=void 0===r?{}:r,o=i.once,a=i.capture,s=i.passive,c=q(o?function(e){l(),n(e)}:n),u=s?{capture:a,passive:s}:a;t.forEach((function(t){return e.addEventListener(t,c,u)}));var l=function(){return t.forEach((function(t){return e.removeEventListener(t,c,u)}))};return{stop:l}}function ce(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var i=Array.isArray(e)?e:[],o=0;o<t.length;++o)i[o]=ce(i[o],t[o],n);return i}var a,s="object"==(null===(a=e)?"null":Array.isArray(a)?"array":typeof a)?e:{};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(s[c]=ce(s[c],t[c],n));return s}}function ue(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];null!=o&&(e=ce(e,o))}return e}!function(e){e.DOCUMENT="document",e.XHR="xhr",e.BEACON="beacon",e.FETCH="fetch",e.CSS="css",e.JS="js",e.IMAGE="image",e.FONT="font",e.MEDIA="media",e.OTHER="other"}(X||(X={})),function(e){e.FETCH="fetch",e.XHR="xhr"}(J||(J={}));var le,de,fe={debug:"debug",error:"error",info:"info",warn:"warn"},he=((Q={})[fe.debug]=0,Q[fe.info]=1,Q[fe.warn]=2,Q[fe.error]=3,Q),pe=(Object.keys(fe),"console"),ve="http",me=function(){function e(e,t,n,r){void 0===t&&(t=ve),void 0===n&&(n=fe.debug),void 0===r&&(r={}),this.sendLog=e,this.handlerType=t,this.level=n,this.contextManager=a(),this.contextManager.set(r)}return e.prototype.log=function(e,t,n){if(void 0===n&&(n=fe.info),he[n]>=he[this.level]){var r=Array.isArray(this.handlerType)?this.handlerType:[this.handlerType];oe(r,ve)&&this.sendLog(o({message:e,status:n},ue(this.contextManager.get(),t))),oe(r,pe)&&u.log(n+": "+e,ue(this.contextManager.get(),t))}},e.prototype.debug=function(e,t){this.log(e,t,fe.debug)},e.prototype.info=function(e,t){this.log(e,t,fe.info)},e.prototype.warn=function(e,t){this.log(e,t,fe.warn)},e.prototype.error=function(e,t){var n={error:{origin:"logger"}};this.log(e,ue(n,t),fe.error)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.addContext=function(e,t){this.contextManager.add(e,t)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.setLevel=function(e){this.level=e},function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([Z],e.prototype,"log",null),e}();function ge(e,t,n,r){var i=new Date;i.setTime(i.getTime()+n);var o="expires="+i.toUTCString(),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain="+r.domain:"",c=r&&r.secure?";secure":"";document.cookie=e+"="+t+";"+o+";path=/;samesite="+a+s+c}function ye(e){return function(e,t){var n=new RegExp("(?:^|;)\\s*"+t+"\\s*=\\s*([^;]+)").exec(e);return n?n[1]:void 0}(document.cookie,e)}function be(e,t){ge(e,"",0,t)}function we(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,n)}catch(e){u.error(t,e)}}}var _e={alternate:{logs:"logs",rum:"rum",sessionReplay:"session-replay",trace:"trace"},classic:{logs:"browser",rum:"rum",sessionReplay:void 0,trace:"public-trace"}},Se=((de={}).eu="datadoghq.eu",de.us="datadoghq.com",de),Ee=[Se.us,Se.eu];function Ce(e,t,n){return"classic"===e&&function(e,t){var n=_e.classic[e];return n&&n+"-http-intake.logs."+t}(t,n)||function(e,t){var n=_e.alternate[e],r=t.split("."),i=r.pop();return n+".browser-intake-"+(r.join("-")+"."+i)}(t,n)}function Te(e,t,n,r){var i="sdk_version:"+n.sdkVersion+(n.env?",env:"+n.env:"")+(n.service?",service:"+n.service:"")+(n.version?",version:"+n.version:""),o=Ce(e,t,n.site),a=n.proxyHost?n.proxyHost:o,s=(n.proxyHost?"ddhost="+o+"&":"")+"ddsource="+(r||"browser")+"&ddtags="+encodeURIComponent(i);return"https://"+a+"/v1/input/"+n.clientToken+"?"+s}var ke,Oe={allowedTracingOrigins:[],maxErrorsByMinute:3e3,maxInternalMonitoringMessagesPerPage:15,resourceSampleRate:100,sampleRate:100,silentMultipleInit:!1,trackInteractions:!1,trackViewsManually:!1,requestErrorResponseLengthLimit:32768,flushTimeout:3e4,maxBatchSize:50,maxMessageSize:262144,batchBytesLimit:16384};function Ie(e){var t={};return t.secure=function(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===le){for(var e="dd_site_test_"+te(),t=window.location.hostname.split("."),n=t.pop();t.length&&!ye(e);)ge(e,"test",1e3,{domain:n=t.pop()+"."+n});be(e,{domain:n}),le=n}return le}()),t}function Re(e,t){var n=function(e,t){var n=Array.isArray(e.enableExperimentalFeatures)?e.enableExperimentalFeatures:[],r=s(s({beforeSend:e.beforeSend&&we(e.beforeSend,"beforeSend threw an error:"),cookieOptions:Ie(e),isEnabled:function(e){return oe(n,e)},service:e.service},function(e,t){var n={buildMode:t.buildMode,clientToken:e.clientToken,env:e.env,proxyHost:e.proxyHost,sdkVersion:t.sdkVersion,service:e.service,site:e.site||Se[e.datacenter||t.datacenter],version:e.version},r=function(e,t){return!t.useAlternateIntakeDomains&&oe(Ee,e)?"classic":"alternate"}(n.site,e),i=function(e,t,n){if(t.proxyHost)return["https://"+t.proxyHost+"/v1/input/"];var r=[t.site];t.buildMode===ke.STAGING&&n&&r.push(Se.us);for(var i=[],o=Object.keys(_e[e]),a=0,s=r;a<s.length;a++)for(var c=s[a],u=0,l=o;u<l.length;u++){var d=l[u];i.push("https://"+Ce(e,d,c)+"/v1/input/")}return i}(r,n,void 0!==e.replica),o={isIntakeUrl:function(e){return i.some((function(t){return 0===e.indexOf(t)}))},logsEndpoint:Te(r,"logs",n),rumEndpoint:Te(r,"rum",n),sessionReplayEndpoint:Te(r,"sessionReplay",n),traceEndpoint:Te(r,"trace",n)};if(e.internalMonitoringApiKey&&(o.internalMonitoringEndpoint=Te(r,"logs",n,"browser-agent-internal-monitoring")),n.buildMode===ke.E2E_TEST&&(o.internalMonitoringEndpoint="<<< E2E INTERNAL MONITORING ENDPOINT >>>",o.logsEndpoint="<<< E2E LOGS ENDPOINT >>>",o.rumEndpoint="<<< E2E RUM ENDPOINT >>>",o.sessionReplayEndpoint="<<< E2E SESSION REPLAY ENDPOINT >>>"),n.buildMode===ke.STAGING&&void 0!==e.replica){var a=s(s({},n),{applicationId:e.replica.applicationId,clientToken:e.replica.clientToken,site:Se.us});o.replica={applicationId:e.replica.applicationId,internalMonitoringEndpoint:Te(r,"logs",a,"browser-agent-internal-monitoring"),logsEndpoint:Te(r,"logs",a),rumEndpoint:Te(r,"rum",a)}}return o}(e,t)),Oe);return"allowedTracingOrigins"in e&&(r.allowedTracingOrigins=e.allowedTracingOrigins),"sampleRate"in e&&(r.sampleRate=e.sampleRate),"resourceSampleRate"in e&&(r.resourceSampleRate=e.resourceSampleRate),"trackInteractions"in e&&(r.trackInteractions=!!e.trackInteractions),"trackViewsManually"in e&&(r.trackViewsManually=!!e.trackViewsManually),"actionNameAttribute"in e&&(r.actionNameAttribute=e.actionNameAttribute),r}(e,t);return{configuration:n,internalMonitoring:H(n)}}!function(e){e.RELEASE="release",e.STAGING="staging",e.E2E_TEST="e2e-test"}(ke||(ke={}));var xe,Ae,Me,De,Le,Pe=function(){function e(e){void 0===e&&(e=1e4),this.limit=e,this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>this.limit&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach((function(e){return e()})),this.buffer.length=0},e}(),Ne=function(){function e(){this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t}))}}},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}();function je(){return Date.now()}function Fe(){return performance.now()}function Be(){return{relative:Fe(),timeStamp:je()}}function We(e,t){return t-e}function Ue(e,t){var n=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(r instanceof Error)return r}}(e);return{message:c(["console error:"],e).map((function(e){return function(e){return"string"==typeof e?e:e instanceof Error?D(C(e)):re(e,void 0,2)}(e)})).join(" "),stack:n?M(C(n)):void 0,handlingStack:t}}function Ve(e){return Ae=function(t,n,r){var i=function(e,t,n,r){return e&&(void 0!==e.message||t instanceof Error)?{message:e.message||"Empty message",stack:M(e),handlingStack:r,type:e.name}:{message:"Uncaught "+re(t),stack:"No stack, consider using an instance of Error",handlingStack:r,type:e&&e.name}}(t,r),o=i.stack,a=i.message,s=i.type;e.notify({message:a,stack:o,type:s,source:"source",startClocks:Be(),originalError:r,handling:R.UNHANDLED})},t=Ae,v||(p=window.onerror,window.onerror=q(w),v=!0),g||(m=null!==window.onunhandledrejection?window.onunhandledrejection:void 0,window.onunhandledrejection=q(_),g=!0),y.push(t),{stop:function(){!function(e){for(var t=y.length-1;t>=0;t-=1)y[t]===e&&y.splice(t,1);0===y.length&&(v&&(window.onerror=p,v=!1),g&&(window.onunhandledrejection=m,g=!1))}(Ae)}};var t}function He(e){return function(e,t){if(function(){if(void 0!==Me)return Me;try{var e=new URL("http://test/path");return Me="http://test/path"===e.href}catch(e){Me=!1}return Me}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '"+e+"'");var n=document,r=n.createElement("a");if(void 0!==t){var i=(n=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,n.head.appendChild(i),n.body.appendChild(r)}return r.href=e,r}(e,function(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return e.protocol+"//"+t}(window.location)).href}var Ze,qe=[],ze=[];function Ge(e,t){var n=t&&t.method||"object"==typeof e&&e.method||"GET",r=He("object"==typeof e&&e.url||e),i={init:t,input:e,method:n,startClocks:Be(),url:r};return qe.forEach((function(e){return e(i)})),i}function $e(e,t){var n=this,r=function(e){return r=n,i=void 0,a=function(){var n,r;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(i){switch(i.label){case 0:return t.duration=We(t.startClocks.timeStamp,je()),"stack"in e||e instanceof Error?(t.status=0,t.responseText=M(C(e)),t.isAborted=e instanceof DOMException&&e.code===DOMException.ABORT_ERR,t.error=e,ze.forEach((function(e){return e(t)})),[3,6]):[3,1];case 1:if(!("status"in e))return[3,6];n=void 0,i.label=2;case 2:return i.trys.push([2,4,,5]),[4,e.clone().text()];case 3:return n=i.sent(),[3,5];case 4:return r=i.sent(),n="Unable to retrieve response: "+r,[3,5];case 5:t.response=e,t.responseText=n,t.responseType=e.type,t.status=e.status,t.isAborted=!1,ze.forEach((function(e){return e(t)})),i.label=6;case 6:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function s(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,s)}c((a=a.apply(r,i||[])).next())}));var r,i,o,a};e.then(q(r),q(r))}var Ke,Ye,Xe,Je=[],Qe=[];function et(e,t){var n=this;return z((function(){n._datadog_xhr={method:e,url:He(t)}})),Ke.apply(this,arguments)}function tt(){var e=this;return z((function(){if(e._datadog_xhr){e._datadog_xhr.startTime=Fe(),e._datadog_xhr.startClocks=Be(),e._datadog_xhr.isAborted=!1;var t=!1,n=e.onreadystatechange,r=function(){this.readyState===XMLHttpRequest.DONE&&i(),n&&n.apply(this,arguments)},i=q((function(){e.removeEventListener("loadend",i),e.onreadystatechange===r&&(e.onreadystatechange=n),t||(t=!0,rt(e))}));e.onreadystatechange=r,e.addEventListener("loadend",i),Je.forEach((function(t){return t(e._datadog_xhr,e)}))}})),Ye.apply(this,arguments)}function nt(){var e=this;return z((function(){e._datadog_xhr&&(e._datadog_xhr.isAborted=!0)})),Xe.apply(this,arguments)}function rt(e){e._datadog_xhr.duration=We(e._datadog_xhr.startClocks.timeStamp,je()),e._datadog_xhr.responseText=e.response,e._datadog_xhr.status=e.status,e._datadog_xhr.xhr=e,Qe.forEach((function(t){return t(s({},e._datadog_xhr))}))}function it(e,t,n){function r(r,i){e.isIntakeUrl(i.url)||!n&&i.isAborted||!function(e){return 0===e.status&&"opaque"!==e.responseType}(i)&&!function(e){return e.status>=500}(i)||t.notify({message:at(r)+" error "+i.method+" "+i.url,resource:{method:i.method,statusCode:i.status,url:i.url},source:"network",stack:ot(i.responseText,e)||"Failed to load",startClocks:i.startClocks})}return void 0===n&&(n=!0),(Ze||(Ke=XMLHttpRequest.prototype.open,Ye=XMLHttpRequest.prototype.send,Xe=XMLHttpRequest.prototype.abort,XMLHttpRequest.prototype.open=et,XMLHttpRequest.prototype.send=tt,XMLHttpRequest.prototype.abort=nt,Ze={beforeSend:function(e){Je.push(e)},onRequestComplete:function(e){Qe.push(e)}}),Ze).onRequestComplete((function(e){return r(J.XHR,e)})),(De||(window.fetch&&(Le=window.fetch,window.fetch=function(e,t){var n,r=z(Ge,null,[e,t]);return r?z($e,null,[n=Le.call(this,r.input,r.init),r]):n=Le.call(this,e,t),n}),De={beforeSend:function(e){qe.push(e)},onRequestComplete:function(e){ze.push(e)}}),De).onRequestComplete((function(e){return r(J.FETCH,e)})),{stop:function(){Ze&&(Ze=void 0,Je.length=0,Qe.length=0,XMLHttpRequest.prototype.open=Ke,XMLHttpRequest.prototype.send=Ye,XMLHttpRequest.prototype.abort=Xe),De&&(De=void 0,qe.splice(0,qe.length),ze.splice(0,ze.length),window.fetch=Le)}}}function ot(e,t){return e&&e.length>t.requestErrorResponseLengthLimit?e.substring(0,t.requestErrorResponseLengthLimit)+"...":e}function at(e){return J.XHR===e?"XHR":"Fetch"}var st=9e5;function ct(e,t,n){var r=function(e,t){var n,r,i=!1,o=function(){i=!0,clearTimeout(n),n=setTimeout((function(){i=!1}),1e3)};return{get:function(){return i||(r=ye(e),o()),r},set:function(n,i){ge(e,n,i,t),r=n,o()}}}("_dd_s",e);!function(e){var t=e.get(),n=ye("_dd"),r=ye("_dd_r"),i=ye("_dd_l");if(!t){var o={};n&&(o.id=n),i&&/^[01]$/.test(i)&&(o.logs=i),r&&/^[012]$/.test(r)&&(o.rum=r),dt(o,e)}}(r);var i,o,a,s,c=new Ne,u=lt(r).id,l=(i=q((function(){var e=lt(r),i=n(e[t]),o=i.trackingType,a=i.isTracked;e[t]=o,a&&!e.id&&(e.id=te(),e.created=String(Date.now())),dt(e,r),a&&u!==e.id&&(u=e.id,c.notify())})),s=!1,{throttled:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s?o=e:(i.apply(void 0,e),s=!0,a=setTimeout((function(){o&&i.apply(void 0,o),s=!1,o=void 0}),1e3))},cancel:function(){clearTimeout(a),s=!1,o=void 0}}).throttled;return l(),function(e){var t=se(window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0}).stop;pt.push(t)}(l),function(e){var t=q((function(){"visible"===document.visibilityState&&dt(lt(r),r)})),n=ae(document,"visibilitychange",t).stop;pt.push(n);var i=setInterval(t,6e4);pt.push((function(){clearInterval(i)}))}(),{getId:function(){return lt(r).id},getTrackingType:function(){return lt(r)[t]},renewObservable:c}}var ut=/^([a-z]+)=([a-z0-9-]+)$/;function lt(e){var t=function(e){var t=e.get(),n={};return function(e){return void 0!==e&&(-1!==e.indexOf("&")||ut.test(e))}(t)&&t.split("&").forEach((function(e){var t=ut.exec(e);if(null!==t){var r=t[1],i=t[2];n[r]=i}})),n}(e);return function(e){return(void 0===e.created||Date.now()-Number(e.created)<144e5)&&(void 0===e.expire||Date.now()<Number(e.expire))}(t)?t:(ft(e),{})}function dt(e,t){if(n=e,0!==Object.keys(n).length){var n;e.expire=String(Date.now()+st);var r=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}(e).map((function(e){return e[0]+"="+e[1]})).join("&");t.set(r,st)}else ft(t)}function ft(e){e.set("",0)}var ht,pt=[];function vt(e){return 0!==(t=e.sampleRate)&&100*Math.random()<=t?ht.TRACKED:ht.NOT_TRACKED;var t}!function(e){e.NOT_TRACKED="0",e.TRACKED="1"}(ht||(ht={}));var mt={buildMode:"release",datacenter:"us",sdkVersion:"2.18.0"};function gt(e){var t=window.DD_RUM;return t&&t.getInternalContext?t.getInternalContext(e):void 0}var yt,bt,wt,_t=function(e){var t,n,r=!1,i=a(),c={},l=new Pe,d=function(e,t){l.add((function(){return d(e,t)}))},f=function(){},h=new me(p);return t={logger:h,init:q((function(e){(function(e){return r?(e.silentMultipleInit||u.error("DD_LOGS is already initialized."),!1):e&&(e.publicApiKey||e.clientToken)?!!(void 0===e.sampleRate||(t=e.sampleRate,function(e){return"number"==typeof e}(t)&&t>=0&&t<=100))||(u.error("Sample Rate should be a number between 0 and 100"),!1):(u.error("Client Token is not configured, we will not send any data."),!1);var t})(e)&&(e.publicApiKey&&(e.clientToken=e.publicApiKey,u.warn("Public API Key is deprecated. Please use Client Token instead.")),d=function(e,t,n){var r=Re(e,mt),i=r.configuration,o=r.internalMonitoring,a=new Ne;!1!==e.forwardErrorsToLogs&&(function(e){xe=console.error,console.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=L();z((function(){xe.apply(console,t),e.notify(s(s({},Ue(t,r)),{source:A,startClocks:Be(),handling:R.HANDLED}))}))}}(a),Ve(a),it(i,a,i.isEnabled("remove-network-errors")));var c=function(e,t){if(!t){var n=vt(e)===ht.TRACKED;return{getId:function(){},isTracked:function(){return n}}}var r=ct(e.cookieOptions,"logs",(function(t){return function(e,t){var n=function(e){return e===ht.NOT_TRACKED||e===ht.TRACKED}(t)?t:vt(e);return{trackingType:n,isTracked:n===ht.TRACKED}}(e,t)}));return{getId:r.getId,isTracked:function(){return r.getTrackingType()===ht.TRACKED}}}(i,function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_"+te(),n="test";ge(t,n,ee,e);var r=ye(t)===n;return be(t,e),r}catch(e){return u.error(e),!1}}(i.cookieOptions));return function(e,t,n,r,i,o){n.setExternalContextProvider((function(){return ue({session_id:r.getId()},o(),gt())}));var a=function(e,t,n){var r=function(e,t){var n=0,r=!1;return{isLimitReached:function(){if(0===n&&setTimeout((function(){n=0}),6e4),(n+=1)<=e.maxErrorsByMinute||r)return r=!1,!1;if(n===e.maxErrorsByMinute+1){r=!0;try{t({message:"Reached max number of errors by minute: "+e.maxErrorsByMinute,source:x,startClocks:Be()})}finally{r=!1}}return!0}}}(t,n);return function(n,i){if(e.isTracked()){var o=ue({service:t.service,session_id:e.getId()},i,gt(),n);if(!(t.beforeSend&&!1===t.beforeSend(o)||o.status===fe.error&&r.isLimitReached()))return o}}}(r,e,c),s=function(e){var t,n=r(e.logsEndpoint);function r(t){return new W(new F(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}return void 0!==e.replica&&(t=r(e.replica.logsEndpoint)),{add:function(e){n.add(e),t&&t.add(e)}}}(e);function c(e){i.error(e.message,ue({date:e.startClocks.timeStamp,error:{kind:e.type,origin:e.source,stack:e.stack}},e.resource?{http:{method:e.resource.method,status_code:e.resource.statusCode,url:e.resource.url}}:void 0,gt(e.startClocks.relative)))}return t.subscribe(c),function(e,t){var n=a(e,t);n&&s.add(n)}}(i,a,o,c,t,n)}(e,h,i.get),f=function(){return ce(void 0,e)},l.drain(),r=!0)})),getLoggerGlobalContext:q(i.get),setLoggerGlobalContext:q(i.set),addLoggerGlobalContext:q(i.add),removeLoggerGlobalContext:q(i.remove),createLogger:q((function(e,t){return void 0===t&&(t={}),c[e]=new me(p,t.handler,t.level,o(o({},t.context),{logger:{name:e}})),c[e]})),getLogger:q((function(e){return c[e]})),getInitConfiguration:q((function(){return f()}))},n=s(s({},t),{onReady:function(e){e()}}),Object.defineProperty(n,"_setDebug",{get:function(){return K},enumerable:!1}),n;function p(e){d(e,ue({date:Date.now(),view:{referrer:document.referrer,url:window.location.href}},i.get()))}}();bt=_t,wt=(yt=function(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}())["DD_LOGS"],yt.DD_LOGS=bt,wt&&wt.q&&wt.q.forEach((function(e){return we(e,"onReady callback threw an error:")()}));var St=n(7937),Et=null;if((0,n(9046).yL)()){var Ct=window.top.__ddTopWindowLogger__;Ct&&(Et=Ct)}else _t.init({env:"production",clientToken:"pub42fbf37103cb3ff40544afec68ccb41b",site:"datadoghq.com",forwardErrorsToLogs:!1,sampleRate:100,version:(0,St.i)(),service:"widget"}),(Et=_t.logger).setLevel("debug"),window.__ddTopWindowLogger__=Et;var Tt=Math.random()>.99,kt=window.location.hostname.endsWith("servicebell.com"),Ot=!1;const It=Et;var Rt=n(7220),xt={},At=["error","warn","log","info","debug"],Mt="_sbloglevel_",Dt=function e(t){if(null!==t&&"object"===(0,i.Z)(t)){if(t instanceof Error)return{name:t.name||null,message:t.message||null,stack:t.stack||null};var n={};return Object.getOwnPropertyNames(t).forEach((function(r){n[r]=e(t[r])})),n}return t},Lt=function(e){return At.includes(e)},Pt=function(e,t,n,o){var a,s=function(){var e=function(){var e=document.location.search.substring(1),t=new URLSearchParams(e),n=t.get("sblog");if(n&&Lt(n)?localStorage.setItem(Mt,n):"off"===n&&localStorage.removeItem(Mt),n){t.delete("sblog");var r=t.toString(),i="".concat(window.location.pathname).concat(r?"?".concat(r):"");history.replaceState(null,"",i)}var o=localStorage.getItem(Mt);return o&&Lt(o)?o:null}();return e?At.indexOf(e):-1}();s>-1&&At.indexOf(e)<=s&&(a=console)[e].apply(a,(0,r.Z)([t,n,o].filter(Boolean)));var c={};n&&("object"===(0,i.Z)(n)&&null!==n&&(c=n),"string"==typeof n&&(c.message=n)),c.error?c.error2=o||void 0:c.error=o||void 0,c=Dt(c);var u=Object.assign(Object.assign({},function(){var e={};try{var t=Rt.ZP.getState();t.realtime.helpedBy&&(e.agentId=t.realtime.helpedBy),t.realtime.helpedBySid&&(e.agentSid=t.realtime.helpedBySid),t.app.org.id&&"number"==typeof t.app.org.id&&(e.orgId=t.app.org.id),t.realtime.sbid&&(e.sbid=t.realtime.sbid),t.realtime.sid&&(e.visitorSid=t.realtime.sid),t.realtime.customId&&(e.visitorCustomId=t.realtime.customId)}catch(e){return xt}return xt=e,e}()),{extra:c});It&&function(e,t){return!("error"!==e&&"warn"!==e&&!Tt&&!kt&&(!t.agentId&&!Ot||(Ot=!0,0)))}(e,u)&&It["log"===e?"debug":e](t,u)};const Nt={error:function(e,t,n){return Pt("error",e,t,n)},warn:function(e,t){return Pt("warn",e,t)},log:function(e,t){return Pt("log",e,t)},info:function(e,t){return Pt("info",e,t)},debug:function(e,t){return Pt("debug",e,t)}}},2795:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(9943),i=function(e){var t=function(t){return"[".concat(e,"] ").concat(t)};return{error:function(e,n,i){return r.Z.error(t(e),n,i)},warn:function(e,n){return r.Z.warn(t(e),n)},log:function(e,n){return r.Z.log(t(e),n)},info:function(e,n){return r.Z.info(t(e),n)},debug:function(e,n){return r.Z.debug(t(e),n)}}}},7780:(e,t,n)=>{"use strict";n.d(t,{l:()=>w});var r,i,o,a,s,c,u,l,d,f=n(785),h=n.n(f),p=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},v=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const m="_sbAudioDeviceId_",g="_sbVideoDeviceId_",y={NotAllowedError:"Could not get <device> media streams, make sure you have enabled device permissions in your browser",NotFoundError:"Could not find <device>",NotReadableError:"Failed to access <device> due to a hardware failure",OverconstrainedError:"Could not get <device> that meets minimum requirements",TypeError:"Empty constraints or operating in an insecure context prevented <device> access",default:"Could not get <device> media streams, make sure you have devices available and enabled permissions in your browser"};i=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap,r=new WeakSet,l=function(){return new Promise((e=>{h().load((()=>{!v(this,a,"f")&&h().isWebsiteHasMicrophonePermissions&&(v(this,i,"f").debug("Refreshing device list after permissions granted"),navigator.mediaDevices.dispatchEvent(new Event("devicechange")),p(this,a,!0,"f")),e()}))}))},d=function(e=!1){return new Promise((t=>{v(this,o,"f")||e?h().load(t):t()})).then((()=>{p(this,o,!1,"f")}))};var b=(0,n(2795).U)("media-devices"),w=new class{constructor(e){r.add(this),i.set(this,void 0),o.set(this,!0),a.set(this,!1),s.set(this,null),c.set(this,[]),u.set(this,void 0),this.getMediaDevices=async()=>{await v(this,r,"m",d).call(this);const{audioInputDevices:e,videoInputDevices:t}=h();return{audioInputDevices:e,videoInputDevices:t}},this.getPreferredMediaDevices=async()=>{var e,t,n,o;await v(this,r,"m",d).call(this,!0);let a=localStorage.getItem(m)||(null===(e=h().audioInputDevices[0])||void 0===e?void 0:e.deviceId)||void 0,s=localStorage.getItem(g)||(null===(t=h().videoInputDevices[0])||void 0===t?void 0:t.deviceId)||void 0;return a&&!h().audioInputDevices.map((e=>e.deviceId)).includes(a)&&(v(this,i,"f").info(`Preferred mic device ${a} not found, will use first available`),a=(null===(n=h().audioInputDevices[0])||void 0===n?void 0:n.deviceId)||void 0),s&&!h().videoInputDevices.map((e=>e.deviceId)).includes(s)&&(v(this,i,"f").info(`Preferred cam device ${s} not found, will use first available`),s=(null===(o=h().videoInputDevices[0])||void 0===o?void 0:o.deviceId)||void 0),{audio:a,video:s}},this.setPreferredMediaDevices=(e,t)=>{e&&localStorage.setItem(m,e),t&&localStorage.setItem(g,t)},p(this,i,e,"f"),p(this,u,this.listenToDeviceChange((()=>p(this,o,!0,"f"))),"f")}destroy(){v(this,c,"f").forEach((e=>{e.getTracks().forEach((e=>e.stop()))})),v(this,u,"f").call(this)}listenToDeviceChange(e){if(!(null===navigator||void 0===navigator?void 0:navigator.mediaDevices))return()=>null;const t=()=>{v(this,s,"f")&&clearTimeout(v(this,s,"f")),p(this,s,setTimeout((()=>{e(),p(this,s,null,"f")}),100),"f")};return navigator.mediaDevices.addEventListener("devicechange",t),()=>navigator.mediaDevices.removeEventListener("devicechange",t)}async setupCameraMediaStream({audio:e,video:t}){const{mediaDevices:n}=navigator;if(!n)throw v(this,i,"f").warn("Could not access navigator.mediaDevices"),new Error("Your browser does not support camera streaming");let o,a;try{const i=await this.getPreferredMediaDevices(),s={};e&&(o="string"==typeof e?e:i.audio,s.audio="string"!=typeof o||{deviceId:o}),t&&(a="string"==typeof t?t:i.video,s.video="string"==typeof a?{deviceId:a,facingMode:"user"}:{facingMode:"user"});const c=await n.getUserMedia(s);return this.setPreferredMediaDevices("object"==typeof s.audio?s.audio.deviceId:void 0,"object"==typeof s.video?s.video.deviceId:void 0),await v(this,r,"m",l).call(this),{stream:c,audioDeviceId:o,videoDeviceId:a}}catch(n){const r=n.name||"default",s=e&&t?"microphone and camera":e?"microphone":"camera",c=(y[r]||y.default).replace("<device>",s);v(this,i,"f").warn(c,{error:n,audioDeviceId:o,videoDeviceId:a});const u=new Error(c);throw u.name=r||"GetUserMediaFailed",u}}async setupDisplayMediaStream(){var e;if(!(null===(e=null===navigator||void 0===navigator?void 0:navigator.mediaDevices)||void 0===e?void 0:e.getDisplayMedia))throw new Error("Your browser does not support screen capture");try{return await navigator.mediaDevices.getDisplayMedia({audio:!0,video:{cursor:"always",displaySurface:"browser"}})}catch(e){throw v(this,i,"f").warn("Failed to getDisplayMedia",{error:e}),e}}}(b)},1088:(e,t,n)=>{"use strict";n.d(t,{V:()=>c,a:()=>s});var r,i,o=n(9046),a=n(9943),s=function(e){var t=e?"[iframe]":"",n=(0,o.zb)();r&&r.disconnect();var i=function(){var e=Array.from(n.body.getElementsByTagName("a")).filter((function(e){return(0,o.fI)(e.href)&&"_blank"!==e.getAttribute("target")}));e.forEach((function(e){return e.setAttribute("target","_blank")})),e.length>0&&a.Z.info("".concat(t," Modified ").concat(e.length," external anchors to target _blank"))};(r=new MutationObserver((function(e){e.forEach((function(e){e.oldValue!==e.target.textContent&&i()}))}))).observe(n.body,{characterDataOldValue:!0,subtree:!0,childList:!0,characterData:!0}),i()},c=function(e){var t=(0,o.zb)(),n=function(){var e=t.location.href,n=t.title;e?window.dispatchEvent(new CustomEvent("sblocationchanged",{detail:{href:e,title:n}})):a.Z.debug("Ignoring falsy href [".concat(e,"], will not dispatch sblocationchanged dom event"))};i&&i.disconnect();var r=0,s=t.location.href,c=t.title;(i=new MutationObserver((function(i){i.forEach((function(){!t||s===t.location.href&&c===t.title||(s=t.location.href,c=t.title,a.Z.debug("".concat(e?"Iframe":"Document"," location.href changed (mutation) ").concat(s)),e&&(window.history.replaceState({},"",s),document.title=t.title),clearTimeout(r),r=window.setTimeout((function(){n()}),100))}))}))).observe(t.body,{childList:!0,subtree:!0}),n()}},8743:(e,t,n)=>{"use strict";n.d(t,{H:()=>g});var r=n(5776),i=n(8429),o=n(6403),a=n(9046),s=n(5164),c=n(2795),u=n(2355),l=n(5592),d=n(2611),f=n(6688),h=n(7109),p=n(5713),v=(0,c.U)("call-kit"),m={callAccepted:(0,o.hg)("realtime/callAccepted",(function(e,t){(0,t.getState)().realtime.hasAcceptedCall||((0,f.hQ)(),(0,p.Tm)("sb:callaccept"))})),callRejected:(0,o.hg)("realtime/callRejected",(function(e){(0,f.dS)(),(0,f.d2)(h.xz.REJECT_CALL),(0,p.Tm)("sb:callreject")})),callEnded:(0,o.hg)("realtime/callEnded",(function(e,t){var n=t.dispatch,r=t.getState,i=r().app,o=i.screenTakeoverOn,a=i.isRequestingDisplayshare,c=r().realtime.incomingDisplayStreamId;n((0,d.oU)({audio:!1,video:!1})),o&&n((0,d.zS)(!1)),a&&n((0,d.Px)(!1)),c&&n((0,s.p)({streamId:null,isReceivingAudio:!1,isReceivingVideo:!1})),(0,p.Tm)("sb:callend")})),endCallWanted:(0,o.hg)("realtime/endCallWanted",(function(){(0,f.d2)(h.xz.STOP_VIDEO),(0,f.d2)(h.xz.STOP_TAKEOVER),(0,f.d2)(h.xz.STOP_DISPLAYSHARE)}))},g=(0,u.j)({thunks:m,thunkReducers:{callAccepted:{fulfilled:function(e){e.hasAcceptedCall=!0,e.hasAcceptedAnyCall=!0}},callEnded:{fulfilled:function(e){e.hasAcceptedCall=!1}}},reducers:{incomingCameraStreamChanged:function(e,t){var n=t.payload,r=n.streamId,i=n.isReceivingAudio,o=n.isReceivingVideo;e.incomingCameraStreamId=r,e.isReceivingAudio=i,e.isReceivingVideo=o}},useKitHook:function(){var e=(0,i.I0)(),t=(0,l.Q)((function(e){return e.app})),n=t.stage,o=t.startCallOnPageVisible,s=t.isPageVisible,c=t.isAutoplayAudioAllowed,u=(0,l.Q)((function(e){return e.realtime})),g=u.isVideo,y=u.isVideoAccepted,b=u.peerStatus,w=u.hasAcceptedCall,_=u.isReceivingVideo,S="connected"===b&&g,E=(0,a.D9)(S);(0,r.d4)((function(){E||!S||w||(v.debug("Call ready due to visitor isVideo"),e((0,d.iP)({accepted:y})))}),[E,S,w,s,y,e]),(0,r.d4)((function(){S&&(0,p.Tm)("sb:callstart")}),[S]),(0,r.d4)((function(){var e=_&&c?"on":"off";v.debug("Speaker status is ".concat(e)),(0,f.A4)(e)}),[c,_]),(0,r.d4)((function(){o&&s&&(v.debug("Call ready due to startCallOnPageVisible"),setTimeout((function(){return e((0,d.iP)())}),300))}),[o,s,e]),(0,r.d4)((function(){!g&&[h.Hf.ACTIVE_CALL,h.Hf.ANSWER_CALL].includes(n)&&(v.debug("Stopping call because isVideo is false and stage is ".concat(n)),e(m.callEnded()))}),[g,n,e])}})},8273:(e,t,n)=>{"use strict";n.d(t,{S:()=>k});var r=n(885),i=n(2982),o=n(5776),a=n(6403),s=n(8429),c=n(7856),u=n(2795),l=n(5592),d=n(1663),f=n(7109),h=n(9046),p=n(2611),v=n(5164),m=n(2355),g=n(6688),y=n(5713),b=n(6242);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=(0,u.U)("connect-kit"),S="_sb_last_connect_time_",E={apiConnect:(0,a.hg)("realtime/apiConnect",(function(e,t){var n=t.getState,r=t.dispatch;"disconnected"===n().realtime.serverStatus&&(r((0,v.tq)()),r((0,p.Ov)({connect:!1})),r(T.raiseConnectTrigger(f.r4.JS)))})),apiDisconnect:(0,a.hg)("realtime/apiDisconnect",(function(e,t){var n=t.getState,r=t.dispatch;"connected"===n().realtime.serverStatus&&(r(T.raiseConnectTrigger(null)),(0,g.lt)(),R())}))},C={introducedToServer:function(e,t){e.isIntroducedToServer=t.payload},raiseConnectTrigger:function(e,t){var n,r=t.payload;r&&!(null===(n=e.raisedConnectTriggers)||void 0===n?void 0:n.includes(r))&&(e.raisedConnectTriggers=[].concat((0,i.Z)(e.raisedConnectTriggers||[]),[r])),e.lastRaisedConnectTrigger=t.payload},connectTriggersChanged:function(e,t){e.connectTriggers=t.payload}},T=(0,m.M)({reducers:C}),k=(0,m.j)({thunks:E,thunkReducers:{},reducers:C,useKitHook:function(){var e=(0,s.I0)(),t=(0,l.Q)((function(e){return e})),n=t.app,i=n.hasReceivedOrg,a=n.org,u=n.options,m=n.stage,S=n.pageWidgetSettings,E=n.widgetExtent,C=t.realtime,k=C.serverStatus,R=C.isIntroducedToServer,x=C.clientKey,A=C.connectTriggers,M=C.raisedConnectTriggers,D=C.lastRaisedConnectTrigger,L=C.lastServerDisconnectTime,P=C.isVisitorAway,N=C.lastVisitorActiveTime,j=C.isSpying,F=C.peerStatus,B=C.serverErrorCode,W=S.connect,U=(0,o.eJ)(!1),V=(0,r.Z)(U,2),H=V[0],Z=V[1],q=(0,o.eJ)(0),z=(0,r.Z)(q,2),G=z[0],$=z[1],K=(0,o.sO)(!1),Y=(0,o.sO)(500),X=Date.now()-L,J=X<1e3,Q=(0,d.VL)(),ee=u.connect;(0,o.d4)((function(){if(i){var t=a.widgetSettings.connect;!1===ee&&(_.debug("Options connect is false, will remove IMMEDIATE from connect triggers if present and add JS"),(t=a.widgetSettings.connect.filter((function(e){return e!==f.r4.IMMEDIATE}))).push(f.r4.JS)),_.debug("Populating connect triggers ".concat(JSON.stringify(t))),e(T.connectTriggersChanged(t))}}),[ee,i,e]);var te=!u.hidden,ne=!!u.expanded;(0,o.d4)((function(){te&&(_.debug("Raise SHOW connect trigger for not hidden option"),e(T.raiseConnectTrigger(f.r4.SHOW)))}),[te,e]),(0,o.d4)((function(){ne&&!K.current&&(_.debug("Raise EXPAND connect trigger for expanded options"),e(T.raiseConnectTrigger(f.r4.EXPAND)),K.current=!0)}),[ne,e]),(0,o.d4)((function(){"collapsed"===E||K.current||(_.debug("Raise EXPAND connect trigger for should not be collapsed"),e(T.raiseConnectTrigger(f.r4.EXPAND)),K.current=!0)}),[E,e]);var re=!(0,h.D9)(A)&&A,ie=["connected","connecting","reconnecting"].includes(k);(0,o.d4)((function(){if(!(P||ie||B))if(Q)_.debug("Not connecting, this is a mobile device (".concat(b.BF,", ").concat(window.screen.width,"px wide) and mobile devices are disabled for this org"));else if(x&&A){if(I())return _.debug("Connecting instantly due to recent last connect time"),O(),void(0,g.zp)();var e=W?"page":"org",t=W||A,n=t.includes(f.r4.IMMEDIATE)?f.r4.IMMEDIATE:t.includes(D)?D:null;if(re&&!n){var r,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(M);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.includes(o)&&(_.debug("Early raised connect trigger match [".concat(o,"]")),n=o)}}catch(e){i.e(e)}finally{i.f()}}if(n)return _.debug("Connection trigger [".concat(n,"] from [").concat(e,"] setting, attempt connect")),O(),void(0,g.zp)()}}),[x,ie,B,A,W,M,re,P,D,Q]),(0,o.d4)((function(){if(B){_.info("Connect socket error [".concat(B,"]"));var t=void 0,n=void 0;switch(B){case c.jc.BLOCKED:(0,y.sA)(new y.ce("Visitor is blocked")),t=!1;break;case c.jc.PROTOCOL_VERSION_BEHIND:_.warn("Tried to connect to server but widget protocol behind"),(0,y.sA)(new y.BR("Widget version is out of date"));break;case c.jc.MAX_SESSIONS:_.warn("Tried to connect to server but org has exceeded its session quota"),(0,y.sA)(new y.ce("Max sessions")),t=!1;break;case c.jc.CONNECT_REJECTED:J?(_.debug("Automatically attempting a reconnect because we were connected ".concat(X,"ms ago (serverErrorCode=").concat(B,")")),e((0,v.tq)())):((0,y.sA)(new y.ce("Socket connect rejected")),n=!0);break;case c.jc.DISPLACED:case c.jc.CONNECTION_DATA_NOT_FOUND:case c.jc.STALE:_.debug("Will clear code [".concat(B,"] on visitor activity")),$(Date.now());break;default:_.debug("Will clear code [".concat(B,"] after delay")),Z(!0)}e((0,p.gB)({available:t,hidden:n}))}}),[B,e]),(0,o.d4)((function(){R&&(Y.current=500)}),[R]),(0,o.d4)((function(){"connected"!==k&&R&&e(T.introducedToServer(!1))}),[k,R,e]),(0,o.d4)((function(){P&&("connected"===k&&j?_.info("Ignoring AFK disconnect when associated"):"connected"!==F?m!==f.Hf.DIALING?"connected"===k&&(_.info("Disconnected socket due to AFK"),(0,g.lt)()):_.info("Ignoring AFK disconnect while dialing"):_.info("Ignoring AFK disconnect when peer connected"))}),[P,k,j,F,m,e]),(0,o.d4)((function(){B&&G&&(N<G||(_.info("Visitor is active, will clear disconnect code ".concat(B)),$(0),e((0,v.tq)())))}),[N,B,G,e]),(0,o.d4)((function(){if(H&&B){var t=Y.current;_.debug("Clearing code [".concat(B,"] after ").concat(t,"ms"));var n=!1,r=setTimeout((function(){n=!0,e((0,v.tq)()),_.debug("Cleared code [".concat(B,"] after ").concat(t,"ms")),Y.current=Math.round(1.2*(t+750+750*Math.random()))}),t);return function(){n||(_.debug("Canceled code clear timeout, useEffect dependency updated"),clearTimeout(r))}}}),[H,B,e])}}),O=function(){return localStorage.setItem(S,Date.now().toString())},I=function(){return Date.now()-parseInt(localStorage.getItem(S)||"0",10)<9e5},R=function(){return localStorage.removeItem(S)}},6688:(e,t,n)=>{"use strict";n.d(t,{A4:()=>r.A4,Ew:()=>r.Ew,Th:()=>r.Th,VU:()=>r.VU,_F:()=>r._F,bW:()=>r.bW,d2:()=>r.d2,dS:()=>r.dS,fD:()=>r.fD,hQ:()=>r.hQ,if:()=>r.if,jQ:()=>r.jQ,lt:()=>r.lt,nY:()=>r.nY,nw:()=>r.nw,qr:()=>r.qr,sn:()=>r.sn,tD:()=>r.tD,yQ:()=>r.yQ,zA:()=>r.zA,zp:()=>r.zp});var r=n(7765)},7102:(e,t,n)=>{"use strict";n.d(t,{r:()=>te});var r=n(5861),i=n(7757),o=n.n(i),a=n(5776),s=n(8429),c=n(6403),u=n(5164),l=n(2795),d=n(2355),f=n(5592),h=n(2611),p=n(3668),v=n(9046),m=n(1950),g=n(2982),y=n(3109),b=n(7220),w=n(7109),_=n(9943);function S(e){return e="^"+(e=e.split("*").join("(.*)"))+"$",new RegExp(e)}function E(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T,k=w.Oi.CLICK,O=w.Oi.VISIT,I=w.Oi.FORM,R=[],x="",A=[],M={};function D(){var e=(0,v.zb)().location.pathname;return x===e||(T=R.filter((function(t){var n=t.pageRegex.exec(e);return!!(null==n?void 0:n.length)})),x=e),T}function L(){var e;null===(e=(0,v.zb)().defaultView)||void 0===e||e.addEventListener("click",W),["click","keydown"].forEach((function(e){var t;null===(t=(0,v.zb)().defaultView)||void 0===t||t.addEventListener(e,U,{capture:!0})}))}function P(e,t){return{page:e,action:w.EL.ALERT,event:t,handler:function(){return function(e){window.ServiceBell.alert({title:e.title||void 0,body:e.message||void 0})}(t)}}}function N(e){return e.proactiveVideo?{page:e.page,action:w.EL.VIDEO,event:e.proactiveVideo,handler:function(){b.ZP.dispatch((0,h.bn)(e.proactiveVideo))}}:null}function j(e){return e.expand?{page:e.page,action:w.EL.EXPAND,event:e.expand,handler:function(){return b.ZP.dispatch((0,h.ld)())}}:null}function F(e){return e.popup?{page:e.page,action:w.EL.POPUP,event:e.popup,handler:function(){return b.ZP.dispatch((0,h.Ts)())}}:null}function B(e){return e.modal?{page:e.page,action:w.EL.MODAL,event:e.modal,handler:function(){return b.ZP.dispatch((0,h.Cg)())}}:null}function W(e){var t,n=function(t){if(t.event!==k)return!1;var n=(0,v.zb)().querySelectorAll(t.selector);return Array.from(n).includes(e.target)},r=null,i=null,o=null,a=null,s=null,c=E(D());try{for(c.s();!(t=c.n()).done;){var u=t.value;if(u.alerts){var l,d=E(u.alerts);try{for(d.s();!(l=d.n()).done;){var f=l.value;n(f)&&(r=P(u.page,f))}}catch(e){d.e(e)}finally{d.f()}}u.proactiveVideo&&n(u.proactiveVideo)&&(i=N(u)),u.expand&&n(u.expand)&&(o=j(u)),u.popup&&n(u.popup)&&(a=F(u)),u.modal&&n(u.modal)&&(s=B(u))}}catch(e){c.e(e)}finally{c.f()}for(var h=0,p=[r,i,o,a,s];h<p.length;h++){var m=p[h];m&&H(m)}}function U(e){var t=e.composedPath(),n=["form","input","select","textarea"];if(t.find((function(e){return n.includes(e.localName)}))){var r,i=null,o=null,a=null,s=null,c=E(D());try{for(c.s();!(r=c.n()).done;){var u=r.value;if(u.alerts){var l,d=E(u.alerts);try{for(d.s();!(l=d.n()).done;){var f=l.value;f.event===I&&(i=P(u.page,Object.assign(Object.assign({},f),{oncePerSession:!0})))}}catch(e){d.e(e)}finally{d.f()}}u.expand&&u.expand.event===I&&(o=j(u)),u.popup&&u.popup.event===I&&(a=F(u)),u.modal&&u.modal.event===I&&(s=B(u))}}catch(e){c.e(e)}finally{c.f()}for(var h=0,p=[i,o,a,s];h<p.length;h++){var v=p[h];v&&H(v)}}}function V(){var e,t={},n=null,r=null,i=null,o=null,a=null,s=null,c=E(D());try{for(c.s();!(e=c.n()).done;){var u=e.value;if(t=Object.assign(Object.assign({},t),u.widgetSettings),u.alerts){var l,d=E(u.alerts);try{for(d.s();!(l=d.n()).done;){var f=l.value;f.event===O&&(n=P(u.page,f))}}catch(e){d.e(e)}finally{d.f()}}u.screener&&(r=u.screener),u.proactiveVideo&&u.proactiveVideo.event===O&&(i=N(u)),u.expand&&u.expand.event===O&&(o=j(u)),u.popup&&u.popup.event===O&&(a=F(u)),u.modal&&u.modal.event===O&&(s=B(u))}}catch(e){c.e(e)}finally{c.f()}b.ZP.dispatch((0,h.me)(t));for(var p=0,v=[n,i,o,a,s];p<v.length;p++){var m=v[p];m&&H(m)}r?b.ZP.dispatch((0,h.QJ)(r)):b.ZP.dispatch((0,h.QJ)(null)),i||b.ZP.dispatch((0,h.bn)(null))}function H(e){var t=e.page,n=e.action,r=e.event,i=e.handler,o=function(e){var t=e.action,n=e.event;return"page-rule-event:".concat(e.page,":").concat(t,":").concat(n.event)}({page:t,action:n,event:r});if(r.oncePerSession&&(M[o]||sessionStorage.getItem(o)))return!1;var a={page:t,timeout:setTimeout((function(){i(),r.oncePerSession&&(M[o]=Date.now().toString(),sessionStorage.setItem(o,Date.now().toString())),A=A.filter((function(e){return a!==e}))}),r.delay||0)};return A=[].concat((0,g.Z)(A),[a]),!0}var Z=n(8891),q=n(1088),z=n(7887),G=n(7780),$=n(5713),K=(0,l.U)("ajax-mode"),Y="__SB_HTMX_SCRIPT__",X="servicebell";var J=n(7937),Q=(0,l.U)("init-kit"),ee={fetchInitialData:(0,c.hg)("realtime/fetchInitialData",function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,i,a,s,c,u,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,i=n.dispatch,a=(0,J.i)(),s=(0,J.J)(),Q.debug("Get widget init data"),e.prev=5,e.next=8,(0,p.GB)(r);case 8:return c=e.sent,i((0,h.Vo)(c.data)),u=c.data,l=u.commitHash,d=u.protocolVersion,l!==a&&Q.warn("Widget and server have different commit hash\nwidget: ".concat(a,"\nserver: ").concat(l)),s!==d&&Q.warn("Widget and server have different protocol versions\nwidget: ".concat(s,"\nserver: ").concat(d)),e.abrupt("return",c.data);case 16:throw e.prev=16,e.t0=e.catch(5),Q.warn("fetchInitialData rejected, widget will not init",e.t0),(0,$.sA)(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t,n){return e.apply(this,arguments)}}())},te=(0,d.j)({thunks:ee,thunkReducers:{fetchInitialData:{pending:function(e){e.initialDataStatus="loading"},fulfilled:function(e,t){var n=t.payload;e.initialDataStatus="loaded",e.serverCommitHash=n.commitHash,e.serverProtocolVersion=n.protocolVersion}}},reducers:{},useKitHook:function(){var e=(0,s.I0)(),t=(0,f.Q)((function(e){return e.realtime})),n=t.sbid,r=t.iframeLoadCount,i=(0,f.Q)((function(e){return e.app})),o=i.org,c=i.hasReceivedOrg,l=i.rootElementId,d=i.isIframeFailed,p=i.isStreamEvents,g=(0,f.Q)(z.aE),b=o.widgetSettings,w=b.color,E=b.bgColor;(0,a.d4)((function(){c&&!n&&(Q.debug("Have org id, will get or create sbid"),e((0,u.mr)((0,v.$Q)(o.id))))}),[n,c,e]),(0,a.d4)((function(){c&&(0,m.T)(o.id)}),[c]),(0,a.d4)((function(){var e,t;c&&(Q.debug("Starting to manage page rules"),e=o.pageRules,t=o.screeners,R=function(e,t){var n=(0,v.zb)().location.origin;return e.map((function(e){var t=e.page;if(e.page.startsWith("http"))try{var r=new URL(e.page);if(r.origin!==n)return!1;t="".concat(r.pathname).concat(r.search).concat(r.hash)}catch(t){return _.Z.debug("Filtering out invalid URL ".concat(e.page)),!1}try{return Object.assign(Object.assign({},e),{pageRegex:S(t)})}catch(e){return _.Z.debug("Filtering out invalid path '".concat(t,"'")),!1}})).filter((function(e){return!!e})).map((function(e){return e.screenerId&&t[e.screenerId]?Object.assign(Object.assign({},e),{screener:t[e.screenerId]}):e}))}(e,t),L(),window.addEventListener("sblocationchanged",(function(){!function(){var e=D();A=A.filter((function(t){return!!e.find((function(e){return e.page===t.page}))||(clearTimeout(t.timeout),!1)}))}(),V()})),V(),window.top&&window.top.addEventListener(y.tP,L))}),[c]),(0,a.d4)((function(){(w||E)&&l&&(Q.debug("Setting theme color(s) [".concat(w,"]")),(0,Z.A2)(w,E,l))}),[w,E,l]),(0,a.d4)((function(){(0,v.yL)()||(Q.debug("Begin watch location"),(0,q.V)(!1))}),[]),(0,a.d4)((function(){r&&(Q.debug("Begin iframe watch location"),(0,q.V)(!0))}),[r]),(0,a.d4)((function(){d&&(Q.debug("Iframe failed, fallback to watch location on root document"),(0,q.V)(!1))}),[d]),(0,a.d4)((function(){"iframe-jit"===g&&p&&0===r&&l&&(Q.debug("Create iframe for iframe-jit mode"),(0,y.Vz)(l))}),[g,p,r,l]),(0,a.d4)((function(){"iframe-immediate"===g&&0===r&&l&&(Q.debug("Create iframe for iframe-immediate mode"),(0,y.Vz)(l))}),[g,r,l]),(0,a.d4)((function(){"ajax"===g&&p&&l&&(Q.debug("Initializing ajax mode"),function(e){if(document.getElementById(e))if(document.getElementById(Y))K.debug("htmx already initialized, doing nothing");else{var t=document.createElement("script");t.id=Y,t.src="https://cdn.servicebell.com/htmx-1.6.1-custom.min.js",t.onload=function(){return function(e){K.debug("Defining '".concat(X,"' htmx extension"));var t=window.htmx;if(!t)return K.warn("Failed to find global htmx library for extension definition, disabling hx-boost"),void document.body.removeAttribute("hx-boost");var n=function(t,n){if("BODY"===t.nodeName&&"BODY"===n.nodeName){var r=document.getElementById(e);r||K.warn("Failed to find #".concat(e," in document during htmx swap"));for(var i=t.firstChild;n.childNodes.length>0;)n.firstChild&&t.insertBefore(n.firstChild,i);if(r&&t.insertBefore(r,i),i){for(;i.nextSibling;)t.removeChild(i.nextSibling);t.removeChild(i)}return[t]}};t.defineExtension(X,{handleSwap:function(e,t,r){return n(t,r)},handleHistorySwap:function(e,t){return n(e,t)}})}(e)},document.head.appendChild(t),document.body.setAttribute("hx-boost","true"),document.body.setAttribute("hx-ext",X)}else K.warn("Failed to find root element #".concat(e,", not initializing htmx"))}(l))}),[g,p,l]),(0,a.d4)((function(){if(c)return e((0,h.zV)()),G.l.listenToDeviceChange((function(){Q.debug("Media device changed, will populate devices"),e((0,h.zV)())}))}),[c,e])}})},2355:(e,t,n)=>{"use strict";n.d(t,{M:()=>o,j:()=>a});var r=n(6403),i=n(5164),o=function(e){var t=e.reducers;return(0,r.oM)({name:"realtime",initialState:i.E3,reducers:t}).actions};function a(e){return e}},694:(e,t,n)=>{"use strict";n.d(t,{u:()=>R});var r=n(8743),i=n(8273),o=n(2355),a=(0,o.j)({thunks:{},thunkReducers:{},reducers:{incomingDisplayStreamChanged:function(e,t){e.incomingDisplayStreamId=t.payload.streamId||null}},useKitHook:function(){}}),s=n(5776),c=n(8429),u=n(5592),l=n(2611),d=(0,o.j)({thunks:{},thunkReducers:{},reducers:{},useKitHook:function(){var e=(0,c.I0)(),t=(0,u.Q)((function(e){return e.realtime})),n=t.isDisplayshare,r=t.outgoingDisplayStreamId;(0,s.d4)((function(){n&&!r&&e((0,l.Px)(!0)),n||e((0,l.Px)(!1))}),[n,r,e]),(0,s.d4)((function(){!n&&r&&e((0,l.MJ)())}),[n,r,e])}}),f=n(7102),h=(0,o.j)({thunks:{},thunkReducers:{},reducers:{peerStatusUpdated:function(e,t){e.peerStatus=t.payload,"disconnected"===t.payload&&(e.incomingCameraStreamId=null,e.incomingDisplayStreamId=null,e.isReceivingAudio=!1,e.isReceivingVideo=!1)}},useKitHook:function(){}}),p=n(6403),v=n(5164),m=n(2795),g=n(7887),y=n(8477),b=n(9046),w=n(1088),_=n(6688),S=(0,m.U)("record-kit"),E={readyToRecord:(0,p.hg)("realtime/readyToRecord",(function(e,t){var n=t.getState,r=n().app,i=r.rootElementId,o=r.isIframeFailed,a=n().realtime,s=a.isRrwebRecording,c=a.iframeLoadCount,u=a.helpedBySid,l="loaded"===n().realtime.initialDataStatus,d=(0,g.aE)(n());o&&(S.info("Will try to record in retrigger mode since iframe failed"),d="retrigger");var f=!!(null==d?void 0:d.includes("iframe"));if(l&&e&&i&&!s){S.debug("Ready to record, will start recording");try{(0,y.Sy)(n(),(function(e){return(0,_.if)(e)}),f?function(e){return(0,_.tD)(e)}:void 0)}catch(e){throw S.error("Error trying to start recording",e),e}f||(0,w.a)(!1)}else{if(e||!s){var h="Cannot ".concat(e?"record":"stop recording");throw S.warn(h),Error(h)}var p=!!u&&f&&c>1;S.debug("Ready to stop recording, will stop recording".concat(p?" (skip widget)":"")),(0,y.kJ)(p)}return e})),restartIframedRecording:(0,p.hg)("realtime/restartIframedRecording",(function(e,t){var n=t.getState,r=n().app.rootElementId,i=n().realtime.isRrwebRecording,o=(0,g.aE)(n()),a=!!(null==o?void 0:o.includes("iframe"));r&&i&&a?(S.debug("Restarting iframe recording"),(0,y.kJ)(!0),(0,y.Sy)(n(),(function(e){return(0,_.if)(e)}),(function(e){return(0,_.tD)(e)}))):S.warn("Tried to restart recording but state does not jive",{rootElementId:r,isRrwebRecording:i,isIframeMode:a})}))},C={rrwebInjectedIntoIframe:function(e,t){e.isRrwebInjectedIntoIframe=t.payload}},T=(0,o.M)({reducers:C}),k=(0,o.j)({thunks:E,thunkReducers:{readyToRecord:{fulfilled:function(e,t){e.isRrwebRecording=t.payload}}},reducers:C,useKitHook:function(){var e=(0,c.I0)(),t=(0,u.Q)((function(e){return e.app})),n=t.isStreamEvents,r=t.isIframeFailed,i=(0,u.Q)((function(e){return e.realtime})),o=i.initialDataStatus,a=i.isRrwebRecording,d=i.isRrwebInjectedIntoIframe,f=i.iframeLoadCount,h=i.helpedBySid,p=i.isSpying,v=i.peerStatus,m=i.serverStatus,y=i.isIntroducedToServer,w="loaded"===o,_=(0,u.Q)(g.aE),C=!(null==_?void 0:_.includes("iframe"))||d,T=(0,b.D9)(h),k="connected"===v||"connected"===m&&y;(0,s.d4)((function(){if(k&&h&&p&&!n)S.debug("Set isStreamEvents true"),e((0,l.HK)(!0));else if((!k||!h||!p)&&n){var t=k?h?"not in share mode":"no associated agent socket":"not connected to agent";S.debug("Stop streaming rrweb events [".concat(t,"]")),e((0,l.HK)(!1))}}),[k,h,p,n,e]),(0,s.d4)((function(){T&&h&&T!==h&&(S.debug('Sbid data "helpedBySid" has changed, restart event stream'),e((0,l.HK)(!1)))}),[T,h,e]),(0,s.d4)((function(){w&&!a&&n&&C&&(S.debug("Will start recording"),e(E.readyToRecord(!0)))}),[w,a,n,C,e]),(0,s.d4)((function(){a&&!n&&(S.debug("Will stop recording"),e(E.readyToRecord(!1)))}),[a,n,e]),(0,s.d4)((function(){n&&C&&f>1&&(S.debug("Restarting recording for iframe load"),e(E.restartIframedRecording()))}),[n,C,f,e]),(0,s.d4)((function(){w&&!a&&n&&r&&(S.debug("Fallback to record events on top frame b/c iframe failed"),e(E.readyToRecord(!0)))}),[w,a,n,r,e])},setupWindowListeners:function(e){window.addEventListener("sbiframerrwebinjected",(function(){e.dispatch(T.rrwebInjectedIntoIframe(!0))})),window.addEventListener("sbiframeloaded",(function(){(0,y.YW)()||e.dispatch(T.rrwebInjectedIntoIframe(!1)),e.dispatch((0,v.SI)())}))}}),O=(0,m.U)("takeover-kit"),I=(0,o.j)({thunks:{},thunkReducers:{},reducers:{},useKitHook:function(){var e=(0,c.I0)(),t=(0,u.Q)((function(e){return e.realtime})),n=t.isTakeover,r=t.peerStatus,i=(0,u.Q)((function(e){return e.app})),o=i.org,a=i.hasOptedIntoTakeover,d=i.screenTakeoverOn,f=i.showTakeoverOptin,h="ask"===o.widgetSettings.takeover,p=!h||a,v="connected"===r;(0,s.d4)((function(){v&&n&&h&&!a&&(O.debug("Visitor isTakeover, but permission required, show modal"),e((0,l.ah)(!0)))}),[v,n,h,a,e]),(0,s.d4)((function(){!n&&f&&(O.debug("Visitor not isTakeover, but modal shown, hide modal"),e((0,l.ah)(!1)))}),[n,f,e]),(0,s.d4)((function(){v&&n&&p&&!d&&(O.debug("Visitor isTakeover, turn on takeover"),e((0,l.zS)(!0)))}),[v,n,p,d,e]),(0,s.d4)((function(){!d||v&&n||(O.debug("Ceasing takeover because ".concat(n?"peer is not connected":"isTakeover is false")),e((0,l.zS)(!1)))}),[d,v,n,e])}}),R=[r.H,i.S,f.r,h,k,I,d,a]},7765:(e,t,n)=>{"use strict";n.d(t,{nw:()=>On,bW:()=>Gn,zp:()=>Wn,yQ:()=>zn,Th:()=>$n,lt:()=>Un,NM:()=>dr,S9:()=>fr,iD:()=>ur,Ho:()=>sr,DZ:()=>cr,_F:()=>yr,qr:()=>br,nY:()=>gr,hQ:()=>Yn,Ew:()=>Kn,O1:()=>Zn,zA:()=>qn,S:()=>Vn,dS:()=>Xn,if:()=>ir,tD:()=>or,fD:()=>Jn,d2:()=>ar,nJ:()=>Hn,A4:()=>lr,VU:()=>hr,M:()=>vr,jQ:()=>pr,sn:()=>mr,ux:()=>Qn,tt:()=>er});var r,i=n(4942),o=n(5861),a=n(885),s=n(7757),c=n.n(s),u=n(5776),l=n(8429),d=function(e,t){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},d(e,t)};function f(){}function h(){h.init.call(this)}function p(e){return void 0===e._maxListeners?h.defaultMaxListeners:e._maxListeners}function v(e,t,n){if(t)e.call(n);else for(var r=e.length,i=E(e,r),o=0;o<r;++o)i[o].call(n)}function m(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=E(e,i),a=0;a<i;++a)o[a].call(n,r)}function g(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=E(e,o),s=0;s<o;++s)a[s].call(n,r,i)}function y(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=E(e,a),c=0;c<a;++c)s[c].call(n,r,i,o)}function b(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=E(e,i),a=0;a<i;++a)o[a].apply(n,r)}function w(e,t,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=new f,e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=p(e))&&i>0&&a.length>i){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=o[t]=n,++e._eventsCount;return e}function _(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function S(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function E(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function C(e,t){if(!e.length)return[];var n=new RegExp(".{1,"+t+"}","g"),r=e.match(n),i="10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){var t=parseInt(e,10);return(t^16*Math.random()>>t/4).toString(16)}));return r.map((function(e,t){return{id:i,chunks:r.length,chunk:t+1,data:e}}))}f.prototype=Object.create(null),h.EventEmitter=h,h.usingDomains=!1,h.prototype.domain=void 0,h.prototype._events=void 0,h.prototype._maxListeners=void 0,h.defaultMaxListeners=10,h.init=function(){this.domain=null,h.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new f,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},h.prototype.getMaxListeners=function(){return p(this)},h.prototype.emit=function(e){var t,n,r,i,o,a,s,c="error"===e;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(t=arguments[1],!s){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:v(n,l,this);break;case 2:m(n,l,this,arguments[1]);break;case 3:g(n,l,this,arguments[1],arguments[2]);break;case 4:y(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];b(n,l,this,i)}return!0},h.prototype.addListener=function(e,t){return w(this,e,t,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(e,t){return w(this,e,t,!0)},h.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,_(this,e,t)),this},h.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_(this,e,t)),this},h.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new f:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-->0;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new f,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i);r.removeListener&&this.emit("removeListener",e,a||t)}return this},h.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new f,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new f:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new f,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},h.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},h.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):S.call(e,t)},h.prototype.listenerCount=S,h.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}((function(){var e=r.call(this)||this;return e.chunkMap={},e.feedChunk=function(t){if(e.chunkMap[t.id]||(e.chunkMap[t.id]=Array(t.chunks).fill(null)),e.chunkMap[t.id][t.chunk-1]=t.data,-1===e.chunkMap[t.id].findIndex((function(e){return null===e}))){var n=e.chunkMap[t.id].join("");e.emit("data",n),delete e.chunkMap[t.id]}},e.addListener("chunk",(function(t){!function(e){return!!e&&"object"==typeof e&&"string"==typeof e.id&&"number"==typeof e.chunks&&"number"==typeof e.chunk&&"string"==typeof e.data}(t)?console.warn("Chunkosaurus received non-chunk data "+t):e.feedChunk(t)})),e}),r=h);var T=n(4173),k=n(7937),O=n(7220),I=n(2795),R=n(9046),x=n(5671),A=n(3144),M=n(7326),D=n(136),L=n(2963),P=n(1120);function N(e,t,n){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,P.Z)(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},N(e,t,n||e)}var j=n(7856);var F,B,W=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};!function(e){e.introduction="introduction",e.visitorUpdate="update",e.alert="alert",e.identity="identity",e.dialAgentMissed="missed_call",e.acceptedTakeover="accepted_takeover",e.acceptedCall="accepted_call",e.rejectedCall="rejected_call",e.chatMessage="chat_message",e.peerSignal="peer_setup",e.rrwebEvent="rrweb_event",e.subscribe="subscribe",e.unsubscribe="unsubscribe"}(B||(B={}));var U,V=Object.assign(Object.assign({},B),j.as);!function(e){e.init="init",e.peerSignal="peer_setup",e.update="update",e.availability="availability",e.chatMessage="chat_message",e.chatTyping="chat_typing",e.forceDial="force_dial",e.rrwebEventAcks="rrweb_event_acks",e.pubsubMessage="pubsub_message"}(U||(U={}));var H=Object.assign(Object.assign({},U),j.dW),Z=H,q=function(e){(0,D.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,P.Z)(t);if(n){var i=(0,P.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,L.Z)(this,e)});function i(e){var t,n;return(0,x.Z)(this,i),n=r.call(this,e),F.set((0,M.Z)(n),""),N((t=(0,M.Z)(n),(0,P.Z)(i.prototype)),"addChattyAction",t).call(t,Z.rrwebEventAcks),n}return(0,A.Z)(i,[{key:"setClientKey",value:function(e){!function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?i.call(e,n):i?i.value=n:t.set(e,n)}(this,F,e,"f")}},{key:"makeConnectQuery",value:function(){if(!W(this,F,"f"))throw new Error("Must set client key before connecting");return Object.assign({role:"visitor",clientKey:W(this,F,"f")},N((0,P.Z)(i.prototype),"makeConnectQuery",this).call(this))}}]),i}(j.UJ);F=new WeakMap;var z,G,$,K,Y,X,J,Q,ee,te,ne,re=n(2982),ie=n(7187),oe=n.n(ie),ae=n(8853),se=n.n(ae),ce=n(7109),ue=n(6242),le=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},de=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e.camera="camera",e.display="display"}(ne||(ne={})),G=new WeakMap,$=new WeakMap,K=new WeakMap,z=new WeakSet,Y=function(e,t){var n;const r=null===(n=de(this,$,"f")[e])||void 0===n?void 0:n.getTracks().filter((e=>e.kind===t));return(null==r?void 0:r.length)?r[0]:null},X=function(e,t){de(this,z,"m",J).call(this,e,!0),de(this,$,"f")[e]=t,de(this,z,"m",te).call(this,e,t),de(this,z,"m",ee).call(this,e)},J=function(e,t=!1){const n=de(this,$,"f")[e];return!!n&&(n.getTracks().forEach((e=>e.stop())),de(this,$,"f")[e]=null,t||de(this,z,"m",ee).call(this,e),!0)},Q=function(e,t){const n=de(this,$,"f")[e];if(!n)return!1;const r=n.getTracks().filter((e=>e.kind===t));return!!r.length&&(r.forEach((e=>e.stop())),!0)},ee=function(e){const t=de(this,$,"f")[e];de(this,K,"f").forEach((n=>n({streamType:e,stream:t})))},te=function(e,t){const n=n=>{n.addEventListener("ended",(()=>{t.getTracks().length||de(this,z,"m",J).call(this,e)}))};t.getTracks().forEach(n),t.addEventListener("addtrack",(e=>n(e.track)))};var he,pe,ve,me,ge,ye,be,we,_e,Se,Ee,Ce,Te,ke,Oe,Ie,Re,xe,Ae,Me,De,Le,Pe,Ne,je,Fe,Be,We,Ue,Ve,He,Ze,qe,ze,Ge,$e,Ke,Ye=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Xe=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Je=(0,I.U)("sb-peer");!function(e){e.connect="connect",e.signal="signal",e.data="data",e.close="close",e.error="error",e.stream="stream"}($e||($e={})),function(e){e.CLOSED="CLOSED",e.ERROR="ERROR"}(Ke||(Ke={}));var Qe=function(){function e(t){var n,r,o,a,s=this;(0,x.Z)(this,e),he.add(this),pe.set(this,new(oe().EventEmitter)),ve.set(this,!0),me.set(this,""),ge.set(this,{}),ye.set(this,[]),be.set(this,0),we.set(this,1),_e.set(this,0),Se.set(this,"disconnected"),Ee.set(this,null),Ce.set(this,0),Te.set(this,void 0),ke.set(this,(n={},(0,i.Z)(n,ne.camera,null),(0,i.Z)(n,ne.display,null),n)),Oe.set(this,(r={},(0,i.Z)(r,ne.camera,null),(0,i.Z)(r,ne.display,null),r)),Ie.set(this,(o={},(0,i.Z)(o,ne.camera,null),(0,i.Z)(o,ne.display,null),o)),Re.set(this,[]),xe.set(this,"on"),We.set(this,(a={},(0,i.Z)(a,ne.camera,(function(){return Xe(s,he,"m",Be).call(s,ne.camera)})),(0,i.Z)(a,ne.display,(function(){return Xe(s,he,"m",Be).call(s,ne.display)})),a)),Ye(this,Te,t,"f"),t.onStreamChange((function(e){var t=e.streamType,n=e.stream;return Xe(s,he,"m",ze).call(s,t,n)}))}return(0,A.Z)(e,[{key:"prepare",value:function(e){Xe(this,Ee,"f")&&(Xe(this,Ee,"f").removeAllListeners(),this.clear()),Ye(this,Ee,new(se())({wrtc:(0,R.AU)()}),"f"),Xe(this,Ee,"f")._debug=function(e,t){Je.debug("[simple-peer] ".concat(e),t)},Xe(this,he,"m",Me).call(this,Xe(this,Ee,"f"),e)}},{key:"signal",value:function(e){var t;if(!(e.candidate&&Xe(this,Ee,"f")&&Xe(this,Ee,"f")._pc&&Xe(this,Ee,"f")._pc.remoteDescription&&(Je.debug("Candidate signaled with sdpMid",{sdpMid:e.candidate.sdpMid}),-1===Xe(this,Ee,"f")._pc.remoteDescription.sdp.indexOf("a=mid:".concat(e.candidate.sdpMid)))))return ue.Fo&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),e.nonce&&(Xe(this,be,"f")>e.nonce?Je.warn("Latest signal nonce ".concat(e.nonce," is less than last incoming signal nonce ").concat(Xe(this,be,"f"))):e.nonce!==Xe(this,be,"f")+1&&Je.warn("Latest signal nonce is ".concat(e.nonce,", expected ").concat(Xe(this,be,"f")+1)),Ye(this,be,e.nonce,"f")),e.wrtcId&&e.wrtcId!==Xe(this,he,"m",De).call(this)?(Je.warn("Ignoring signal with unexpected wrtcId [".concat(e.wrtcId,"], expected [").concat(Xe(this,he,"m",De).call(this),"]")),void Xe(this,he,"m",Pe).call(this,e)):(null===(t=Xe(this,Ee,"f"))||void 0===t||t.signal(e),void Xe(this,he,"m",je).call(this));Je.debug("Ignored signal candidate as its sdpMid was missing on descriptor")}},{key:"clear",value:function(){var e,t,n,r;clearInterval(Xe(this,_e,"f")),null===(r=Xe(this,Ee,"f"))||void 0===r||r.destroy(),Ye(this,Re,[],"f"),Ye(this,Ee,null,"f"),Ye(this,ke,(e={},(0,i.Z)(e,ne.camera,null),(0,i.Z)(e,ne.display,null),e),"f"),Ye(this,Oe,(t={},(0,i.Z)(t,ne.camera,null),(0,i.Z)(t,ne.display,null),t),"f"),Ye(this,Ie,(n={},(0,i.Z)(n,ne.camera,null),(0,i.Z)(n,ne.display,null),n),"f"),Ye(this,Re,[],"f"),Ye(this,ve,!0,"f"),Ye(this,be,0,"f"),Ye(this,we,1,"f")}},{key:"sendWidgetState",value:function(e){Ye(this,xe,e.speakerStatus,"f"),Xe(this,he,"m",Ve).call(this)}},{key:"sendChunk",value:function(e){Xe(this,Ee,"f")?Xe(this,Ee,"f").send(JSON.stringify(e)):Je.warn("Tried to send chunk over peer without peer")}},{key:"getIncomingCameraStream",value:function(){return Xe(this,Oe,"f")[ne.camera]}},{key:"getIncomingDisplayStream",value:function(){return Xe(this,Oe,"f")[ne.display]}},{key:"onSignal",value:function(e){Xe(this,pe,"f").on("signal",e)}},{key:"onConnect",value:function(e){Xe(this,pe,"f").on("connect",e)}},{key:"onStatus",value:function(e){Xe(this,pe,"f").on("status",e)}},{key:"onData",value:function(e){Xe(this,pe,"f").on("data",e)}},{key:"onDisconnect",value:function(e){Xe(this,pe,"f").on("disconnect",e)}},{key:"onStreamInChange",value:function(e){Xe(this,pe,"f").on("streamin",e)}}]),e}();pe=new WeakMap,ve=new WeakMap,me=new WeakMap,ge=new WeakMap,ye=new WeakMap,be=new WeakMap,we=new WeakMap,_e=new WeakMap,Se=new WeakMap,Ee=new WeakMap,Ce=new WeakMap,Te=new WeakMap,ke=new WeakMap,Oe=new WeakMap,Ie=new WeakMap,Re=new WeakMap,xe=new WeakMap,We=new WeakMap,he=new WeakSet,Ae=function(e){e!==Xe(this,Se,"f")&&Xe(this,pe,"f").emit("status",e),Ye(this,Se,e,"f")},Me=function(e,t){var n=this;Ye(this,Ce,Date.now(),"f"),Xe(this,he,"m",Ae).call(this,"connecting"),t&&(Xe(this,he,"m",Le).call(this,t),Xe(this,he,"m",Ne).call(this)),e.on($e.signal,(function(e){var t,r=e;r.nonce=Xe(n,we,"f"),r.wrtcId=Xe(n,he,"m",De).call(n),Xe(n,pe,"f").emit("signal",r,Xe(n,ve,"f")),Ye(n,ve,!1,"f"),Ye(n,we,(t=Xe(n,we,"f"),++t),"f")})),e.on($e.connect,(function(){var e=Date.now()-Xe(n,Ce,"f");Xe(n,pe,"f").emit("connect",{connectTime:e}),Xe(n,he,"m",Ae).call(n,"connected"),Xe(n,he,"m",Ge).call(n)})),e.on($e.data,(function(e){var t=JSON.parse(e);"streamHint"===t.type?Xe(n,he,"m",He).call(n,t):Xe(n,pe,"f").emit("data",t)})),e.on($e.stream,(function(e){Je.debug("New incoming stream ".concat(e.id)),Xe(n,Re,"f").push(e),Xe(n,he,"m",Ze).call(n)})),e.on($e.close,(function(){Je.debug("Peer disconnected ".concat(Ke.CLOSED)),Xe(n,pe,"f").emit("disconnect",Ke.CLOSED),Xe(n,he,"m",Ae).call(n,"disconnected"),n.clear()})),e.on($e.error,(function(e){Je.warn("Peer error encountered, ".concat(e)),Xe(n,pe,"f").emit("disconnect",Ke.ERROR),Xe(n,he,"m",Ae).call(n,"disconnected"),n.clear()}))},De=function(){return Xe(this,me,"f")},Le=function(e){Je.debug("New wrtcId [".concat(e,"], was [").concat(Xe(this,me,"f"),"]")),Ye(this,me,e,"f")},Pe=function(e){e.wrtcId&&(Xe(this,ge,"f")[e.wrtcId]?Xe(this,ge,"f")[e.wrtcId].push(e):Xe(this,ge,"f")[e.wrtcId]=[e])},Ne=function(){for(var e=0,t=Object.entries(Xe(this,ge,"f"));e<t.length;e++){var n=(0,a.Z)(t[e],2),r=n[0],i=n[1];r===Xe(this,he,"m",De).call(this)&&(Je.debug("[".concat(r,"] Holding ").concat(i.length," early signal(s)")),Ye(this,ye,[].concat((0,re.Z)(Xe(this,ye,"f")),(0,re.Z)(i)),"f"))}Ye(this,ge,{},"f")},je=function(){var e=Xe(this,ye,"f");Ye(this,ye,[],"f"),e.length&&(Je.debug("[".concat(Xe(this,me,"f"),"] Draining ").concat(e.length," early signal(s)")),e.forEach(this.signal.bind(this)))},Fe=function(e){if(Xe(this,Ee,"f")&&Xe(this,he,"m",Ue).call(this)&&!Xe(this,Ee,"f").destroyed)try{var t=JSON.stringify(e);if("streamHint"===e.type)Xe(this,Ee,"f").send(t);else{var n=C(t,15900);n.forEach(this.sendChunk.bind(this));var r,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.sendChunk(o)}}catch(e){i.e(e)}finally{i.f()}}}catch(t){Je.error("Error sending data to peer",e,t)}},Be=function(e){var t,n=Xe(this,Oe,"f")[e]||null,r={type:e,stream:n,isReceivingAudio:!!(null==n?void 0:n.getAudioTracks().length),isReceivingVideo:!!(null==n?void 0:n.getVideoTracks().length)};Je.log("Incoming stream change, video: ".concat(r.isReceivingVideo,", audio: ").concat(r.isReceivingAudio,", id: ").concat((null===(t=r.stream)||void 0===t?void 0:t.id)||"n/a")),Xe(this,pe,"f").emit("streamin",r)},Ue=function(){var e,t=(null===(e=Xe(this,Ee,"f"))||void 0===e?void 0:e._channel)||null;return t&&"open"===t.readyState},Ve=function(){var e=Xe(this,Te,"f").getCameraAudioTrack(),t=Xe(this,Te,"f").getCameraVideoTrack();Xe(this,he,"m",Fe).call(this,{type:ce.L0.widgetState,widgetState:{micStatus:e&&e.enabled?"on":"off",camStatus:t&&t.enabled?"on":"off",speakerStatus:Xe(this,xe,"f")}})},He=function(e){Je.debug("got peer internal message ".concat(e.type),e),"streamHint"===e.type?(Je.debug("Got stream hint, ".concat(e.hint.streamType," is ").concat(e.hint.streamId)),Xe(this,Ie,"f")[e.hint.streamType]=e.hint.streamId,Xe(this,he,"m",Ze).call(this)):Je.warn("Got unknown sb peer data of type ".concat(e.type))},Ze=function(){for(var e=this,t=function(){var t=r[n],i=Xe(e,Ie,"f")[t],o=Xe(e,Oe,"f")[t],a=Xe(e,Re,"f").find((function(e){return e.id===i}))||null;if(o!==a){Xe(e,Oe,"f")[t]=a;var s=Xe(e,We,"f")[t];null==o||o.removeEventListener("addtrack",s),null==o||o.removeEventListener("removetrack",s),null==a||a.addEventListener("addtrack",s),null==a||a.addEventListener("removetrack",s),s()}},n=0,r=Object.keys(ne);n<r.length;n++)t()},qe=function(e,t){var n;t&&(null===(n=Xe(this,Ee,"f"))||void 0===n||n.addStream(t),Xe(this,he,"m",Fe).call(this,{type:"streamHint",hint:{streamType:e,streamId:t.id}})),Xe(this,ke,"f")[e]=t,Xe(this,he,"m",Ve).call(this)},ze=function(e,t){var n;if(Xe(this,Ee,"f")){var r=Xe(this,ke,"f")[e];if(r)try{null===(n=Xe(this,Ee,"f"))||void 0===n||n.removeStream(r)}catch(e){}Xe(this,he,"m",qe).call(this,e,t)}},Ge=function(){var e=Xe(this,Te,"f").getCameraStream();e&&(Je.info("Reconnecting camera stream to reconnected peer"),Xe(this,he,"m",qe).call(this,ne.camera,e));var t=Xe(this,Te,"f").getDisplayStream();t&&(Je.info("Reconnecting display stream to reconnected peer"),Xe(this,he,"m",qe).call(this,ne.display,t))};var et=n(5592),tt=n(5164),nt=n(8477),rt=n(2611),it=n(9943),ot=["mouseup","mousedown","click","input","change","focusin","focus","blur","focusin","focusout"],at=-2,st=-2,ct=0,ut=null,lt=-1,dt=-1,ft=function(e){if(O.ZP.getState().app.screenTakeoverOn)if("mousemove"!==e.type){var t=(0,R.zb)();if("scroll"!==e.type)if("input"!==e.type)if(ot.includes(e.type)){var n=e.selector,r=e.type,i=e.bubbles,o=e.cancelable,a=e.detail,s=e.screenX,c=e.screenY,u=e.clientX,l=e.clientY;it.Z.debug("Takeover event received [".concat(r,"] [").concat(n,"]").concat("number"==typeof a?" detail="+String(a):""));var d=t.querySelector(n);if(d){lt=u||-1,dt=l||-1;var f=d,h=new(ht(r))(r,{bubbles:i,cancelable:o,detail:a,screenY:c,screenX:s,clientX:u,clientY:l});f.dispatchEvent(h)}else it.Z.warn("Could not find takeover event target [".concat(r,"] [").concat(n,"]"))}else it.Z.warn("Takeover event unhandled [".concat(e.type,"]"));else{var p=e.selector,v=e.value,m=e.bubbles,g=e.cancelable,y=e.checked;if("boolean"==typeof y)return void it.Z.debug("Input checkbox event ignored [".concat(p,"] [").concat(y?"checked":"unchecked","]"));if("string"==typeof v){it.Z.debug("Input event received ".concat(p,": ").concat(v));var b=t.querySelector(p);if(b){ut=v;var w=new Event("input",{bubbles:m,cancelable:g});vt(b,v,w)}else it.Z.warn("Could not find input element ".concat(p," to place text ").concat(v))}}else{var _=e.selector,S=e.scrollTop,E=e.scrollLeft,C="document"===_?t.scrollingElement:t.querySelector(_);if(C&&"number"==typeof S&&"number"==typeof E){var T=C.scrollWidth-C.clientWidth,k=C.scrollHeight-C.clientHeight,I=E>T?T:E,x=S>k?k:S;st=I,at=x,ct=Date.now(),C.scrollLeft=I,C.scrollTop=x}else it.Z.warn('Could not find scroll-element "'.concat(_,'"'))}}else{var A=e.clientX,M=e.clientY;"number"==typeof A&&"number"==typeof M&&O.ZP.dispatch((0,rt.Gs)({top:M,left:A}))}},ht=function(e){return["mousedown","mouseup","click"].includes(e)?MouseEvent:["focus","blur","focusin","focusout"].includes(e)?FocusEvent:["change"].includes(e)?Event:"input"===e?InputEvent:UIEvent},pt=function(e){var t=function(e,t){return Math.abs(e-t)<=1};if(e.type===T.tw.IncrementalSnapshot){if(e.data.source===T.yh.Scroll){var n=t(e.data.y,at),r=t(e.data.x,st),i=Date.now()-ct<300;if(n&&r)return st=-2,at=-2,!0;if(i)return!0}if(e.data.source===T.yh.Input&&e.data.text===ut)return ut=null,!0;if(e.data.source===T.yh.MouseInteraction&&lt===e.data.x&&dt===e.data.y)return lt=-1,dt=-1,!0}return!1},vt=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,i=e.ownerDocument.defaultView,o=[null==i?void 0:i.HTMLInputElement,null==i?void 0:i.HTMLSelectElement,null==i?void 0:i.HTMLTextAreaElement],a=Object.getPrototypeOf(e);if(o.indexOf(a.constructor)>-1&&Object){var s=null===(t=Object.getOwnPropertyDescriptor(a,"value"))||void 0===t?void 0:t.set;s&&s.call(e,n),e.dispatchEvent(r)}},mt="http://www.w3.org/2000/svg",gt=0,yt=null,bt=null,wt=null,_t=!1,St=0,Et=function(){if(yt=null,wt){_t=!0,setTimeout((function(){return _t=!1}),100);var e=wt;wt=null,e.style.opacity="0",setTimeout((function(){e.remove()}),4e3)}},Ct=n(1296),Tt=n.n(Ct),kt=n(3109);var Ot,It,Rt,xt,At,Mt,Dt,Lt=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Pt=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Nt=["mousemove","touchstart","keydown","focus",kt.qr.frameFocus,kt.qr.frameKeydown,kt.qr.frameMousemove],jt=function(e){(0,D.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,P.Z)(t);if(n){var i=(0,P.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,L.Z)(this,e)});function i(e){var t;return(0,x.Z)(this,i),t=r.call(this),Ot.add((0,M.Z)(t)),It.set((0,M.Z)(t),Date.now()),Rt.set((0,M.Z)(t),0),xt.set((0,M.Z)(t),0),Mt.set((0,M.Z)(t),Tt()(Pt((0,M.Z)(t),Ot,"m",At).bind((0,M.Z)(t)),5e3,{leading:!0,trailing:!1})),Lt((0,M.Z)(t),xt,e,"f"),Pt((0,M.Z)(t),Ot,"m",Dt).call((0,M.Z)(t)),setInterval((function(){Date.now()-Pt((0,M.Z)(t),It,"f")>Pt((0,M.Z)(t),xt,"f")&&(Pt((0,M.Z)(t),Rt,"f")||(Lt((0,M.Z)(t),Rt,Date.now(),"f"),t.emit("away")))}),1e3),t}return(0,A.Z)(i,[{key:"onAway",value:function(e){this.on("away",e)}},{key:"onReturned",value:function(e){this.on("returned",e)}},{key:"onActivity",value:function(e){this.on("activity",e)}},{key:"getLastActivityTime",value:function(){return Pt(this,It,"f")}},{key:"getAwayTime",value:function(){return Pt(this,Rt,"f")}}]),i}(oe().EventEmitter);It=new WeakMap,Rt=new WeakMap,xt=new WeakMap,Mt=new WeakMap,Ot=new WeakSet,At=function(){this.emit("activity")},Dt=function(){var e=this,t=function(){Lt(e,It,Date.now(),"f"),Pt(e,Rt,"f")&&(Lt(e,Rt,0,"f"),e.emit("returned")),Pt(e,Mt,"f").call(e)};Nt.forEach((function(e){return window.addEventListener(e,t,{passive:!0})}))};var Ft=n(3668),Bt=n(5713),Wt=n(694),Ut=n(2407);function Vt(){return(Vt=(0,o.Z)(c().mark((function e(){var t,r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.o2){e.next=8;break}return e.next=3,n.e(830).then(n.t.bind(n,9989,23));case 3:t=e.sent,r=t.TransformStream,i=t.ReadableStream,o=t.WritableStream,window.TransformStream=r,window.ReadableStream=i,window.WritableStream=o;case 8:if(!ue.Fo&&!ue.o2){e.next=14;break}return e.next=11,n.e(347).then(n.bind(n,9429));case 11:a=e.sent,s=a.CompressionStream,window.CompressionStream=s;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){Vt.apply(this,arguments)}();var Ht=function(){var e=(0,o.Z)(c().mark((function e(t){var n,r,i,a,s,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r=new CompressionStream("gzip"),ue.o2?(i=function(e){(0,D.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,P.Z)(t);if(n){var i=(0,P.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,L.Z)(this,e)});function i(e){return(0,x.Z)(this,i),r.call(this,{start:function(t){return(0,o.Z)(c().mark((function n(){var r,i,o,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=!1;case 1:if(r){n.next=13;break}return n.next=4,e.read();case 4:if(i=n.sent,o=i.done,a=i.value,r=o,!o){n.next=10;break}return n.abrupt("break",13);case 10:t.enqueue(a),n.next=1;break;case 13:t.close(),e.releaseLock();case 15:case"end":return n.stop()}}),n)})))()}})}return i}((0,Ut.Z)(ReadableStream)),a=new i(t.stream().getReader()),n=a.pipeThrough(r)):n=t.stream().pipeThrough(r),s=!1,u=[],l=n.getReader();case 6:if(s){e.next=14;break}return e.next=9,l.read();case 9:d=e.sent,s=d.done,d.value&&u.push(d.value),e.next=6;break;case 14:return e.abrupt("return",new Blob(u));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Zt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zt,Gt,$t,Kt,Yt,Xt,Jt,Qt,en,tn,nn,rn,on,an,sn,cn,un,ln,dn,fn,hn=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},pn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},vn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},mn=(0,I.U)("rrweb-router"),gn=function(){function e(t,n){var r=this;(0,x.Z)(this,e),zt.add(this),Gt.set(this,void 0),$t.set(this,void 0),Kt.set(this,""),Yt.set(this,""),Xt.set(this,{}),Jt.set(this,new Map),Qt.set(this,0),en.set(this,0),tn.set(this,0),an.set(this,(function(e){return pn(r,Xt,"f")[e]||(pn(r,Xt,"f")[e]=0),pn(r,Xt,"f")[e]+=1,pn(r,Xt,"f")[e]})),sn.set(this,(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.rid,i=e.mode,o=e.synthetic,a=vn(e,["rid","mode","synthetic"]),s={type:"event",event:{type:t?"rrwebWidgetEvent":"rrwebEvent",events:[a],rid:n,mode:i,synthetic:o},nonce:pn(r,an,"f").call(r,n)};return s})),hn(this,Gt,t,"f"),hn(this,$t,n,"f")}var t,n;return(0,A.Z)(e,[{key:"sendRrwebEvent",value:(n=(0,o.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pt(t)){e.next=2;break}return e.abrupt("return");case 2:return n=pn(this,sn,"f").call(this,t),pn(this,zt,"m",cn).call(this,n.event.rid,pn(this,Kt,"f")),e.next=6,pn(this,zt,"m",nn).call(this,n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"sendRrwebWidgetEvent",value:(t=(0,o.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pn(this,sn,"f").call(this,t,!0),pn(this,zt,"m",cn).call(this,pn(this,Yt,"f"),n.event.rid),e.next=4,pn(this,zt,"m",nn).call(this,n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleRrwebEventAcks",value:function(e){for(var t=this,n=function(){var e=(0,a.Z)(i[r],2),n=e[0];e[1].forEach((function(e){return pn(t,zt,"m",ln).call(t,n,e)}))},r=0,i=Object.entries(e);r<i.length;r++)n()}}]),e}();Gt=new WeakMap,$t=new WeakMap,Kt=new WeakMap,Yt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,en=new WeakMap,tn=new WeakMap,an=new WeakMap,sn=new WeakMap,zt=new WeakSet,nn=function(){var e=(0,o.Z)(c().mark((function e(t){var n,r,i,o,a,s,u,l,d,f,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O.ZP.getState().realtime,r=n.helpedBySid,i=n.peerStatus,o=n.serverStatus,a=n.sid,s=n.sbid,r){e.next=4;break}return mn.debug("Tried to send rrweb event without associated agent",t),e.abrupt("return");case 4:if(a&&s){e.next=7;break}return mn.debug("Tried to send rrweb event without required sbid fields (sid=".concat(a,", sbid=").concat(s,")")),e.abrupt("return");case 7:if(u=JSON.stringify(t),pn(this,zt,"m",un).call(this,t.event.rid,t.nonce,t),!pn(this,zt,"m",on).call(this,t)){e.next=16;break}return e.next=12,pn(this,zt,"m",rn).call(this,u,a,s);case 12:if(!e.sent){e.next=15;break}return e.abrupt("return");case 15:mn.warn("Could not upload snapshot, will try to send via ws/peer");case 16:l=C(u,15900),d=Zt(l);try{for(d.s();!(f=d.n()).done;)h=f.value,"connected"===i&&pn(this,$t,"f")?pn(this,$t,"f").sendChunk(h):"connected"===o&&pn(this,Gt,"f")?pn(this,Gt,"f").emit(V.rrwebEvent,{agentSid:r,content:h},!0):mn.warn("No route to send rrweb event to agent ".concat(r,", envelope ").concat(t,", chunk ").concat(h.chunk,"/").concat(h.chunks," (").concat(h.id,")"))}catch(e){d.e(e)}finally{d.f()}case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),rn=function(){var e=(0,o.Z)(c().mark((function e(t,n,r){var i,o,a,s,u,l,d,f,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=Date.now(),o=new Blob([t],{type:"text/plain"}),e.next=5,Ht(o);case 5:return a=e.sent,s=Math.round((Date.now()-i)/100)/10,u=Math.round(o.size/100)/10,l=Math.round(a.size/100)/10,mn.info("Compressed ".concat(u,"KB snapshot to ").concat(l,"KB in ").concat(s," seconds")),d=Date.now(),e.next=13,(0,Ft.Oj)(n,r,a);case 13:if(f=e.sent,h=Math.round((Date.now()-d)/100)/10,200!=f.status){e.next=19;break}mn.info("Uploaded ".concat(l,"KB snapshot in ").concat(h," seconds")),e.next=21;break;case 19:return mn.warn("Failed to upload ".concat(l,"KB snapshot, (status=").concat(f.status,")")),e.abrupt("return",!1);case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(0),mn.error("There was an error attempting to upload a snapshot",e.t0),e.abrupt("return",!1);case 27:return e.abrupt("return",!0);case 28:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t,n,r){return e.apply(this,arguments)}}(),on=function(e){if("event"==e.type&&"rrwebEvent"==e.event.type&&e.event.events.length)return e.event.events[0].type==T.tw.FullSnapshot},cn=function(e,t){var n=pn(this,Yt,"f")!==e||pn(this,Kt,"f")!=t;hn(this,Yt,e,"f"),hn(this,Kt,t,"f"),n&&pn(this,zt,"m",fn).call(this)},un=function(e,t,n){pn(this,zt,"m",dn).call(this);var r=pn(this,Jt,"f").get(e);r||(r=new Map,pn(this,Jt,"f").set(e,r));var i=r.get(t);r.set(t,{ts:Date.now(),envelope:n,count:i&&i.count+1||0})},ln=function(e,t){var n;null===(n=pn(this,Jt,"f").get(e))||void 0===n||n.delete(t)},dn=function(){var e=this;pn(this,Qt,"f")||hn(this,Qt,window.setTimeout((function(){pn(e,zt,"m",fn).call(e)}),1e3),"f")},fn=function(){var e=this;clearTimeout(pn(this,Qt,"f")),hn(this,Qt,0,"f");var t,n=[],r=Zt(pn(this,Jt,"f"));try{for(r.s();!(t=r.n()).done;){var i=(0,a.Z)(t.value,2),o=i[0];i[1],o!==pn(this,Yt,"f")&&o!==pn(this,Kt,"f")&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}if(n.length&&(mn.debug("Clearing old rid acks ".concat(n,", current rids (main=").concat(pn(this,Yt,"f"),", widget=").concat(pn(this,Kt,"f"),")")),n.forEach((function(t){return pn(e,Jt,"f").delete(t)}))),!(Date.now()-pn(this,en,"f")<8e3)){var s=Date.now(),c=[];pn(this,Jt,"f").forEach((function(t,n){t.forEach((function(t,r){t.count>4?(hn(e,en,Date.now(),"f"),c.push([n,r]),Date.now()-pn(e,tn,"f")>1e4&&(hn(e,tn,Date.now(),"f"),mn.warn("Wanted to resend unacked event ".concat(n,":").concat(r,", but its been sent ").concat(t.count-1," times already ")))):s-t.ts>2e3&&(t.count=t.count+1,mn.debug("Resending (".concat(t.count,"x) event due to missing/late ACK ").concat(n,":").concat(r)),pn(e,zt,"m",nn).call(e,t.envelope))}))})),c.forEach((function(t){var n,r=(0,a.Z)(t,2),i=r[0],o=r[1];mn.debug("Removing failed resend event ".concat(i,":").concat(o)),null===(n=pn(e,Jt,"f").get(i))||void 0===n||n.delete(o)}))}};var yn=n(1950),bn=n(9513),wn=n(7780),_n=(0,I.U)("manager"),Sn=new q({logger:(0,I.U)("sb-socket-widget"),protocolVersion:(0,k.J)(),url:"wss://ws.servicebell.com/v1",reconnectWhenOffline:!1}),En=new class{constructor(e){z.add(this),G.set(this,void 0),$.set(this,{[ne.camera]:null,[ne.display]:null}),K.set(this,[]),le(this,G,e,"f")}onStreamChange(e){return de(this,K,"f").push(e),()=>{le(this,K,de(this,K,"f").filter((t=>t===e)),"f")}}async startCameraStream({audio:e,video:t}){const n=await de(this,G,"f").setupCameraMediaStream({audio:e,video:t});return de(this,z,"m",X).call(this,ne.camera,n.stream),n}async startDisplayStream(){const e=await de(this,G,"f").setupDisplayMediaStream();return de(this,z,"m",X).call(this,ne.display,e),e}stopCameraStream(){return de(this,z,"m",J).call(this,ne.camera)}stopCameraVideoTrack(){return de(this,z,"m",Q).call(this,ne.camera,"video")}stopCameraAudioTrack(){return de(this,z,"m",Q).call(this,ne.camera,"audio")}stopDisplayStream(){return de(this,z,"m",J).call(this,ne.display)}getCameraStream(){return de(this,$,"f")[ne.camera]}getDisplayStream(){return de(this,$,"f")[ne.display]}getCameraVideoTrack(){return de(this,z,"m",Y).call(this,ne.camera,"video")}getCameraAudioTrack(){return de(this,z,"m",Y).call(this,ne.camera,"audio")}}(wn.l),Cn=new Qe(En),Tn=null,kn=null,On=function(e){var t=e.children;In();var n=(0,et.Q)((function(e){return e.realtime})).serverConnectCount;return(0,u.az)(u.HY,null,n?t:null)},In=function(){Rn(),xn(),An(),Dn(),Ln(),Pn(),Mn(),Nn(),jn(),Fn(),Wt.u.forEach((function(e){return e.useKitHook()}))},Rn=function(){var e=(0,l.oR)(),t=(0,u.eJ)(!1),n=(0,a.Z)(t,2),r=n[0],i=n[1];(0,u.d4)((function(){r||(tr(e),nr(e),wr(e),_r(e),Sr(e),i(!0))}),[e,r])},xn=function(){var e=(0,l.oR)(),t=(0,et.Q)((function(e){return"loaded"===e.realtime.initialDataStatus})),n=(0,u.eJ)(!1),r=(0,a.Z)(n,2),i=r[0],o=r[1];(0,u.d4)((function(){t&&!i&&(Bn(e),o(!0))}),[e,t,i])},An=function(){var e=(0,l.I0)(),t=(0,et.Q)((function(e){return e.realtime})),n=t.clientKey,r=t.initialDataStatus,i=(0,et.Q)((function(e){return e.app.isPageVisible}));(0,u.d4)((function(){n&&i&&"none"===r&&(_n.debug("Have client key and page is visible, fetching initial data"),e((0,tt.XC)({clientKey:n})))}),[n,i,r,e])},Mn=function(){var e=(0,l.I0)(),t=(0,et.Q)((function(e){return e.app})),n=t.hasReceivedOrg,r=t.org;(0,u.d4)((function(){if(n&&!kn){var t=r.widgetSettings.afkTime;t?(_n.debug("Initializing presence detection with afkTime ".concat(t)),(kn=new jt(r.widgetSettings.afkTime)).onReturned((function(){return e((0,tt.LI)(!1))})),kn.onAway((function(){return e((0,tt.LI)(!0))})),kn.onActivity((function(){return e((0,tt.jG)())}))):_n.warn("Org afkTime set to ".concat(t,", cannot initialize presence detection"))}}),[n,e])},Dn=function(){var e=(0,et.Q)((function(e){return e.realtime})),t=e.url,n=e.urlTitle,r=e.isIntroducedToServer,i=(0,et.Q)((function(e){return e.app.isPageVisible})),o=(0,u.sO)({}),a=(0,u.sO)(),s=(0,u.sO)(0),c=(0,u.I4)((function(e){if(o.current=Object.assign(Object.assign({},o.current),e),!a.current){var t=Math.min(Math.max(s.current-Date.now()+1e3,50),1e3);a.current=setTimeout((function(){_n.debug("Sending visitor update after ".concat(t,"ms"),o.current),Hn(o.current),o.current={},s.current=Date.now(),a.current=void 0}),t)}}),[]);(0,u.d4)((function(){r&&(_n.debug("Queueing visitor update for url",{url:t,urlTitle:n}),c({url:t,urlTitle:n}))}),[r,c,t,n]),(0,u.d4)((function(){r&&(_n.debug("Queueing visitor update for page visibility",{isPageVisible:i}),c({isPageVisible:i}))}),[r,c,i])},Ln=function(){var e=(0,l.I0)(),t=(0,et.Q)((function(e){return e.realtime})),n=t.isVisitorVideoAllowed,r=t.outgoingCameraStreamId;(0,u.d4)((function(){!n&&r&&e((0,rt.oU)({video:!1}))}),[n,r,e])},Pn=function(){var e=(0,l.I0)(),t=(0,et.Q)((function(e){return e.realtime})),n=t.feDashboardState,r=t.helpedBySid,i="on"!==(null==n?void 0:n.micStatus),o="on"!==(null==n?void 0:n.camStatus);(0,u.d4)((function(){e((0,rt.Hk)({isAgentMicMuted:i,isAgentCamMuted:o}))}),[o,i,e]),(0,u.d4)((function(){r||(e((0,rt.Hk)({isAgentMicMuted:!1,isAgentCamMuted:!1})),e((0,bn.ky)(!1)))}),[r,e])},Nn=function(){var e=(0,l.I0)(),t=(0,et.Q)((function(e){return e.realtime})),n=t.apiIdentifyArg,r=t.apiAlertArg,i=t.isIntroducedToServer;(0,u.d4)((function(){n&&i&&(_n.debug("Identifying visitor now that we are connected"),e((0,tt.Ax)(n)))}),[i,n,e]),(0,u.d4)((function(){r&&i&&(_n.debug("Sending api alert now that we are connected"),e((0,tt.Kq)(r)))}),[i,r,e]);var o=(0,et.Q)((function(e){return e.app})).wasPrematureDial;(0,u.d4)((function(){o&&i&&(_n.debug("Was premature dial, will try to dial now that we are connected"),e((0,rt.FN)()))}),[o,i,e])},jn=function(){var e=(0,l.I0)(),t=(0,et.Q)((function(e){return e.realtime})),n=t.isRecording,r=t.isRecordingAccepted,i=t.isRecordingRejected,o=(0,et.Q)((function(e){return e.app.org})).optinRecording&&!r&&!i&&n;(0,u.d4)((function(){e((0,rt.fv)(o))}),[o,e])},Fn=function(){var e=(0,O.TL)(),t=(0,et.Q)((function(e){return e.realtime})),n=t.helpedBy,r=t.sbid,i=(0,et.Q)((function(e){return e.chat})),o=i.hasFetchedChat,s=i.isChatExpanded,c=(0,u.eJ)(null),l=(0,a.Z)(c,2),d=l[0],f=l[1];(0,u.d4)((function(){o||(n||s)&&(e((0,bn.Ns)()),f(r))}),[e,n,s,o,r]),(0,u.d4)((function(){d&&r&&d!==r&&(e((0,bn.Ns)({reset:!0})),f(r))}),[e,r,d])},Bn=function(e){var t=e.getState().realtime.clientKey;t?(_n.debug("Create socket"),Sn.setClientKey(t),Sn.on(H.status,(function(t){e.dispatch((0,tt.X$)(t))})),Sn.on(H.init,(function(t){return e.dispatch((0,rt.Vo)(t))})),Sn.on(H.peerSignal,(function(e){var t=e.initial,n=e.data,r=e.teamMember;_n.debug("(agent) ".concat(t?"FIRST ":"",'Peer signal "').concat(n.type,'" from sid ').concat(r)),t&&Cn.prepare(n.wrtcId),Cn.signal(n)})),Sn.on(H.update,(function(t){e.dispatch((0,tt.T)(t))})),Sn.on(H.availability,(function(t){var n=e.getState();e.dispatch((0,rt.mP)(Object.assign(Object.assign({},n.app.org),t)))})),Sn.on(H.chatMessage,(function(t){e.dispatch((0,bn.f3)(t))})),Sn.on(H.chatTyping,(function(t){var n=t.isTyping;e.dispatch((0,bn.ky)(n))})),Sn.on(H.forceDial,(function(){e.dispatch((0,rt.FN)()),(0,yn.e)()})),Sn.on(H.rrwebEventAcks,(function(e){null==Tn||Tn.handleRrwebEventAcks(e.acks)})),Sn.on(H.pubsubMessage,(function(t){var n,r=t.channel,i=t.message;(n=r.match(/chat\.conversation\.([0-9]+)\.(.+)/))&&3===n.length&&(n[2],parseInt(n[1]),1)&&e.dispatch((0,bn.f3)(i))})),rr(),(0,R.GD)({sbSocket:Sn})):_n.warn("Tried to initialize socket without required realtime fields (clientKey=".concat(t,")"))},Wn=function(){_n.debug("Connect socket"),Sn.connect()},Un=function(){Sn.disconnect()},Vn=function(){var e=(0,o.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _n.debug("Send introduction",t),e.next=3,Sn.emit(V.introduction,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hn=function(e){try{Sn.emit(V.visitorUpdate,e,!0)}catch(e){_n.warn("Error sending visitor update: ".concat(e))}},Zn=function(e){try{Sn.emit(V.alert,e,!0)}catch(e){_n.warn("Error sending alert: ".concat(e))}},qn=function(){var e=(0,o.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn.emit(V.identity,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zn=function(e){var t=!!(null==e?void 0:e.wantsChat);Sn.emit(V.visitorUpdate,{helpStatus:T.IB.WAITING,wantsChat:t}),(0,Bt.Tm)("sb:dialstart")},Gn=function(){Sn.emit(V.visitorUpdate,{helpStatus:T.IB.IDLE}),(0,Bt.Tm)("sb:dialcancel")},$n=function(){try{Sn.emit(V.dialAgentMissed,void 0,!0)}catch(e){_n.warn("Error sending dial agent missed: ".concat(e))}(0,Bt.Tm)("sb:dialmiss")},Kn=function(){Sn.emit(V.acceptedTakeover,void 0,!0)},Yn=function(){Sn.emit(V.acceptedCall,void 0,!0)},Xn=function(){Sn.emit(V.rejectedCall,void 0,!0)},Jn=function(e){return Sn.emit(V.chatMessage,e)},Qn=function(e){var t="chat.conversation.".concat(e,".agent");return Sn.emit(V.subscribe,{channelName:t})},er=function(e){var t="chat.conversation.".concat(e,".agent");return Sn.emit(V.unsubscribe,{channelName:t})},tr=function(e){En.onStreamChange((function(t){var n,r,i,o;if(t.streamType===ne.camera){var a=null===(n=t.stream)||void 0===n?void 0:n.getAudioTracks()[0],s=null===(r=t.stream)||void 0===r?void 0:r.getVideoTracks()[0];e.dispatch((0,tt.JF)({outgoingCameraStreamId:(null===(i=t.stream)||void 0===i?void 0:i.id)||null,outgoingCameraAudioTrackId:(null==a?void 0:a.id)||null,outgoingCameraVideoTrackId:(null==s?void 0:s.id)||null}))}else t.streamType===ne.display&&(e.dispatch((0,tt.z5)((null===(o=t.stream)||void 0===o?void 0:o.id)||null)),t.stream||e.dispatch((0,rt.MJ)()))}))},nr=function(e){Cn.onStatus((function(t){_n.debug('Peer status "'.concat(t,'"')),e.dispatch((0,tt.Fy)(t))})),Cn.onSignal((function(t){try{var n=e.getState().realtime.helpedBySid;_n.debug('(self) Peer signal "'.concat(t.type,'"')),n||_n.warn("(self) No agent sid to include in peer signal, attempting to send anyway."),Sn.emit(V.peerSignal,{data:t,agentSid:n},!0)}catch(e){_n.warn("Error sending peer signal: ".concat(e))}})),Cn.onData((function(t){"event"===t.type?ft(t.event):"draw"==t.type?function(e){if(e.stop)return clearTimeout(St),void Et();if(!_t){if(yt){var t=yt.x,n=yt.y,r=e.x,i=e.y,o=function(){if(!bt){var e=(0,R.zb)();yt=null,bt=e.createElementNS(mt,"svg");var t=function(){bt&&(bt.style.width="".concat(e.body.scrollWidth,"px"),bt.style.height="".concat(e.body.scrollHeight,"px"))};new ResizeObserver(t).observe(e.body),bt&&(bt.style.position="absolute",bt.style.zIndex="2147483647",bt.style.top="0",bt.style.left="0",t(),bt.style.pointerEvents="none",bt.id="__sb_drawing_layer__"),e.body.appendChild(bt)}return bt}();if(wt){var a=wt.getAttribute("d");wt.setAttribute("d","".concat(a," L").concat(r,",").concat(i))}else wt=function(e,t,n,r){var i=(0,R.zb)().createElementNS(mt,"path");return i.setAttribute("d","M".concat(e,",").concat(t," L").concat(n,",").concat(r)),i.setAttribute("id","sbPath".concat(gt)),i.setAttribute("stroke","red"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","5"),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-linejoin","round"),i.style.opacity="1",i.style.transition="opacity ".concat(3e3,"ms ease-in-out"),gt++,i}(t,n,r,i),o.appendChild(wt)}clearTimeout(St),St=window.setTimeout(Et,3e3),yt=e}}(t.event):"widgetExtent"==t.type?e.dispatch((0,rt.pU)(t.event.extent)):"chatExpanded"===t.type?e.dispatch((0,bn.XE)(t.event.expanded)):"feDashboardState"===t.type?e.dispatch((0,tt.Ww)(t.feDashboardState)):"rrwebEventAcks"===t.type?null==Tn||Tn.handleRrwebEventAcks(t.acks):"endCall"===t.type?e.dispatch((0,tt.Ve)()):_n.debug('Unknown sbPeer.onData event "'.concat(t,'"'))})),Cn.onStreamInChange((function(t){var n,r=t.type,o=t.stream,a=t.isReceivingAudio,s=t.isReceivingVideo,c=(n={},(0,i.Z)(n,ne.camera,tt.fH),(0,i.Z)(n,ne.display,tt.p),n)[r];e.dispatch(c({streamId:(null==o?void 0:o.id)||null,isReceivingAudio:a,isReceivingVideo:s}))})),rr(),(0,R.GD)({sbPeer:Cn})},rr=function(){Tn||(Tn=new gn(Sn,Cn))},ir=function(e){null==Tn||Tn.sendRrwebEvent(e)},or=function(e){null==Tn||Tn.sendRrwebWidgetEvent(e)},ar=function(e){C(JSON.stringify({type:"trigger",trigger:e}),15900).forEach(Cn.sendChunk.bind(Cn))},sr=function(){return En.getCameraStream()},cr=function(){return En.getCameraVideoTrack()},ur=function(){return En.getCameraAudioTrack()},lr=function(e){Cn.sendWidgetState({speakerStatus:e})},dr=function(){return Cn.getIncomingCameraStream()||null},fr=function(){return Cn.getIncomingDisplayStream()||null},hr=function(){var e=(0,o.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En.startCameraStream(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pr=function(){En.stopCameraStream()},vr=function(){var e=(0,o.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En.startDisplayStream();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mr=function(){En.stopDisplayStream()},gr=function(){var e=(0,o.Z)(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.realtime,i=r.sbid,o=r.clientKey,i&&o){e.next=4;break}return _n.error("clientKey and visitorId required to postVisitorEmail"),e.abrupt("return");case 4:return e.next=6,(0,Ft.H_)(i,t,o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),yr=function(){var e=(0,o.Z)(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.realtime,o=i.sbid,a=i.clientKey,o&&a){e.next=4;break}return _n.error("clientKey and visitorId required to postVisitorEmail"),e.abrupt("return");case 4:return e.next=6,(0,Ft._F)(o,t,n,a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),br=function(){var e=(0,o.Z)(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.realtime,i=r.sbid,o=r.clientKey,i&&o){e.next=4;break}return _n.error("clientKey and visitorId required to postFeedback"),e.abrupt("return");case 4:return e.next=6,(0,Ft.fA)(i,o,t);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wr=function(e){var t=!0,n=function(n){t&&!n?(t=!1,e.dispatch((0,rt.DR)(!1))):!t&&n&&(t=!0,e.dispatch((0,rt.DR)(!0)))},r=function(){return document.hidden||"hidden"===document.visibilityState},i=function(){n(!r())},o=function(){n(!1)},a=function(){n(!0)},s=function(t){var n=t.detail,r=n.href,i=n.title;e.dispatch((0,tt.Yk)({url:r,urlTitle:i}))};window.removeEventListener(kt.tP,s),window.addEventListener(kt.tP,s),window.removeEventListener("sblocationchanged",s),window.addEventListener("sblocationchanged",s),document.removeEventListener("visibilitychange",i),document.addEventListener("visibilitychange",i),window.removeEventListener("pageshow",a),window.addEventListener("pageshow",a),window.removeEventListener("pagehide",o),window.addEventListener("pagehide",o),window.addEventListener("beforeunload",(function(t){var n=e.getState().app.stage;if("ACTIVE_CALL"===n||"DIALING"===n)return t.returnValue="Are you sure you wish to leave? You have an active help session.",t.preventDefault(),t.returnValue})),Wt.u.forEach((function(t){return t.setupWindowListeners&&t.setupWindowListeners(e)})),e.dispatch((0,rt.DR)(!r()))},_r=function(e){var t=!1,n=!1;setInterval((function(){var r=e.getState().realtime,i=r.isVideo,o=!!r.outgoingCameraAudioTrackId,a=!!r.outgoingCameraVideoTrackId,s=o&&i,c=a&&i,u={isSendingAudio:o,isSendingVideo:a,isVideo:i};ur()&&!s&&(t?(_n.warn("Unexpected outgoing audio track, will stop it",u),En.stopCameraAudioTrack(),n=!1):t=!0),cr()&&!c&&(n?(_n.warn("Unexpected outgoing video track, will stop it",u),En.stopCameraVideoTrack(),n=!1):n=!0)}),1e3)},Sr=function(e){setInterval((function(){if(e.getState().realtime.isRrwebRecording){var t=(0,nt.R6)();t&&ir(t)}}),3e3)}},8477:(e,t,n)=>{"use strict";n.d(t,{lz:()=>Ge,R6:()=>ze,YW:()=>He,_Y:()=>Ve,Sy:()=>Ze,kJ:()=>qe});var r,i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-->0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function c(e){var t,n=null===(t=e)||void 0===t?void 0:t.host;return Boolean(n&&n.shadowRoot&&n.shadowRoot===e)}function u(e){var t=e.maskInputOptions,n=e.tagName,r=e.type,i=e.value,o=e.maskInputFn,a=i||"";return(t[n.toLowerCase()]||t[r])&&(a=o?o(a):"*".repeat(a.length)),a}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(r||(r={}));var l,d,f=1,h=new RegExp("[^a-z0-9-_:]");function p(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(v).join(""):null}catch(e){return null}}function v(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=p(e.styleSheet)||t}catch(e){}return t}var m=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,g=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,y=/^(data:)([^,]*),(.*)/i;function b(e,t){return(e||"").replace(m,(function(e,n,r,i,o,a){var s,c=r||o||a,u=n||i||"";if(!c)return e;if(!g.test(c))return"url("+u+c+u+")";if(y.test(c))return"url("+u+c+u+")";if("/"===c[0])return"url("+u+(((s=t).indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+c)+u+")";var l=t.split("/"),d=c.split("/");l.pop();for(var f=0,h=d;f<h.length;f++){var p=h[f];"."!==p&&(".."===p?l.pop():l.push(p))}return"url("+u+l.join("/")+u+")"}))}var w=/^[^ \t\n\r\u000c]+/,_=/^[, \t\n\r\u000c]+/;function S(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function E(){var e=document.createElement("a");return e.href="",e.href}function C(e,t,n,r){return"src"===n||"href"===n&&r||"xlink:href"===n&&r&&"#"!==r[0]?S(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,i=e.exec(t.substring(n));return i?(r=i[0],n+=r.length,r):""}for(var i=[];r(_),!(n>=t.length);){var o=r(w);if(","===o.slice(-1))o=S(e,o.substring(0,o.length-1)),i.push(o);else{var a="";o=S(e,o);for(var s=!1;;){var c=t.charAt(n);if(""===c){i.push((o+a).trim());break}if(s)")"===c&&(s=!1);else{if(","===c){n+=1,i.push((o+a).trim());break}"("===c&&(s=!0)}a+=c,n+=1}}}return i.join(", ")}(e,r):"style"===n&&r?b(r,E()):"object"===t&&"data"===n&&r?S(e,r):r:S(e,r)}function T(e,t,n){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var i=e.classList[r];if(t.test(i))return!0}return!(!n||!e.matches(n))||T(e.parentNode,t,n)}return e.nodeType,e.TEXT_NODE,T(e.parentNode,t,n)}function k(e){return void 0===e?"":e.toLowerCase()}function O(e,t){var n,i=t.doc,o=t.map,a=t.blockClass,s=t.blockSelector,v=t.maskTextClass,m=t.maskTextSelector,g=t.skipChild,y=void 0!==g&&g,w=t.inlineStylesheet,_=void 0===w||w,S=t.maskInputOptions,I=void 0===S?{}:S,R=t.maskTextFn,x=t.maskInputFn,A=t.slimDOMOptions,M=t.dataURLOptions,D=void 0===M?{}:M,L=t.inlineImages,P=void 0!==L&&L,N=t.recordCanvas,j=void 0!==N&&N,F=t.onSerialize,B=t.onIframeLoad,W=t.iframeLoadTimeout,U=void 0===W?5e3:W,V=t.keepIframeSrcFn,H=void 0===V?function(){return!1}:V,Z=t.preserveWhiteSpace,q=void 0===Z||Z,z=function(e,t){var n,i,o,a,s=t.doc,c=t.blockClass,f=t.blockSelector,v=t.maskTextClass,m=t.maskTextSelector,g=t.inlineStylesheet,y=t.maskInputOptions,w=void 0===y?{}:y,_=t.maskTextFn,S=t.maskInputFn,k=t.dataURLOptions,O=void 0===k?{}:k,I=t.inlineImages,R=t.recordCanvas,x=t.keepIframeSrcFn;if(s.__sn){var A=s.__sn.id;i=1===A?void 0:A}switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:r.Document,childNodes:[],compatMode:e.compatMode,rootId:i}:{type:r.Document,childNodes:[],rootId:i};case e.DOCUMENT_TYPE_NODE:return{type:r.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:i};case e.ELEMENT_NODE:for(var M=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var i=e.classList[r];if(t.test(i))return!0}return!!n&&e.matches(n)}(e,c,f),D=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return h.test(t)?"div":t}(e),L={},P=0,N=Array.from(e.attributes);P<N.length;P++){var j=N[P],F=j.name,B=j.value;L[F]=C(s,D,F,B)}if("link"===D&&g){var W=Array.from(s.styleSheets).find((function(t){return t.href===e.href})),U=null;W&&(U=p(W)),U&&(delete L.rel,delete L.href,L._cssText=b(U,W.href))}if("style"===D&&e.sheet&&!(e.innerText||e.textContent||"").trim().length&&(U=p(e.sheet))&&(L._cssText=b(U,E())),"input"!==D&&"textarea"!==D&&"select"!==D||(B=e.value,"radio"!==L.type&&"checkbox"!==L.type&&"submit"!==L.type&&"button"!==L.type&&B?L.value=u({type:L.type,tagName:D,value:B,maskInputOptions:w,maskInputFn:S}):e.checked&&(L.checked=e.checked)),"option"===D&&(e.selected&&!w.select?L.selected=!0:delete L.selected),"canvas"===D&&R)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var i=t.getImageData,o="__rrweb_original__"in i?i.__rrweb_original__:i;if(new Uint32Array(o.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(L.rr_dataURL=e.toDataURL(O.type,O.quality));else if(!("__context"in e)){var V=e.toDataURL(O.type,O.quality),H=document.createElement("canvas");H.width=e.width,H.height=e.height,V!==H.toDataURL(O.type,O.quality)&&(L.rr_dataURL=V)}if("img"===D&&I){l||(l=s.createElement("canvas"),d=l.getContext("2d"));var Z=e,q=Z.crossOrigin;Z.crossOrigin="anonymous";var z=function(){try{l.width=Z.naturalWidth,l.height=Z.naturalHeight,d.drawImage(Z,0,0),L.rr_dataURL=l.toDataURL(O.type,O.quality)}catch(e){console.warn("Cannot inline img src="+Z.currentSrc+"! Error: "+e)}q?L.crossOrigin=q:delete L.crossOrigin};Z.complete&&0!==Z.naturalWidth?z():Z.onload=z}if("audio"!==D&&"video"!==D||(L.rr_mediaState=e.paused?"paused":"played",L.rr_mediaCurrentTime=e.currentTime),e.scrollLeft&&(L.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(L.rr_scrollTop=e.scrollTop),M){var G=e.getBoundingClientRect(),$=G.width,K=G.height;L={class:L.class,rr_width:$+"px",rr_height:K+"px"}}return"iframe"!==D||x(L.src)||(e.contentDocument||(L.rr_src=L.src),delete L.src),{type:r.Element,tagName:D,attributes:L,childNodes:[],isSVG:(a=e,Boolean("svg"===a.tagName||a.ownerSVGElement)||void 0),needBlock:M,rootId:i};case e.TEXT_NODE:var Y=e.parentNode&&e.parentNode.tagName,X=e.textContent,J="STYLE"===Y||void 0,Q="SCRIPT"===Y||void 0;if(J&&X){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(X=(o=e.parentNode.sheet).cssRules?Array.from(o.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: "+t,e)}X=b(X,E())}return Q&&(X="SCRIPT_PLACEHOLDER"),!J&&!Q&&T(e,v,m)&&X&&(X=_?_(X):X.replace(/[\S]/g,"*")),{type:r.Text,textContent:X||"",isStyle:J,rootId:i};case e.CDATA_SECTION_NODE:return{type:r.CDATA,textContent:"",rootId:i};case e.COMMENT_NODE:return{type:r.Comment,textContent:e.textContent||"",rootId:i};default:return!1}}(e,{doc:i,blockClass:a,blockSelector:s,maskTextClass:v,maskTextSelector:m,inlineStylesheet:_,maskInputOptions:I,maskTextFn:R,maskInputFn:x,dataURLOptions:D,inlineImages:P,recordCanvas:j,keepIframeSrcFn:H});if(!z)return console.warn(e,"not serialized"),null;n="__sn"in e?e.__sn.id:!function(e,t){if(t.comment&&e.type===r.Comment)return!0;if(e.type===r.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(k(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===k(e.attributes.name)||"icon"===k(e.attributes.rel)||"apple-touch-icon"===k(e.attributes.rel)||"shortcut icon"===k(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&k(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(k(e.attributes.property).match(/^(og|twitter|fb):/)||k(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===k(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===k(e.attributes.name)||"googlebot"===k(e.attributes.name)||"bingbot"===k(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===k(e.attributes.name)||"generator"===k(e.attributes.name)||"framework"===k(e.attributes.name)||"publisher"===k(e.attributes.name)||"progid"===k(e.attributes.name)||k(e.attributes.property).match(/^article:/)||k(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===k(e.attributes.name)||"yandex-verification"===k(e.attributes.name)||"csrf-token"===k(e.attributes.name)||"p:domain_verify"===k(e.attributes.name)||"verify-v1"===k(e.attributes.name)||"verification"===k(e.attributes.name)||"shopify-checkout-api-token"===k(e.attributes.name)))return!0}}return!1}(z,A)&&(q||z.type!==r.Text||z.isStyle||z.textContent.replace(/^\s+|\s+$/gm,"").length)?f++:-2;var G=Object.assign(z,{id:n});if(e.__sn=G,-2===n)return null;o[n]=e,F&&F(e);var $=!y;if(G.type===r.Element&&($=$&&!G.needBlock,delete G.needBlock,e.shadowRoot&&(G.isShadowHost=!0)),(G.type===r.Document||G.type===r.Element)&&$){A.headWhitespace&&z.type===r.Element&&"head"===z.tagName&&(q=!1);for(var K={doc:i,map:o,blockClass:a,blockSelector:s,maskTextClass:v,maskTextSelector:m,skipChild:y,inlineStylesheet:_,maskInputOptions:I,maskTextFn:R,maskInputFn:x,slimDOMOptions:A,dataURLOptions:D,inlineImages:P,recordCanvas:j,preserveWhiteSpace:q,onSerialize:F,onIframeLoad:B,iframeLoadTimeout:U,keepIframeSrcFn:H},Y=0,X=Array.from(e.childNodes);Y<X.length;Y++)(ee=O(X[Y],K))&&G.childNodes.push(ee);if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(var J=0,Q=Array.from(e.shadowRoot.childNodes);J<Q.length;J++){var ee;(ee=O(Q[J],K))&&(ee.isShadow=!0,G.childNodes.push(ee))}}return e.parentNode&&c(e.parentNode)&&(G.isShadow=!0),G.type===r.Element&&"iframe"===G.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var i,o=!1;try{i=r.document.readyState}catch(e){return}if("complete"===i){var a="about:blank";r.location.href===a&&e.src!==a&&""!==e.src?e.addEventListener("load",t):setTimeout(t,0)}else{var s=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),o=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&B){var n=O(t,{doc:t,map:o,blockClass:a,blockSelector:s,maskTextClass:v,maskTextSelector:m,skipChild:!1,inlineStylesheet:_,maskInputOptions:I,maskTextFn:R,maskInputFn:x,slimDOMOptions:A,dataURLOptions:D,inlineImages:P,recordCanvas:j,preserveWhiteSpace:q,onSerialize:F,onIframeLoad:B,iframeLoadTimeout:U,keepIframeSrcFn:H});n&&B(e,n)}}),U),G}new RegExp(/([^\\]):hover/.source,"g");var I=n(3528);function R(e,t,n){void 0===n&&(n=document);var r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}var x="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",A={map:{},getId:function(){return console.error(x),-1},getNode:function(){return console.error(x),null},removeNodeFromMap:function(){console.error(x)},has:function(){return console.error(x),!1},reset:function(){console.error(x)}};function M(e,t,n){void 0===n&&(n={});var r=null,i=0;return function(o){var a=Date.now();i||!1!==n.leading||(i=a);var s=t-(a-i),c=this,u=arguments;s<=0||s>t?(r&&(clearTimeout(r),r=null),i=a,e.apply(c,u)):r||!1===n.trailing||(r=setTimeout((function(){i=!1===n.leading?0:Date.now(),r=null,e.apply(c,u)}),s))}}function D(e,t,n,r,i){void 0===i&&(i=window);var o=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),o&&o.set&&o.set.call(this,e)}}),function(){return D(e,t,o||{},!0)}}function L(e,t,n){try{if(!(t in e))return function(){};var r=e[t],i=n(r);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=i,function(){e[t]=r}}catch(e){return function(){}}}function P(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function N(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function j(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;if("string"==typeof t){if(void 0!==e.closest)return null!==e.closest("."+t);n=e.classList.contains(t)}else e.classList.forEach((function(e){t.test(e)&&(n=!0)}));return n||j(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,j(e.parentNode,t)}function F(e){return"__sn"in e&&-2===e.__sn.id}function B(e,t){if(c(e))return!1;var n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||B(e.parentNode,t))}function W(e){return Boolean(e.changedTouches)}function U(e){return"__sn"in e&&e.__sn.type===r.Element&&"iframe"===e.__sn.tagName}function V(e){return Boolean(null==e?void 0:e.shadowRoot)}function H(e){return"__ln"in e}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(A=new Proxy(A,{get:function(e,t,n){return"map"===t&&console.error(x),Reflect.get(e,t,n)}})),function(){function e(){this.reset()}e.prototype.add=function(e){var t=this.indexes.get(e.parentId),n={id:e.node.id,mutation:e,children:[],texts:[],attributes:[]};t?(n.parent=t,t.children[n.id]=n):this.tree[n.id]=n,this.indexes.set(n.id,n)},e.prototype.remove=function(e,t){var n=this,r=this.indexes.get(e.parentId),i=this.indexes.get(e.id),o=function(e){n.removeIdSet.add(e);var r=t.getNode(e);null==r||r.childNodes.forEach((function(e){"__sn"in e&&o(e.__sn.id)}))},a=function(t){n.removeIdSet.add(t.id),Object.values(t.children).forEach((function(e){return a(e)}));var r=n.indexes.get(t.id);if(r){var i=r.parent;i&&(delete r.parent,delete i.children[r.id],n.indexes.delete(e.id))}};i?r?(delete i.parent,delete r.children[i.id],this.indexes.delete(e.id),a(i)):(delete this.tree[i.id],this.indexes.delete(i.id),a(i)):(this.removeNodeMutations.push(e),o(e.id))},e.prototype.text=function(e){var t=this.indexes.get(e.id);t?t.texts.push(e):this.textMutations.push(e)},e.prototype.attribute=function(e){var t=this.indexes.get(e.id);t?t.attributes.push(e):this.attributeMutations.push(e)},e.prototype.scroll=function(e){this.scrollMap.set(e.id,e)},e.prototype.input=function(e){this.inputMap.set(e.id,e)},e.prototype.flush=function(){var e,t,n,r,i=this,a=this,s=a.tree,c=a.removeNodeMutations,u=a.textMutations,l=a.attributeMutations,d={source:I.yh.Mutation,removes:c,texts:u,attributes:l,adds:[]},f=function(e,t){t&&i.removeIdSet.add(e.id),d.texts=d.texts.concat(t?[]:e.texts).filter((function(e){return!i.removeIdSet.has(e.id)})),d.attributes=d.attributes.concat(t?[]:e.attributes).filter((function(e){return!i.removeIdSet.has(e.id)})),i.removeIdSet.has(e.id)||i.removeIdSet.has(e.mutation.parentId)||t?Object.values(e.children).forEach((function(e){return f(e,!0)})):(d.adds.push(e.mutation),e.children&&Object.values(e.children).forEach((function(e){return f(e,!1)})))};Object.values(s).forEach((function(e){return f(e,!1)}));try{for(var h=o(this.scrollMap.keys()),p=h.next();!p.done;p=h.next()){var v=p.value;this.removeIdSet.has(v)&&this.scrollMap.delete(v)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}try{for(var m=o(this.inputMap.keys()),g=m.next();!g.done;g=m.next())v=g.value,this.removeIdSet.has(v)&&this.inputMap.delete(v)}catch(e){n={error:e}}finally{try{g&&!g.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}var y=new Map(this.scrollMap),b=new Map(this.inputMap);return this.reset(),{mutationData:d,scrollMap:y,inputMap:b}},e.prototype.reset=function(){this.tree=[],this.indexes=new Map,this.removeNodeMutations=[],this.textMutations=[],this.attributeMutations=[],this.removeIdSet=new Set,this.scrollMap=new Map,this.inputMap=new Map},e.prototype.idRemoved=function(e){return this.removeIdSet.has(e)}}();var Z=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&H(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else e.nextSibling&&H(e.nextSibling)&&e.nextSibling.__ln.previous?(n=e.nextSibling.__ln.previous,t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)):(this.head&&(this.head.previous=t),t.next=this.head,this.head=t);this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),q=function(e,t){return"".concat(e,"@").concat(t)};function z(e){return"__sn"in e}function G(e,t){e.delete(t),t.childNodes.forEach((function(t){return G(e,t)}))}function $(e,t,n){var r=t.parentNode;if(!r)return!1;var i=n.getId(r);return!!e.some((function(e){return e.id===i}))||$(e,r,n)}function K(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||K(e,n))}const Y=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(){var t,n,r,i;if(!e.frozen&&!e.locked){for(var a=[],s=new Z,u=function(t){for(var n=t,r=-2;-2===r;)r=(n=n&&n.nextSibling)&&e.mirror.getId(n);return r},l=function(t){for(var n,r,i,o,l,d=t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null,f=d;null===(i=null===(r=null==f?void 0:f.getRootNode)||void 0===r?void 0:r.call(f))||void 0===i?void 0:i.host;)f=(null===(l=null===(o=null==f?void 0:f.getRootNode)||void 0===o?void 0:o.call(f))||void 0===l?void 0:l.host)||null;var h=!(e.doc.contains(t)||null!==f&&e.doc.contains(f));if(t.parentNode&&!h){var p=c(t.parentNode)?e.mirror.getId(d):e.mirror.getId(t.parentNode),v=u(t);if(-1===p||-1===v)return s.addNode(t);var m=O(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(n){U(n)&&e.iframeManager.addIframe(n),V(t)&&e.shadowDomManager.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,n){e.iframeManager.attachIframe(t,n),e.shadowDomManager.observeAttachShadow(t)}});m&&a.push({parentId:p,nextId:v,node:m})}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());try{for(var d=o(e.movedSet),f=d.next();!f.done;f=d.next()){var h=f.value;$(e.removes,h,e.mirror)&&!e.movedSet.has(h.parentNode)||l(h)}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}try{for(var p=o(e.addedSet),v=p.next();!v.done;v=p.next())h=v.value,K(e.droppedSet,h)||$(e.removes,h,e.mirror)?K(e.movedSet,h)?l(h):e.droppedSet.add(h):l(h)}catch(e){r={error:e}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}for(var m=null;s.length;){var g=null;if(m){var y=e.mirror.getId(m.value.parentNode),b=u(m.value);-1!==y&&-1!==b&&(g=m)}if(!g)for(var w=s.length-1;w>=0;w--){var _=s.get(w);if(_&&(y=e.mirror.getId(_.value.parentNode),b=u(_.value),-1!==y&&-1!==b)){g=_;break}}if(!g){for(;s.head;)s.removeNode(s.head.value);break}m=g.previous,s.removeNode(g.value),l(g.value)}var S={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:a};(S.texts.length||S.attributes.length||S.removes.length||S.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.mutationCb(S))}},this.processMutation=function(t){var n,r,i,a;if(!F(t.target))switch(t.type){case"characterData":var s=t.target.textContent;j(t.target,e.blockClass)||s===t.oldValue||e.texts.push({value:T(t.target,e.maskTextClass,e.maskTextSelector)&&s?e.maskTextFn?e.maskTextFn(s):s.replace(/[\S]/g,"*"):s,node:t.target});break;case"attributes":var l=t.target;if(s=t.target.getAttribute(t.attributeName),"value"===t.attributeName&&(s=u({maskInputOptions:e.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:s,maskInputFn:e.maskInputFn})),j(t.target,e.blockClass)||s===t.oldValue)return;var d=e.attributes.find((function(e){return e.node===t.target}));if(d||(d={node:t.target,attributes:{}},e.attributes.push(d)),"style"===t.attributeName){var f=e.doc.createElement("span");t.oldValue&&f.setAttribute("style",t.oldValue),void 0!==d.attributes.style&&null!==d.attributes.style||(d.attributes.style={});var h=d.attributes.style;try{for(var p=o(Array.from(l.style)),v=p.next();!v.done;v=p.next()){var m=v.value,g=l.style.getPropertyValue(m),y=l.style.getPropertyPriority(m);g===f.style.getPropertyValue(m)&&y===f.style.getPropertyPriority(m)||(h[m]=""===y?g:[g,y])}}catch(e){n={error:e}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}try{for(var b=o(Array.from(f.style)),w=b.next();!w.done;w=b.next())m=w.value,""===l.style.getPropertyValue(m)&&(h[m]=!1)}catch(e){i={error:e}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}}else d.attributes[t.attributeName]=C(e.doc,t.target.tagName,t.attributeName,s);break;case"childList":t.addedNodes.forEach((function(n){return e.genAdds(n,t.target)})),t.removedNodes.forEach((function(n){var r=e.mirror.getId(n),i=c(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);j(t.target,e.blockClass)||F(n)||(e.addedSet.has(n)?(G(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===r||B(t.target,e.mirror)||(e.movedSet.has(n)&&e.movedMap[q(r,i)]?G(e.movedSet,n):e.removes.push({parentId:i,id:r,isShadow:!!c(t.target)||void 0})),e.mapRemoves.push(n))}))}},this.genAdds=function(t,n){if(!n||!j(n,e.blockClass)){if(z(t)){if(F(t))return;e.movedSet.add(t);var r=null;n&&z(n)&&(r=n.__sn.id),r&&(e.movedMap[q(t.__sn.id,r)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);j(t,e.blockClass)||t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((function(n){t[n]=e[n]}))},e.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},e.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},e.prototype.isFrozen=function(){return this.frozen},e.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},e.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},e.prototype.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()},e}();var X=[],J="undefined"!=typeof CSSGroupingRule,Q="undefined"!=typeof CSSMediaRule,ee="undefined"!=typeof CSSSupportsRule,te="undefined"!=typeof CSSConditionRule;function ne(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function re(e,t){var n,r,i=new Y;X.push(i),i.init(e);var o=window.MutationObserver||window.__rrMutationObserver,a=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");a&&window[a]&&(o=window[a]);var s=new o(i.processMutations.bind(i));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function ie(e){var t=e.scrollCb,n=e.doc,r=e.mirror,i=e.blockClass;return R("scroll",M((function(e){var o=ne(e);if(o&&!j(o,i)){var a=r.getId(o);if(o===n){var s=n.scrollingElement||n.documentElement;t({id:a,x:s.scrollLeft,y:s.scrollTop})}else t({id:a,x:o.scrollLeft,y:o.scrollTop})}}),e.sampling.scroll||100),n)}function oe(e,t){var n=i({},e);return t||delete n.userTriggered,n}var ae=["INPUT","TEXTAREA","SELECT"],se=new WeakMap;function ce(e){return function(e,t){if(J&&e.parentRule instanceof CSSGroupingRule||Q&&e.parentRule instanceof CSSMediaRule||ee&&e.parentRule instanceof CSSSupportsRule||te&&e.parentRule instanceof CSSConditionRule){var n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else n=Array.from(e.parentStyleSheet.cssRules).indexOf(e),t.unshift(n);return t}(e,[])}function ue(e,t){var n,r;void 0===t&&(t={});var c=e.doc.defaultView;if(!c)return function(){};!function(e,t){var n=e.mutationCb,r=e.mousemoveCb,i=e.mouseInteractionCb,o=e.scrollCb,c=e.viewportResizeCb,u=e.inputCb,l=e.mediaInteractionCb,d=e.styleSheetRuleCb,f=e.styleDeclarationCb,h=e.canvasMutationCb,p=e.fontCb;e.mutationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mutation&&t.mutation.apply(t,s([],a(e),!1)),n.apply(void 0,s([],a(e),!1))},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,s([],a(e),!1)),r.apply(void 0,s([],a(e),!1))},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,s([],a(e),!1)),i.apply(void 0,s([],a(e),!1))},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,s([],a(e),!1)),o.apply(void 0,s([],a(e),!1))},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,s([],a(e),!1)),c.apply(void 0,s([],a(e),!1))},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,s([],a(e),!1)),u.apply(void 0,s([],a(e),!1))},e.mediaInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mediaInteaction&&t.mediaInteaction.apply(t,s([],a(e),!1)),l.apply(void 0,s([],a(e),!1))},e.styleSheetRuleCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleSheetRule&&t.styleSheetRule.apply(t,s([],a(e),!1)),d.apply(void 0,s([],a(e),!1))},e.styleDeclarationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleDeclaration&&t.styleDeclaration.apply(t,s([],a(e),!1)),f.apply(void 0,s([],a(e),!1))},e.canvasMutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.canvasMutation&&t.canvasMutation.apply(t,s([],a(e),!1)),h.apply(void 0,s([],a(e),!1))},e.fontCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.font&&t.font.apply(t,s([],a(e),!1)),p.apply(void 0,s([],a(e),!1))}}(e,t);var l=re(e,e.doc),d=function(e){var t=e.mousemoveCb,n=e.sampling,r=e.doc,i=e.mirror;if(!1===n.mousemove)return function(){};var o,a="number"==typeof n.mousemove?n.mousemove:50,s="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500,c=[],u=M((function(e){var n=Date.now()-o;t(c.map((function(e){return e.timeOffset-=n,e})),e),c=[],o=null}),s),l=M((function(e){var t=ne(e),n=W(e)?e.changedTouches[0]:e,r=n.clientX,a=n.clientY;o||(o=Date.now()),c.push({x:r,y:a,id:i.getId(t),timeOffset:Date.now()-o}),u("undefined"!=typeof DragEvent&&e instanceof DragEvent?I.yh.Drag:e instanceof MouseEvent?I.yh.MouseMove:I.yh.TouchMove)}),a,{trailing:!1}),d=[R("mousemove",l,r),R("touchmove",l,r),R("drag",l,r)];return function(){d.forEach((function(e){return e()}))}}(e),f=function(e){var t=e.mouseInteractionCb,n=e.doc,r=e.mirror,i=e.blockClass,o=e.sampling;if(!1===o.mouseInteraction)return function(){};var a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,s=[];return Object.keys(I.Y2).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]})).forEach((function(e){var o=e.toLowerCase(),a=function(e){return function(n){var o=ne(n);if(!j(o,i)){var a=W(n)?n.changedTouches[0]:n;if(a){var s=r.getId(o),c=a.clientX,u=a.clientY;t({type:I.Y2[e],id:s,x:c,y:u})}}}}(e);s.push(R(o,a,n))})),function(){s.forEach((function(e){return e()}))}}(e),h=ie(e),p=function(e){var t=e.viewportResizeCb,n=-1,r=-1;return R("resize",M((function(){var e=P(),i=N();n===e&&r===i||(t({width:Number(i),height:Number(e)}),n=e,r=i)}),200),window)}(e),v=function(e){var t=e.inputCb,n=e.doc,r=e.mirror,o=e.blockClass,c=e.ignoreClass,l=e.maskInputOptions,d=e.maskInputFn,f=e.sampling,h=e.userTriggeredOnInput;function p(e){var t=ne(e),r=e.isTrusted;if(t&&"OPTION"===t.tagName&&(t=t.parentElement),t&&t.tagName&&!(ae.indexOf(t.tagName)<0)&&!j(t,o)){var i=t.type;if(!t.classList.contains(c)){var a=t.value,s=!1;"radio"===i||"checkbox"===i?s=t.checked:(l[t.tagName.toLowerCase()]||l[i])&&(a=u({maskInputOptions:l,tagName:t.tagName,type:i,value:a,maskInputFn:d})),v(t,oe({text:a,isChecked:s,userTriggered:r},h));var f=t.name;"radio"===i&&f&&s&&n.querySelectorAll('input[type="radio"][name="'.concat(f,'"]')).forEach((function(e){e!==t&&v(e,oe({text:e.value,isChecked:!s,userTriggered:!1},h))}))}}}function v(e,n){var o=se.get(e);if(!o||o.text!==n.text||o.isChecked!==n.isChecked){se.set(e,n);var a=r.getId(e);t(i(i({},n),{id:a}))}}var m=("last"===f.input?["change"]:["input","change"]).map((function(e){return R(e,p,n)})),g=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),y=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return g&&g.set&&m.push.apply(m,s([],a(y.map((function(e){return D(e[0],e[1],{set:function(){p({target:this})}})}))),!1)),function(){m.forEach((function(e){return e()}))}}(e),m=function(e){var t=e.mediaInteractionCb,n=e.blockClass,r=e.mirror,i=e.sampling,o=function(e){return M((function(i){var o=ne(i);if(o&&!j(o,n)){var a=o,s=a.currentTime,c=a.volume,u=a.muted;t({type:e,id:r.getId(o),currentTime:s,volume:c,muted:u})}}),i.media||500)},a=[R("play",o(0)),R("pause",o(1)),R("seeked",o(2)),R("volumechange",o(3))];return function(){a.forEach((function(e){return e()}))}}(e),g=function(e,t){var n=e.styleSheetRuleCb,r=e.mirror,i=t.win,o=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=function(e,t){var i=r.getId(this.ownerNode);return-1!==i&&n({id:i,adds:[{rule:e,index:t}]}),o.apply(this,arguments)};var c=i.CSSStyleSheet.prototype.deleteRule;i.CSSStyleSheet.prototype.deleteRule=function(e){var t=r.getId(this.ownerNode);return-1!==t&&n({id:t,removes:[{index:e}]}),c.apply(this,arguments)};var u={};J?u.CSSGroupingRule=i.CSSGroupingRule:(Q&&(u.CSSMediaRule=i.CSSMediaRule),te&&(u.CSSConditionRule=i.CSSConditionRule),ee&&(u.CSSSupportsRule=i.CSSSupportsRule));var l={};return Object.entries(u).forEach((function(e){var t=a(e,2),i=t[0],o=t[1];l[i]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=function(e,t){var o=r.getId(this.parentStyleSheet.ownerNode);return-1!==o&&n({id:o,adds:[{rule:e,index:s(s([],a(ce(this)),!1),[t||0],!1)}]}),l[i].insertRule.apply(this,arguments)},o.prototype.deleteRule=function(e){var t=r.getId(this.parentStyleSheet.ownerNode);return-1!==t&&n({id:t,removes:[{index:s(s([],a(ce(this)),!1),[e],!1)}]}),l[i].deleteRule.apply(this,arguments)}})),function(){i.CSSStyleSheet.prototype.insertRule=o,i.CSSStyleSheet.prototype.deleteRule=c,Object.entries(u).forEach((function(e){var t=a(e,2),n=t[0],r=t[1];r.prototype.insertRule=l[n].insertRule,r.prototype.deleteRule=l[n].deleteRule}))}}(e,{win:c}),y=function(e,t){var n=e.styleDeclarationCb,r=e.mirror,i=t.win,o=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=function(e,t,i){var a,s,c=r.getId(null===(s=null===(a=this.parentRule)||void 0===a?void 0:a.parentStyleSheet)||void 0===s?void 0:s.ownerNode);return-1!==c&&n({id:c,set:{property:e,value:t,priority:i},index:ce(this.parentRule)}),o.apply(this,arguments)};var a=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=function(e){var t,i,o=r.getId(null===(i=null===(t=this.parentRule)||void 0===t?void 0:t.parentStyleSheet)||void 0===i?void 0:i.ownerNode);return-1!==o&&n({id:o,remove:{property:e},index:ce(this.parentRule)}),a.apply(this,arguments)},function(){i.CSSStyleDeclaration.prototype.setProperty=o,i.CSSStyleDeclaration.prototype.removeProperty=a}}(e,{win:c}),b=e.collectFonts?function(e){var t=e.fontCb,n=e.doc,r=n.defaultView;if(!r)return function(){};var i=[],o=new WeakMap,a=r.FontFace;r.FontFace=function(e,t,n){var r=new a(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};var s=L(n.fonts,"add",(function(e){return function(n){return setTimeout((function(){var e=o.get(n);e&&(t(e),o.delete(n))}),0),e.apply(this,[n])}}));return i.push((function(){r.FontFace=a})),i.push(s),function(){i.forEach((function(e){return e()}))}}(e):function(){},w=[];try{for(var _=o(e.plugins),S=_.next();!S.done;S=_.next()){var E=S.value;w.push(E.observer(E.callback,c,E.options))}}catch(e){n={error:e}}finally{try{S&&!S.done&&(r=_.return)&&r.call(_)}finally{if(n)throw n.error}}return function(){X.forEach((function(e){return e.reset()})),l.disconnect(),d(),f(),h(),p(),v(),m(),g(),y(),b(),w.forEach((function(e){return e()}))}}var le=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}return e.prototype.addIframe=function(e){this.iframes.set(e,!0)},e.prototype.addLoadListener=function(e){this.loadListener=e},e.prototype.attachIframe=function(e,t){var n;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e)},e}(),de=function(){function e(e){this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;var t=this;this.restorePatches.push(L(HTMLElement.prototype,"attachShadow",(function(e){return function(){var n=e.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),n}})))}return e.prototype.addShadowRoot=function(e,t){re(i(i({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),ie(i(i({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))},e.prototype.observeAttachShadow=function(e){if(e.contentWindow){var t=this;this.restorePatches.push(L(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(){var r=n.apply(this,arguments);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),r}})))}},e.prototype.reset=function(){this.restorePatches.forEach((function(e){return e()}))},e}();for(var fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he="undefined"==typeof Uint8Array?[]:new Uint8Array(256),pe=0;pe<fe.length;pe++)he[fe.charCodeAt(pe)]=pe;var ve=new Map,me=function(e,t,n){if(e&&(be(e,t)||"object"==typeof e)){var r=function(e,t){var n=ve.get(e);return n||(n=new Map,ve.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name),i=r.indexOf(e);return-1===i&&(i=r.length,r.push(e)),i}};function ge(e,t,n){if(e instanceof Array)return e.map((function(e){return ge(e,t,n)}));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){var r=e.constructor.name,i=function(e){var t,n=new Uint8Array(e),r=n.length,i="";for(t=0;t<r;t+=3)i+=fe[n[t]>>2],i+=fe[(3&n[t])<<4|n[t+1]>>4],i+=fe[(15&n[t+1])<<2|n[t+2]>>6],i+=fe[63&n[t+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i}(e);return{rr_type:r,base64:i}}return e instanceof DataView?{rr_type:e.constructor.name,args:[ge(e.buffer,t,n),e.byteOffset,e.byteLength]}:e instanceof HTMLImageElement?{rr_type:e.constructor.name,src:e.src}:e instanceof ImageData?{rr_type:e.constructor.name,args:[ge(e.data,t,n),e.width,e.height]}:be(e,t)||"object"==typeof e?{rr_type:e.constructor.name,index:me(e,t,n)}:e}var ye=function(e,t,n){return s([],a(e),!1).map((function(e){return ge(e,t,n)}))},be=function(e,t){var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((function(e){return"function"==typeof t[e]}));return Boolean(n.find((function(n){return e instanceof t[n]})))};function we(e,t,n,r,i,c){var u,l,d=[],f=Object.getOwnPropertyNames(e),h=function(o){try{if("function"!=typeof e[o])return"continue";var u=L(e,o,(function(u){return function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var f=u.apply(this,l);if(me(f,c,e),!j(this.canvas,r)){i.getId(this.canvas);var h=ye(s([],a(l),!1),c,e),p={type:t,property:o,args:h};n(this.canvas,p)}return f}}));d.push(u)}catch(r){var l=D(e,o,{set:function(e){n(this.canvas,{type:t,property:o,args:[e],setter:!0})}});d.push(l)}};try{for(var p=o(f),v=p.next();!v.done;v=p.next())h(v.value)}catch(e){u={error:e}}finally{try{v&&!v.done&&(l=p.return)&&l.call(p)}finally{if(u)throw u.error}}return d}var _e,Se,Ee=function(){function e(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(e,t){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)},this.mutationCb=e.mutationCb,this.mirror=e.mirror,!0===e.recordCanvas&&this.initCanvasMutationObserver(e.win,e.blockClass)}return e.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1},e.prototype.initCanvasMutationObserver=function(e,t){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var n=function(e,t){var n=[];try{var r=L(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return j(this,t)||"__context"in this||(this.__context=n),e.apply(this,s([n],a(r),!1))}}));n.push(r)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){n.forEach((function(e){return e()}))}}(e,t),r=function(e,t,n,r){var i,c,u=[],l=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype),d=function(r){try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[r])return"continue";var i=L(t.CanvasRenderingContext2D.prototype,r,(function(t){return function(){for(var i=this,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return j(this.canvas,n)||setTimeout((function(){var t=s([],a(o),!1);if("drawImage"===r&&t[0]&&t[0]instanceof HTMLCanvasElement){var n=t[0],c=n.getContext("2d"),u=null==c?void 0:c.getImageData(0,0,n.width,n.height),l=null==u?void 0:u.data;t[0]=JSON.stringify(l)}e(i.canvas,{type:I.FX["2D"],property:r,args:t})}),0),t.apply(this,o)}}));u.push(i)}catch(n){var o=D(t.CanvasRenderingContext2D.prototype,r,{set:function(t){e(this.canvas,{type:I.FX["2D"],property:r,args:[t],setter:!0})}});u.push(o)}};try{for(var f=o(l),h=f.next();!h.done;h=f.next())d(h.value)}catch(e){i={error:e}}finally{try{h&&!h.done&&(c=f.return)&&c.call(f)}finally{if(i)throw i.error}}return function(){u.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror),i=function(e,t,n,r){var i=[];return i.push.apply(i,s([],a(we(t.WebGLRenderingContext.prototype,I.FX.WebGL,e,n,r,t)),!1)),void 0!==t.WebGL2RenderingContext&&i.push.apply(i,s([],a(we(t.WebGL2RenderingContext.prototype,I.FX.WebGL2,e,n,r,t)),!1)),function(){i.forEach((function(e){return e()}))}}(this.processMutation.bind(this),e,t,this.mirror);this.resetObservers=function(){n(),r(),i()}},e.prototype.startPendingCanvasMutationFlusher=function(){var e=this;requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.startRAFTimestamping=function(){var e=this,t=function(n){e.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)},e.prototype.flushPendingCanvasMutations=function(){var e=this;this.pendingCanvasMutations.forEach((function(t,n){var r=e.mirror.getId(n);e.flushPendingCanvasMutationFor(n,r)})),requestAnimationFrame((function(){return e.flushPendingCanvasMutations()}))},e.prototype.flushPendingCanvasMutationFor=function(e,t){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(e);if(n&&-1!==t){var r=n.map((function(e){e.type;var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["type"]);return t})),i=n[0].type;this.mutationCb({id:t,type:i,commands:r}),this.pendingCanvasMutations.delete(e)}}},e}();function Ce(e){return i(i({},e),{timestamp:Date.now()})}var Te={map:{},getId:function(e){return e&&e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,n=e.__sn&&e.__sn.id;delete this.map[n],e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}};function ke(e){void 0===e&&(e={});var t=e.emit,n=e.checkoutEveryNms,r=e.checkoutEveryNth,s=e.blockClass,c=void 0===s?"rr-block":s,u=e.blockSelector,l=void 0===u?null:u,d=e.ignoreClass,f=void 0===d?"rr-ignore":d,h=e.maskTextClass,p=void 0===h?"rr-mask":h,v=e.maskTextSelector,m=void 0===v?null:v,g=e.inlineStylesheet,y=void 0===g||g,b=e.maskAllInputs,w=e.maskInputOptions,_=e.slimDOMOptions,S=e.maskInputFn,E=e.maskTextFn,C=e.hooks,T=e.packFn,k=e.sampling,x=void 0===k?{}:k,A=e.mousemoveWait,M=e.recordCanvas,D=void 0!==M&&M,L=e.userTriggeredOnInput,j=void 0!==L&&L,F=e.collectFonts,B=void 0!==F&&F,W=e.inlineImages,H=void 0!==W&&W,Z=e.plugins,q=e.keepIframeSrcFn,z=void 0===q?function(){return!1}:q;if(!t)throw new Error("emit function is required");void 0!==A&&void 0===x.mousemove&&(x.mousemove=A);var G,$,K=!0===b?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==w?w:{password:!0},Y=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};void 0===G&&(G=window),"NodeList"in G&&!G.NodeList.prototype.forEach&&(G.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in G&&!G.DOMTokenList.prototype.forEach&&(G.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1});var J=0;_e=function(e,i){var a;if(!(null===(a=X[0])||void 0===a?void 0:a.isFrozen())||e.type===I.tw.FullSnapshot||e.type===I.tw.IncrementalSnapshot&&e.data.source===I.yh.Mutation||X.forEach((function(e){return e.unfreeze()})),t(function(e){var t,n;try{for(var r=o(Z||[]),i=r.next();!i.done;i=r.next()){var a=i.value;a.eventProcessor&&(e=a.eventProcessor(e))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return T&&(e=T(e)),e}(e),i),e.type===I.tw.FullSnapshot)$=e,J=0;else if(e.type===I.tw.IncrementalSnapshot){if(e.data.source===I.yh.Mutation&&e.data.isAttachIframe)return;J++;var s=r&&J>=r,c=n&&e.timestamp-$.timestamp>n;(s||c)&&Se(!0)}};var Q=function(e){_e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.Mutation},e)}))},ee=function(e){return _e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.Scroll},e)}))},te=function(e){return _e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.CanvasMutation},e)}))},ne=new le({mutationCb:Q}),re=new Ee({recordCanvas:D,mutationCb:te,win:window,blockClass:c,mirror:Te}),ie=new de({mutationCb:Q,scrollCb:ee,bypassOptions:{blockClass:c,blockSelector:l,maskTextClass:p,maskTextSelector:m,inlineStylesheet:y,maskInputOptions:K,maskTextFn:E,maskInputFn:S,recordCanvas:D,inlineImages:H,sampling:x,slimDOMOptions:Y,iframeManager:ne,canvasManager:re},mirror:Te});Se=function(e){var t,n,r,i;void 0===e&&(e=!1),_e(Ce({type:I.tw.Meta,data:{href:window.location.href,width:N(),height:P()}}),e),X.forEach((function(e){return e.lock()}));var o=a(function(e,t){var n=t||{},r=n.blockClass,i=n.blockSelector,o=n.maskTextClass,a=n.maskTextSelector,s=n.inlineStylesheet,c=n.inlineImages,u=n.recordCanvas,l=n.maskAllInputs,d=void 0!==l&&l,f=n.slimDOM,h=void 0!==f&&f,p=n.keepIframeSrcFn,v={};return[O(e,{doc:e,map:v,blockClass:void 0===r?"rr-block":r,blockSelector:void 0===i?null:i,maskTextClass:void 0===o?"rr-mask":o,maskTextSelector:void 0===a?null:a,skipChild:!1,inlineStylesheet:void 0===s||s,maskInputOptions:!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===d?{password:!0}:d,maskTextFn:n.maskTextFn,maskInputFn:n.maskInputFn,slimDOMOptions:!0===h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===h,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===h?{}:h,dataURLOptions:n.dataURLOptions,inlineImages:void 0!==c&&c,recordCanvas:void 0!==u&&u,preserveWhiteSpace:n.preserveWhiteSpace,onSerialize:n.onSerialize,onIframeLoad:n.onIframeLoad,iframeLoadTimeout:n.iframeLoadTimeout,keepIframeSrcFn:void 0===p?function(){return!1}:p}),v]}(document,{blockClass:c,blockSelector:l,maskTextClass:p,maskTextSelector:m,inlineStylesheet:y,maskAllInputs:K,maskTextFn:E,slimDOM:Y,recordCanvas:D,inlineImages:H,onSerialize:function(e){U(e)&&ne.addIframe(e),V(e)&&ie.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){ne.attachIframe(e,t),ie.observeAttachShadow(e)},keepIframeSrcFn:z}),2),s=o[0],u=o[1];if(!s)return console.warn("Failed to snapshot the document");Te.map=u,_e(Ce({type:I.tw.FullSnapshot,data:{node:s,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(i=null===(r=null===document||void 0===document?void 0:document.body)||void 0===r?void 0:r.parentElement)||void 0===i?void 0:i.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),X.forEach((function(e){return e.unlock()}))};try{var oe=[];oe.push(R("DOMContentLoaded",(function(){_e(Ce({type:I.tw.DomContentLoaded,data:{}}))})));var ae=function(e){var t;return ue({mutationCb:Q,mousemoveCb:function(e,t){return _e(Ce({type:I.tw.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return _e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.MouseInteraction},e)}))},scrollCb:ee,viewportResizeCb:function(e){return _e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.ViewportResize},e)}))},inputCb:function(e){return _e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.Input},e)}))},mediaInteractionCb:function(e){return _e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return _e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.StyleSheetRule},e)}))},styleDeclarationCb:function(e){return _e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.StyleDeclaration},e)}))},canvasMutationCb:te,fontCb:function(e){return _e(Ce({type:I.tw.IncrementalSnapshot,data:i({source:I.yh.Font},e)}))},blockClass:c,ignoreClass:f,maskTextClass:p,maskTextSelector:m,maskInputOptions:K,inlineStylesheet:y,sampling:x,recordCanvas:D,inlineImages:H,userTriggeredOnInput:j,collectFonts:B,doc:e,maskInputFn:S,maskTextFn:E,blockSelector:l,slimDOMOptions:Y,mirror:Te,iframeManager:ne,shadowDomManager:ie,canvasManager:re,plugins:(null===(t=null==Z?void 0:Z.filter((function(e){return e.observer})))||void 0===t?void 0:t.map((function(e){return{observer:e.observer,options:e.options,callback:function(t){return _e(Ce({type:I.tw.Plugin,data:{plugin:e.name,payload:t}}))}}})))||[]},C)};ne.addLoadListener((function(e){oe.push(ae(e.contentDocument))}));var se=function(){Se(),oe.push(ae(document))};return"interactive"===document.readyState||"complete"===document.readyState?se():oe.push(R("load",(function(){_e(Ce({type:I.tw.Load,data:{}})),se()}),window)),function(){oe.forEach((function(e){return e()}))}}catch(e){console.warn(e)}}ke.addCustomEvent=function(e,t){if(!_e)throw new Error("please add custom event after start recording");_e(Ce({type:I.tw.Custom,data:{tag:e,payload:t}}))},ke.freezePage=function(){X.forEach((function(e){return e.freeze()}))},ke.takeFullSnapshot=function(e){if(!Se)throw new Error("please take full snapshot after start recording");Se(e)},ke.mirror=Te;const Oe=ke;var Ie,Re,xe=n(4173),Ae=n(9046),Me=n(2795),De=n(3593),Le=n(7887),Pe=(0,Me.U)("rrweb".concat((0,Ae.yL)()?" (iframe)":"")),Ne={rid:"",mode:"single",synthetic:!0},je=["intercom-namespace","intercom-lightweight-app"],Fe=function(e){return[].concat(je,[e]).filter(Boolean).map((function(e){return".".concat(e)})).join(", ")},Be=function(e){return new RegExp(function(e){return[].concat(je,[e]).filter(Boolean).join("|")}(e))},We=Math.random().toString(36).substr(2,5),Ue=0,Ve=function(){var e;if(!(0,Ae.yL)())throw new Error("Tried to set rrweb record on iframe but not in iframe");window.rrwebRecord?Pe.debug("Tried to inject rrweb into iframe, but already injected, will ignore"):(window.rrwebRecord=Oe,null===(e=window.top)||void 0===e||e.dispatchEvent(new CustomEvent("sbiframerrwebinjected")))},He=function(){var e=(0,Ae.jU)();return!(!e||!e.rrwebRecord)};function Ze(e,t,n){var r=e.app.rootElementId,i=e.app.isIframeFailed?"retrigger":(0,Le.aE)(e),o="inline"===e.app.org.widgetSettings.assetLinking,a=e.app.options.blockClass||"",s=!!(null==i?void 0:i.includes("iframe")),c=s?"iframe":"single";if(!s||n)if(Ie)Pe.warn("Tried to start recording but already recording");else{!s&&n&&Pe.warn('Tried to start recording with widgetCb, but mode is "'.concat(i,'"'));var u=function(e){var t=(Ue++,"".concat(We,".").concat(Ue));return{rid:t,cb:function(n){return e(Object.assign(Object.assign({},n),{rid:t,mode:c}))}}},l=u(t),d={blockClass:Be(a),blockSelector:Fe(a)+(s?", #".concat(r):""),inlineStylesheet:o,emit:l.cb,sampling:{mousemoveCallback:250}};if(s){var f=(0,Ae.jU)(),h=!!f&&f.rrwebRecord;if(!f)throw new Error("Tried to start rrweb recording in iframe mode, but not in iframe");if(!n)throw new Error("Iframe mode requires that a widget callback be provided to startRecording");if(!h)return void Pe.warn("Tried to start rrweb recording in iframe mode, but no record fn injected");if(Pe.debug("[iframe] rrweb.startRecording (main), rid ".concat(l.rid)),Ie=h(d),Re)Pe.debug("[top/widget] rrweb.startRecording - widget recorder already running");else{var p=u(n);Pe.debug("[top/widget] rrweb.startRecording, rid ".concat(p.rid));var v={blockClass:a,blockSelector:["#".concat(De.Hb),a].filter(Boolean).join(","),inlineStylesheet:o,emit:p.cb,sampling:d.sampling};Re=Oe(v)}}else Pe.debug("[top] rrweb.startRecording (main), rid ".concat(l.rid)),Ie=Oe(d);Ne.rid=l.rid,Ne.mode=c}else Pe.error('Tried to start recording without widgetCb with "iframe-*" mode')}function qe(e){if((0,Ae.yL)())throw Error("Tried to stop recording from within iframe");Ie&&(Pe.debug("[top] rrweb.stopRecording ".concat(e?"(skip widget)":"")),Ie(),Ie=void 0),Re&&!e&&(Pe.debug("[top/widget] rrweb.stopRecordingWidget"),Re(),Re=void 0)}var ze=function(){if(Ne.rid)return Object.assign({type:xe.tw.IncrementalSnapshot,timestamp:Date.now(),data:{source:xe.yh.Scroll,id:1,x:(0,Ae.zb)().documentElement.scrollLeft,y:(0,Ae.zb)().documentElement.scrollTop}},Ne);Pe.info("Attempted to generate synthetic scroll event before recording started.")},Ge=function(){if(Ne.rid)return Object.assign({type:xe.tw.Custom,timestamp:Date.now(),data:{tag:xe.Bu.IFRAME_LOADING_EVENT_TAG,payload:void 0}},Ne);Pe.info("Attempted to generate custom iframe loading event before recording started.")}},2611:(e,t,n)=>{"use strict";n.d(t,{B6:()=>de,CD:()=>V,Cg:()=>T,D4:()=>g,DR:()=>R,E3:()=>m,Ez:()=>Y,FN:()=>E,Fu:()=>se,Gs:()=>j,HK:()=>B,Hj:()=>le,Hk:()=>z,MJ:()=>I,Ov:()=>ie,Px:()=>ae,QJ:()=>ne,Ts:()=>C,Vo:()=>H,WW:()=>W,ZP:()=>pe,Zt:()=>_,ah:()=>Q,bn:()=>re,c:()=>L,cp:()=>O,fv:()=>ee,gB:()=>fe,gS:()=>S,h2:()=>q,hR:()=>he,iP:()=>K,jD:()=>N,kf:()=>X,ld:()=>k,mP:()=>P,me:()=>te,o2:()=>Z,oU:()=>y,pU:()=>ce,qm:()=>ue,y2:()=>oe,yO:()=>b,zS:()=>F,zV:()=>w});var r=n(1002),i=n(5861),o=n(7757),a=n.n(o),s=n(6403),c=n(7109),u=n(3668),l=n(2795),d=n(7780),f=n(8998),h=n(6688),p=n(5164),v=(0,l.U)("app-slice"),m={org:{id:-1,name:"",available:!1,busy:!1,isWorkingHours:!0,callLimited:!1,widgetSettings:{connect:[],launcher:"video",hidden:!0,position:"right",answer:"ask",mode:"api",branding:"default",copy:{},afkTime:12e4,color:null,bgColor:null,orgLogoUrl:null,takeover:"no-ask",visitorVideo:"no-ask",assetLinking:"inline",showBookingAlways:!1,showChatAlways:!1,disableMobile:!1},integrations:{calendly:{enabled:!1},acuity:{enabled:!1},chilipiper:{enabled:!1}},pageRules:[],screeners:{},gateways:{},optinRecording:!1,feedbackForm:{feedbackQuestions:[]}},pageWidgetSettings:{},options:Object.assign({},f.W),screener:null,proactiveVideo:null,hasReceivedOrg:!1,top:null,left:null,stage:c.Hf.NEED_HELP,widgetExtent:"collapsed",isHelpPopupVisible:!1,isHelpModalVisible:!1,avatars:[],agents:[],darkMode:!1,isStreamEvents:!1,isMicrophoneWanted:!1,isCameraWanted:!1,isMicrophonePermissionGranted:!1,isCameraPermissionGranted:!1,isMicrophonePermissionDenied:!1,isCameraPermissionDenied:!1,isAutoplayAudioAllowed:!0,isRejectedIncomingVideoPlay:!1,audioDevices:[],videoDevices:[],preferredAudioDeviceId:void 0,preferredVideoDeviceId:void 0,mediaDeviceError:"",isVideoPlaying:!1,screenTakeoverOn:!1,showPermissionOverlay:!1,isAgentCamMuted:!1,isAgentMicMuted:!1,isMissedCall:!1,calendlyData:null,calendlyDataError:null,calendlySelectedMeetingType:"",hasNoAudioDevice:!1,wasPrematureDial:!1,isManuallyPromptingAudio:!1,showTakeoverOptin:!1,hasOptedIntoTakeover:!1,showRecordOptin:!1,isAfkDisconnected:!1,isPageVisible:!0,startCallOnPageVisible:!1,isIframeFailed:!1,rootElementId:null,isRequestingDisplayshare:!1,videoRenderer:"widget",showCallOptions:!1,uiPanel:"idle"},g=(0,s.hg)("app/updateMediaPermissions",function(){var e=(0,i.Z)(a().mark((function e(t,n){var r,i,o,s,c,u,l,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState().app,i=r.isMicrophonePermissionGranted,o=r.isMicrophonePermissionDenied,s=r.isCameraPermissionGranted,c=r.isCameraPermissionDenied,u=r.isAutoplayAudioAllowed,!("permissions"in navigator)){e.next=28;break}if(i){e.next=14;break}return e.prev=3,e.next=6,navigator.permissions.query({name:"microphone"});case 6:l=e.sent,i="granted"===l.state,o="denied"===l.state,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),v.debug("Microphone permission check failed",e.t0);case 14:if(s){e.next=26;break}return e.prev=15,e.next=18,navigator.permissions.query({name:"camera"});case 18:d=e.sent,s="granted"===d.state,c="denied"===d.state,e.next=26;break;case 23:e.prev=23,e.t1=e.catch(15),v.debug("Camera permission check failed",e.t1);case 26:e.next=29;break;case 28:v.info("Browser does not support navigator permissions");case 29:return!u&&(null==t?void 0:t.isFromClick)&&(v.debug("Update media permissions from click event set isAutoplayAudioAllowed true"),u=!0),e.abrupt("return",{isMicrophonePermissionGranted:i,isMicrophonePermissionDenied:o,isCameraPermissionGranted:s,isCameraPermissionDenied:c,isAutoplayAudioAllowed:u});case 31:case"end":return e.stop()}}),e,null,[[3,11],[15,23]])})));return function(t,n){return e.apply(this,arguments)}}()),y=(0,s.hg)("app/enableMediaDevices",function(){var e=(0,i.Z)(a().mark((function e(t,n){var i,o,s,c,u,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.dispatch,o=n.getState,s=void 0!==t.audio?t.audio:o().app.isMicrophoneWanted,c=void 0!==t.video?t.video:o().app.isCameraWanted,!s&&!c){e.next=26;break}return u=setTimeout((function(){i(G(!0))}),200),e.prev=5,e.next=8,(0,h.VU)({audio:s,video:c});case 8:s&&i(W("granted")),c&&i(U("granted")),e.next=19;break;case 12:throw e.prev=12,e.t0=e.catch(5),v.warn("".concat(s||c?"Enable":"Disable"," devices failed"),{err:e.t0,audio:s,video:c}),"NotAllowedError"!==(l="object"===(0,r.Z)(e.t0)&&e.t0.name||"")&&"SecurityError"!==l||(s&&i(W("denied")),c&&i(U("denied"))),s&&"NotFoundError"===l&&i($(!0)),e.t0;case 19:return e.prev=19,i(g()),clearTimeout(u),i(G(!1)),e.finish(19);case 24:e.next=27;break;case 26:(0,h.jQ)();case 27:case"end":return e.stop()}}),e,null,[[5,12,19,24]])})));return function(t,n){return e.apply(this,arguments)}}()),b=(0,s.hg)("app/setPreferredMediaDevices",function(){var e=(0,i.Z)(a().mark((function e(t,n){var r,i,o,s,c,u,l,f,h,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.audioDeviceId,i=t.videoDeviceId,o=n.dispatch,s=n.getState,c=s().app,u=c.preferredAudioDeviceId,l=c.preferredVideoDeviceId,f=s().realtime,h=f.outgoingCameraAudioTrackId,p=f.outgoingCameraVideoTrackId,d.l.setPreferredMediaDevices(r,i),r!==u&&h&&v.debug("New mic, will change outgoing audio track"),i!==l&&p&&v.debug("New cam, will change outgoing video track"),e.next=9,o(y({audio:r,video:i}));case 9:return e.abrupt("return",{audioDeviceId:r,videoDeviceId:i});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),w=(0,s.hg)("app/populateMediaDevices",function(){var e=(0,i.Z)(a().mark((function e(t,n){var r,i,o,s,c,u,l,f,h,p,m,g,b;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,i=n.getState,o=i().app,s=o.preferredAudioDeviceId,c=o.preferredVideoDeviceId,u=i().realtime,l=u.outgoingCameraAudioTrackId,f=u.outgoingCameraVideoTrackId,e.next=5,d.l.getMediaDevices();case 5:return h=e.sent,e.next=8,d.l.getPreferredMediaDevices();case 8:if(p=e.sent,m=p.audio,g=p.video,0===h.audioInputDevices.length&&(v.warn("Populate media devices found no device",h),r($(!0))),b={},m&&s!==m&&l&&(b.audio=m),g&&c!==g&&f&&(b.video=g),!b.audio&&!b.video){e.next=18;break}return e.next=18,r(y(b));case 18:return e.abrupt("return",Object.assign(Object.assign({},h),{preferredAudioDeviceId:m,preferredVideoDeviceId:g}));case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=(0,s.hg)("app/getCalendlyData",function(){var e=(0,i.Z)(a().mark((function e(t,n){var r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,i=r().realtime.clientKey,o=r().realtime.sbid,e.next=5,(0,u.Zt)(i,o);case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=(0,s.hg)("app/acceptTakeover",(function(e,t){var n=t.dispatch;return e?((0,h.Ew)(),n(F(!0))):(0,h.d2)(c.xz.REJECT_TAKEOVER),e})),E=(0,s.hg)("app/attemptDial",(function(e,t){var n=t.dispatch,r=t.getState,i=r().app.stage,o=r().realtime.serverStatus,a=r().app.org,s=a.available,u=a.busy,l=!!(null==e?void 0:e.wantsChat);return"connected"!==o?(v.debug("Tried to dial, but not connected, will flag premature dial"),n(J()),!1):i!==c.Hf.ACTIVE_CALL&&s&&!u?(n(N(c.Hf.DIALING)),(0,h.yQ)({wantsChat:l}),!0):(n(Z({missed:s&&u})),!1)})),C=(0,s.hg)("app/showHelpPopup",(function(e,t){var n=t.dispatch,r=(0,t.getState)().app;(r.stage===c.Hf.NEED_HELP||r.agents.length>0)&&n(ue(!0))})),T=(0,s.hg)("app/showHelpModal",(function(e,t){var n=t.dispatch,r=(0,t.getState)().app;(r.stage===c.Hf.NEED_HELP||r.agents.length>0)&&n(le(!0))})),k=(0,s.hg)("app/expandRestingWidget",(function(e,t){var n=t.dispatch,r=(0,t.getState)().app;if(r.stage===c.Hf.NEED_HELP){var i=r.org,o=i.available,a=i.busy,s=i.callLimited;o&&!a&&!s||n(Z({missed:!1}))}n(ce("normal"))})),O=(0,s.hg)("app/collapseExpandedWidget",(function(e,t){var n=t.dispatch,r=(0,t.getState)(),i=r.app,o=r.chat,a=r.realtime;(i.stage===c.Hf.ANSWER_CALL||i.stage===c.Hf.ACTIVE_CALL&&o.isChatExpanded&&!a.hasAcceptedCall)&&n((0,p.M0)()),[c.Hf.ACTIVE_CALL,c.Hf.NEED_HELP].includes(i.stage)||(n(N(c.Hf.NEED_HELP)),i.stage===c.Hf.DIALING&&(0,h.bW)())})),I=(0,s.hg)("app/stopDisplayshare",(function(){(0,h.sn)()})),R=(0,s.hg)("app/pageVisibilityChanged",(function(e,t){var n=t.dispatch;return v.debug("Page visibility changed to ".concat(e)),e&&n((0,p.jG)()),e})),x=function(e,t){var n=Object.assign(Object.assign({},e.org),t);n.widgetSettings=Object.assign(Object.assign({},e.org.widgetSettings),n.widgetSettings),n.widgetSettings.copy=Object.assign(Object.assign({},e.org.widgetSettings.copy),n.widgetSettings.copy),e.org=n},A=function(e){e.stage=c.Hf.ACTIVE_CALL},M=(0,s.oM)({name:"app",initialState:m,reducers:{iframeFailed:function(e){e.isIframeFailed=!0},setOrg:function(e,t){e.hasReceivedOrg=!0,x(e,t.payload)},setStage:function(e,t){e.stage===c.Hf.ACTIVE_CALL&&[c.Hf.DIALING,c.Hf.BOOK_MEETING,c.Hf.PROACTIVE_VIDEO].includes(t.payload)?v.warn("Cannot set stage to ".concat(t.payload," when stage is ").concat(e.stage)):([c.Hf.ACTIVE_CALL,c.Hf.ANSWER_CALL].includes(t.payload)&&(e.startCallOnPageVisible=!1),e.stage=t.payload)},setMousePosition:function(e,t){e.top=t.payload.top,e.left=t.payload.left},setScreenTakeover:function(e,t){e.screenTakeoverOn=t.payload},setIsStreamEvents:function(e,t){e.isStreamEvents=t.payload},setMicrophonePermission:function(e,t){e.isMicrophonePermissionGranted="granted"===t.payload,e.isMicrophonePermissionDenied="denied"===t.payload,(e.isMicrophonePermissionGranted||e.isMicrophonePermissionDenied)&&(e.showPermissionOverlay=!1)},setCameraPermission:function(e,t){e.isCameraPermissionGranted="granted"===t.payload,e.isCameraPermissionDenied="denied"===t.payload,(e.isCameraPermissionGranted||e.isCameraPermissionDenied)&&(e.showPermissionOverlay=!1)},setIsRejectedIncomingVideoPlay:function(e,t){e.isRejectedIncomingVideoPlay=t.payload,t.payload&&(e.isAutoplayAudioAllowed=!1)},setServerInitData:function(e,t){e.agents=t.payload.agents,e.avatars=e.agents.map((function(e){return e.avatar})).filter((function(e){return!!e})),e.hasReceivedOrg=!0,x(e,t.payload.org)},agentNotAvailable:function(e,t){[c.Hf.ACTIVE_CALL,c.Hf.ANSWER_CALL].includes(e.stage)||(e.stage=c.Hf.BOOK_MEETING,e.isMissedCall=t.payload.missed)},setCalendlySelectedMeetingType:function(e,t){e.calendlySelectedMeetingType=t.payload},setAgentMuteStates:function(e,t){e.isAgentCamMuted=t.payload.isAgentCamMuted,e.isAgentMicMuted=t.payload.isAgentMicMuted},setShowPermissionOverlay:function(e,t){e.showPermissionOverlay=t.payload},setHasNoAudioDevice:function(e,t){e.hasNoAudioDevice=t.payload},callReady:function(e,t){var n;e.stage===c.Hf.DIALING?(v.debug("Setting stage to ACTIVE_CALL from DIALING on callReady"),A(e)):(null===(n=t.payload)||void 0===n?void 0:n.accepted)?(v.debug("Setting stage to ACTIVE_CALL on callReady since call was already accepted"),A(e)):e.stage!==c.Hf.ACTIVE_CALL&&(e.isPageVisible?(v.debug("Setting stage to ANSWER_CALL on callReady"),e.stage=c.Hf.ANSWER_CALL):(v.debug("Setting startCallOnPageVisible true on callReady"),e.startCallOnPageVisible=!0))},clearMediaDeviceError:function(e){e.mediaDeviceError=""},setIsPlayingVideo:function(e,t){e.isVideoPlaying=t.payload},prematureDial:function(e){e.wasPrematureDial=!0},setIsManuallyPromptingAudio:function(e,t){e.isManuallyPromptingAudio=t.payload},showTakeoverModal:function(e,t){e.showTakeoverOptin=t.payload},showRecordingOptinModal:function(e,t){e.showRecordOptin=t.payload},setIsAfkDisconnected:function(e,t){e.isAfkDisconnected=t.payload},setPageWidgetSettings:function(e,t){e.pageWidgetSettings=t.payload},setScreener:function(e,t){e.screener=t.payload},setProactiveVideo:function(e,t){e.proactiveVideo=t.payload;var n=[c.Hf.ANSWER_CALL,c.Hf.ACTIVE_CALL,c.Hf.BOOK_MEETING];e.proactiveVideo&&e.org.available&&!e.org.busy&&!n.includes(e.stage)?e.stage=c.Hf.PROACTIVE_VIDEO:e.proactiveVideo||e.stage!==c.Hf.PROACTIVE_VIDEO||(e.stage=c.Hf.NEED_HELP)},setOptions:function(e,t){e.options=Object.assign(Object.assign(Object.assign({},f.W),e.options),t.payload),"boolean"==typeof t.payload.expanded&&("collapsed"===e.widgetExtent&&t.payload.expanded?e.widgetExtent="normal":"collapsed"===e.widgetExtent||t.payload.expanded||(e.widgetExtent="collapsed"))},rootElementCreated:function(e,t){e.rootElementId=t.payload},setIsRequestingDisplayshare:function(e,t){e.isRequestingDisplayshare=t.payload},setVideoRenderer:function(e,t){e.videoRenderer=t.payload},setWidgetExtent:function(e,t){e.widgetExtent=t.payload},setHelpPopupVisible:function(e,t){e.isHelpPopupVisible=t.payload},setHelpModalVisible:function(e,t){e.isHelpModalVisible=t.payload},callOptionsShown:function(e,t){e.showCallOptions=t.payload},setOrgPropertiesFromError:function(e,t){var n=void 0===t.payload.available?e.org.available:t.payload.available,r=void 0===t.payload.hidden?e.org.widgetSettings.hidden:t.payload.hidden;x(e,Object.assign(Object.assign({},e.org),{available:n,widgetSettings:Object.assign(Object.assign({},e.org.widgetSettings),{hidden:r})}))},uiPanelChanged:function(e,t){e.uiPanel=t.payload}},extraReducers:function(e){e.addCase(y.pending,(function(e,t){void 0!==t.meta.arg.audio&&(e.isMicrophoneWanted=!!t.meta.arg.audio),void 0!==t.meta.arg.video&&(e.isCameraWanted=!!t.meta.arg.video)})),e.addCase(g.fulfilled,(function(e,t){var n=t.payload;e.isMicrophonePermissionGranted=n.isMicrophonePermissionGranted,e.isMicrophonePermissionDenied=n.isMicrophonePermissionDenied,e.isCameraPermissionGranted=n.isCameraPermissionGranted,e.isCameraPermissionDenied=n.isCameraPermissionDenied,e.isAutoplayAudioAllowed=n.isAutoplayAudioAllowed,(e.isMicrophonePermissionGranted||e.isMicrophonePermissionDenied||e.isCameraPermissionGranted||e.isCameraPermissionDenied)&&(e.showPermissionOverlay=!1)})),e.addCase(_.fulfilled,(function(e,t){e.calendlyData=t.payload,e.calendlyDataError=null})),e.addCase(_.rejected,(function(e,t){e.calendlyDataError=t.error.message||"Failed to fetch calendly data"})),e.addCase(y.rejected,(function(e,t){e.mediaDeviceError=t.error.message||"Could not enable media devices for unknown reason"})),e.addCase(b.pending,(function(e){e.mediaDeviceError=""})),e.addCase(b.fulfilled,(function(e,t){var n=t.payload,r=n.audioDeviceId,i=n.videoDeviceId;e.preferredAudioDeviceId=r,e.preferredVideoDeviceId=i})),e.addCase(b.rejected,(function(e,t){e.mediaDeviceError=t.error.message||"Unknown reason"})),e.addCase(w.fulfilled,(function(e,t){var n=t.payload,r=n.preferredAudioDeviceId,i=n.preferredVideoDeviceId;e.audioDevices=t.payload.audioInputDevices,e.videoDevices=t.payload.videoInputDevices,e.preferredAudioDeviceId=r,e.preferredVideoDeviceId=i})),e.addCase(S.fulfilled,(function(e,t){e.hasOptedIntoTakeover=t.payload})),e.addCase(p.Qh.pending,(function(e){e.stage!==c.Hf.ACTIVE_CALL&&(v.debug("Setting stage to ACTIVE_CALL from [".concat(e.stage,"] on callAccepted")),A(e))})),e.addCase(p.M0.pending,(function(e){e.stage=c.Hf.NEED_HELP})),e.addCase(p.Ve.pending,(function(e){c.Hf.ACTIVE_CALL===e.stage&&(e.stage=c.Hf.CALL_ENDED,e.showPermissionOverlay=!1),c.Hf.ANSWER_CALL===e.stage&&(e.stage=c.Hf.NEED_HELP),e.startCallOnPageVisible=!1,e.isMicrophoneWanted=!1,e.isCameraWanted=!1})),e.addCase(R.pending,(function(e,t){e.isPageVisible=t.meta.arg})),e.addCase(E.pending,(function(e){e.wasPrematureDial=!1})),e.addCase(I.fulfilled,(function(e){e.isRequestingDisplayshare=!1}))}}),D=M.actions,L=D.iframeFailed,P=D.setOrg,N=D.setStage,j=D.setMousePosition,F=D.setScreenTakeover,B=D.setIsStreamEvents,W=D.setMicrophonePermission,U=D.setCameraPermission,V=D.setIsRejectedIncomingVideoPlay,H=D.setServerInitData,Z=D.agentNotAvailable,q=D.setCalendlySelectedMeetingType,z=D.setAgentMuteStates,G=D.setShowPermissionOverlay,$=D.setHasNoAudioDevice,K=D.callReady,Y=D.clearMediaDeviceError,X=D.setIsPlayingVideo,J=D.prematureDial,Q=(D.setIsManuallyPromptingAudio,D.showTakeoverModal),ee=D.showRecordingOptinModal,te=(D.setIsAfkDisconnected,D.setPageWidgetSettings),ne=D.setScreener,re=D.setProactiveVideo,ie=D.setOptions,oe=D.rootElementCreated,ae=D.setIsRequestingDisplayshare,se=D.setVideoRenderer,ce=D.setWidgetExtent,ue=D.setHelpPopupVisible,le=D.setHelpModalVisible,de=D.callOptionsShown,fe=D.setOrgPropertiesFromError,he=D.uiPanelChanged;const pe=M.reducer},9513:(e,t,n)=>{"use strict";n.d(t,{EL:()=>M,JM:()=>S,Lc:()=>x,Ns:()=>v,QY:()=>k,T2:()=>D,XE:()=>T,XF:()=>A,ZP:()=>L,Zw:()=>_,bE:()=>p,f3:()=>m,iL:()=>b,ky:()=>C,m6:()=>I,tt:()=>y,ux:()=>g,vi:()=>R});var r=n(2982),i=n(5861),o=n(7757),a=n.n(o),s=n(6403),c=n(2222),u=n(3668),l=n(6688),d=n(7765),f=n(7109),h=n(2611),p=(0,s.hg)("realtime/sendChatMessage",function(){var e=(0,i.Z)(a().mark((function e(t,n){var r,i,o,s,c,u,d,f,h,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,i=n.getState,o=n.requestId,s=i().realtime,c=s.sbid,u=s.helpedBy,d=s.helpedByAvatar,f=s.helpedByName,h=s.helpedByTitle,r(O({args:t,agent:{id:u,name:f,avatar:d,title:h},sbid:c||"",requestId:o})),e.next=5,(0,l.fD)(t);case 5:if(p=e.sent){e.next=8;break}throw new Error("No connection to server");case 8:if(!("error"in p)){e.next=10;break}throw new Error(p.error);case 10:return e.abrupt("return",p.data);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v=(0,s.hg)("realtime/fetchMoreChatMessages",(0,i.Z)(a().mark((function e(){var t,n,r,i,o,s,c,l,d,f,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:{reset:!1},n=t.reset,r=h.length>1?h[1]:void 0,i=r.getState,o=i(),s=o.chat.chatMessagesCursor,c=o.realtime,l=c.sbid,d=c.clientKey){e.next=5;break}throw new Error("Cannot fetch messages until clientKey is set");case 5:if(l){e.next=7;break}throw new Error("Cannot fetch messages until sbid is set");case 7:return e.next=9,(0,u.b6)(l,d,n?null:s);case 9:return f=e.sent,e.abrupt("return",f.data);case 11:case"end":return e.stop()}}),e)})))),m=(0,s.hg)("chat/receivedChatMessage",function(){var e=(0,i.Z)(a().mark((function e(t,n){var r,i,o,s,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,i=n.dispatch,o=r(),s=o.app.isPageVisible,c=o.chat,u=c.unreadMessages,!c.chatMessages.find((function(e){return e.id===t.id}))){e.next=5;break}return e.abrupt("return");case 5:return s||i(k(u+1)),i((0,h.hR)("chat")),e.next=9,i((0,h.ld)());case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g=(0,s.hg)("chat/subscribeToConversation",function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.prev=1,e.next=4,(0,d.ux)(t);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),new Error("Server denied subsciption to conversation (id=".concat(t,")"));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),y=(0,s.hg)("chat/unsubscribeFromConversation",function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.prev=1,e.next=4,(0,d.tt)(t);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),new Error("Server denied unsubscribe from conversation (id=".concat(t,")"));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),b=(0,s.hg)("chat/registerImage",function(){var e=(0,i.Z)(a().mark((function e(t,n){var r,i,o,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,i=r(),o=i.realtime,s=o.sbid,c=o.clientKey){e.next=4;break}throw new Error("Cannot fetch messages until clientKey is set");case 4:if(s){e.next=6;break}throw new Error("Cannot fetch messages until sbid is set");case 6:return e.next=8,(0,u.iL)(s,c,t);case 8:return l=e.sent,e.abrupt("return",l.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),w=(0,s.oM)({name:"chat",initialState:{conversationId:null,conversationAssigneeId:null,isChatExpanded:!1,isAgentTyping:!1,hasFetchedChat:!1,chatMessages:[],chatMessagesCursor:null,unreadMessages:0,chatImageUploadDataUrl:null,chatImageUploadDataUrlDimensions:null,chatImageUploadId:null,chatImageUploadProgress:0,chatImageUploadError:null},reducers:{setIsChatExpanded:function(e,t){e.isChatExpanded=t.payload},setIsAgentTyping:function(e,t){e.isAgentTyping=t.payload},setUnreadMessages:function(e,t){e.unreadMessages=t.payload},receivedConversation:function(e,t){t.payload&&(e.conversationId=t.payload.id,e.conversationAssigneeId=t.payload.assigneeId)},addPendingChatMessage:function(e,t){var n,i=t.payload.args.content,o=(null===(n=i.blocks[0])||void 0===n?void 0:n.text)||"";e.chatMessages=[].concat((0,r.Z)(e.chatMessages),[{id:"pending-msg-".concat(t.payload.requestId),pending:!0,timestamp:Date.now(),from:t.payload.sbid,visitorId:t.payload.sbid,agent:t.payload.agent,text:o,content:i}])},chatImageUploadDataUrlChanged:function(e,t){e.chatImageUploadDataUrl=t.payload.chatImageUploadDataUrl,e.chatImageUploadDataUrlDimensions=t.payload.chatImageUploadDataUrlDimensions},chatImageUploadIdChanged:function(e,t){e.chatImageUploadId=t.payload},chatImageUploadProgressChanged:function(e,t){e.chatImageUploadProgress=t.payload},chatImageUploadErrorChanged:function(e,t){e.chatImageUploadError=t.payload},resetChat:function(e){e.hasFetchedChat=!1,e.chatMessages=[],e.chatMessagesCursor=null}},extraReducers:function(e){e.addCase(v.fulfilled,(function(e,t){var n;e.hasFetchedChat=!0,e.chatMessages=(null===(n=t.meta.arg)||void 0===n?void 0:n.reset)?t.payload.items:e.chatMessages.concat(t.payload.items),e.chatMessagesCursor=t.payload.cursor})).addCase(v.rejected,(function(e){e.hasFetchedChat=!0})),e.addCase(p.fulfilled,(function(e,t){e.chatMessages=[].concat((0,r.Z)(e.chatMessages),[t.payload]).filter((function(e){return e.id!=="pending-msg-".concat(t.meta.requestId)}))})).addCase(p.rejected,(function(e,t){e.chatMessages=e.chatMessages.filter((function(e){return e.id!=="pending-msg-".concat(t.meta.requestId)}))})),e.addCase(m.fulfilled,(function(e,t){t.payload&&(e.chatMessages.find((function(e){var n;return e.id===(null===(n=t.payload)||void 0===n?void 0:n.id)}))||(e.isChatExpanded=!0,e.isAgentTyping=!1,e.chatMessages=[].concat((0,r.Z)(e.chatMessages),[t.payload])))}))}}),_=(0,c.P1)((function(e){return e.chat.chatMessages}),(function(e){return e.chat.isAgentTyping}),(function(e){return e.realtime.helpedBy}),(function(e){return e.realtime.helpedByName}),(function(e){return e.realtime.helpedByTitle}),(function(e){return e.realtime.helpedByAvatar}),(function(e){return e.realtime.sbid}),(function(e,t,n,i,o,a,s){var c=(0,r.Z)(e).sort((function(e,t){return e.pending!==t.pending?e.pending?-1:1:t.timestamp-e.timestamp}));return n&&s&&t&&c.unshift({id:"agent-typing",from:n,visitorId:s,agent:{id:n,name:i,title:o,avatar:a},timestamp:Date.now(),text:"".concat(i," is typing..."),content:{blocks:[{type:f._y.TYPING}]}}),c})),S=function(e){return!!e.chat.chatMessagesCursor},E=w.actions,C=E.setIsAgentTyping,T=E.setIsChatExpanded,k=E.setUnreadMessages,O=E.addPendingChatMessage,I=E.receivedConversation,R=E.chatImageUploadDataUrlChanged,x=E.chatImageUploadIdChanged,A=E.chatImageUploadProgressChanged,M=E.chatImageUploadErrorChanged,D=E.resetChat;const L=w.reducer},7736:(e,t,n)=>{"use strict";n.d(t,{B2:()=>i,ZP:()=>c,aq:()=>s,rn:()=>a});var r=(0,n(6403).oM)({name:"demo",initialState:{isDemoing:!1,isFakingVideo:!1},reducers:{setIsDemoing:function(e,t){e.isDemoing=t.payload},setIsFakingVideo:function(e,t){e.isFakingVideo=t.payload}}}),i=function(e){return e.demo.isDemoing},o=r.actions,a=o.setIsDemoing,s=o.setIsFakingVideo;const c=r.reducer},5592:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r.Q});var r=n(3078)},5164:(e,t,n)=>{"use strict";n.d(t,{sJ:()=>R,xn:()=>A,Kq:()=>O,Ie:()=>W,yn:()=>U,Ax:()=>k,Qh:()=>Z,Ve:()=>G,M0:()=>q,tq:()=>J,jv:()=>K,ZP:()=>fe,li:()=>z,Ww:()=>re,XC:()=>V,SI:()=>ne,fH:()=>ue,p:()=>de,E3:()=>T,JF:()=>ie,z5:()=>oe,Fy:()=>ce,m7:()=>se,er:()=>x,mr:()=>Y,kt:()=>P,f9:()=>N,$J:()=>F,mg:()=>j,lk:()=>L,Rn:()=>D,X$:()=>I,Yk:()=>le,jG:()=>ee,LI:()=>Q,T:()=>te});var r,i=n(5861),o=n(7757),a=n.n(o),s=n(6403),c=n(2222),u=n(7856),l=n(7109),d=n(6688),f=n(2795),h=n(9046),p=n(694),v=n(8743),m=n(8273),g=n(7102),y=n(7765);function b(){if(!r){var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");t.fillStyle="#1E2749",t.fillRect(0,0,1,1),r=e.captureStream(1)}return r}var w=n(2611),_=n(5713),S=n(9513),E=(0,f.U)("realtime-slice"),C=p.u.reduce((function(e,t){return Object.assign(Object.assign({},e),t.reducers)}),{}),T={clientKey:null,initialDataStatus:"none",connectTriggers:null,raisedConnectTriggers:[],lastRaisedConnectTrigger:null,lastServerDisconnectTime:0,serverStatus:"disconnected",serverConnectCount:0,serverCommitHash:null,serverProtocolVersion:null,serverTimeDelta:null,sid:null,isIntroducedToServer:!1,serverErrorCode:null,peerStatus:"disconnected",peerCommitHash:"",peerProtocolVersion:null,hasAcceptedCall:!1,hasAcceptedAnyCall:!1,isAwaitingDisplayshare:!1,outgoingCameraStreamId:null,outgoingCameraVideoTrackId:null,outgoingCameraAudioTrackId:null,outgoingDisplayStreamId:null,incomingCameraStreamId:null,incomingDisplayStreamId:null,isReceivingAudio:!1,isReceivingVideo:!1,lastVisitorActiveTime:0,isVisitorAway:!1,isInIframe:(0,h.yL)(),iframeLoadCount:0,isRrwebInjectedIntoIframe:!1,isRrwebRecording:!1,feDashboardState:null,apiIdentifyArg:null,apiAlertArg:null,sbid:null,url:window.location.href,urlTitle:document.title,userAgent:navigator.userAgent,isVisitorRequestingVideo:!1,helpedBy:0,helpedBySid:"",helpedByName:"",helpedByTitle:"",helpedByAvatar:"",isSpying:!1,isTakeover:!1,isTakeoverAccepted:!1,isDisplayshare:!1,isDisplayshareAccepted:!1,isRecording:!1,isRecordingAccepted:!1,isRecordingRejected:!1,isDisplaydemo:!1,isDisplaydemoAccepted:!1,isVideo:!1,isVideoAccepted:!1,orgId:0,customId:"",isVisitorVideoAllowed:!0,callStartTime:0},k=(0,s.hg)("realtime/apiIdentify",function(){var e=(0,i.Z)(a().mark((function e(t,n){var r,i,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.dispatch,i=n.getState,o=n.rejectWithValue,i().realtime.isIntroducedToServer){e.next=5;break}return E.debug("Tried to identify visitor before connection ready"),e.abrupt("return",o(t));case 5:return s=i().realtime.sbid,e.next=8,(0,d.zA)(t);case 8:(null==(c=e.sent)?void 0:c.sbid)&&c.sbid!==s&&(E.info("Updating sbid from identity response (".concat(t.customId,"): ").concat(s," -> ").concat(c.sbid)),(0,h.O9)(c.sbid,i().app.org.id),r(Y(c.sbid)));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),O=(0,s.hg)("realtime/apiAlert",(function(e,t){var n=t.getState,r=t.rejectWithValue;if(!n().realtime.isIntroducedToServer)return E.debug("Tried to send api alert before connection ready"),r(e);(0,y.O1)(e)})),I=(0,s.hg)("realtime/socketStatusChanged",function(){var e=(0,i.Z)(a().mark((function e(t,n){var r,i,o,s,c,l,d,f,p,v,m,g,b,C,T,k,O;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.status,i=t.disconnectCode,o=n.dispatch,s=n.getState,c="connecting"===s().realtime.serverStatus,l=s().realtime,d=l.sid,f=l.sbid,p=l.url,v=l.urlTitle,m=l.userAgent,!c||"connected"!==r){e.next=31;break}if(e.prev=5,f){e.next=8;break}throw new Error("No sbid, cannot introduce");case 8:return g={sbid:f,url:p,urlTitle:v,userAgent:m,referrer:document.referrer||"",networkStats:(0,h.mj)(),isPageVisible:!(0,h.nC)()},e.next=11,(0,y.S)(g);case 11:b=e.sent,C=b.sid,T=b.initData,k=b.update,O=b.conversation,o(X({sid:C,status:r,disconnectCode:i})),o(ae(!0)),o((0,w.Vo)(T)),o(te(k)),o((0,S.m6)(O)),(0,_.Tm)("sb:initialized"),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(5),E.debug("Introduction failed ".concat(e.t0)),(0,_.sA)(e.t0),e.t0===u.jc.ACTION_RESPONSE_TIMEOUT&&(0,y.lt)();case 29:e.next=32;break;case 31:o(X({sid:d,status:r,disconnectCode:i}));case 32:case"end":return e.stop()}}),e,null,[[5,24]])})));return function(t,n){return e.apply(this,arguments)}}()),R=(0,s.hg)("realtime/acceptDisplayshare",function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.prev=1,e.next=4,(0,y.M)();case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),E.warn("Failed to get display stream",{error:e.t0}),(0,y.d2)(l.xz.STOP_DISPLAYSHARE),e.abrupt("return",!1);case 11:e.next=14;break;case 13:(0,y.d2)(l.xz.REJECT_DISPLAYSHARE);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),x=(0,s.hg)("realtime/requestAllowVideo",(function(e){return(0,y.nJ)({isVisitorRequestingVideo:e}),e})),A=(0,s.hg)("realtime/acceptRecording",(function(e){return(0,y.nJ)({isRecordingAccepted:e,isRecordingRejected:!e}),e})),M=(0,s.oM)({name:"realtime",initialState:T,reducers:Object.assign({clientKeyReady:function(e,t){e.clientKey=t.payload},sbidChanged:function(e,t){e.sbid=t.payload},serverStatusChanged:function(e,t){var n=t.payload,r=n.sid,i=n.status,o=n.disconnectCode;"connected"===e.serverStatus&&"disconnected"===i&&(e.lastServerDisconnectTime=Date.now()),"connected"===i&&e.serverStatus!==i&&e.serverConnectCount++,e.serverStatus=i,e.sid=r,e.serverErrorCode=o,"disconnected"!==i&&(e.serverErrorCode=null)},clearServerErrorCode:function(e){e.serverErrorCode=null},visitorUpdated:function(e,t){return Object.assign(Object.assign({},e),t.payload)},iframeLoaded:function(e){e.iframeLoadCount++},feDashboardStateUpdated:function(e,t){e.feDashboardState=t.payload},outgoingCameraStreamChanged:function(e,t){var n=t.payload;e.outgoingCameraAudioTrackId=n.outgoingCameraAudioTrackId,e.outgoingCameraVideoTrackId=n.outgoingCameraVideoTrackId,e.outgoingCameraStreamId=n.outgoingCameraStreamId},outgoingDisplayStreamChanged:function(e,t){e.outgoingDisplayStreamId=t.payload},visitorAway:function(e,t){var n=t.payload;e.isVisitorAway!==n&&(E.debug("Visitor ".concat(n?"is away from":"has returned to"," page")),e.isVisitorAway=n)},visitorActive:function(e){e.lastVisitorActiveTime=Date.now(),e.isVisitorAway=!1},urlChanged:function(e,t){e.url=t.payload.url,e.urlTitle=t.payload.urlTitle}},C),extraReducers:function(e){e.addCase(k.fulfilled,(function(e){e.apiIdentifyArg=null})),e.addCase(k.rejected,(function(e,t){t.payload?e.apiIdentifyArg=t.payload:E.warn("Got unexpected rejection on apiIdentify",t.error)})),e.addCase(O.fulfilled,(function(e){e.apiAlertArg=null})),e.addCase(O.rejected,(function(e,t){t.payload?e.apiAlertArg=t.payload:E.warn("Got unexpected rejection on apiAlert",t.error)})),e.addCase(x.fulfilled,(function(e,t){e.isVisitorRequestingVideo=t.payload})),e.addCase(R.pending,(function(e){e.isAwaitingDisplayshare=!0})),e.addCase(R.fulfilled,(function(e){e.isAwaitingDisplayshare=!1})),e.addCase(R.rejected,(function(e){e.isAwaitingDisplayshare=!1})),p.u.forEach((function(t){Object.keys(t.thunks).forEach((function(n){Object.keys(t.thunkReducers[n]||{}).forEach((function(r){e.addCase(t.thunks[n][r],t.thunkReducers[n][r])}))}))}))}}),D=((0,c.P1)((function(e){return e.realtime.outgoingCameraStreamId}),(function(e){return e.realtime.peerStatus}),(function(e,t){return e&&"connected"===t?(0,y.Ho)():null})),(0,c.P1)((function(e){return e.realtime.outgoingCameraVideoTrackId}),(function(e){return e.demo.isFakingVideo}),(function(e,t){var n;return t?(null===(n=b())||void 0===n?void 0:n.getVideoTracks()[0])||null:e?(0,y.DZ)():null}))),L=(0,c.P1)((function(e){return e.realtime.outgoingCameraAudioTrackId}),(function(e){return e?(0,y.iD)():null})),P=(0,c.P1)((function(e){return e.realtime.incomingCameraStreamId}),(function(e){return e.realtime.peerStatus}),(function(e){return e.demo.isDemoing}),(function(e,t,n){return n?b():e&&"connected"===t?(0,y.NM)():null})),N=(0,c.P1)((function(e){return e.realtime.incomingDisplayStreamId}),(function(e){return e.realtime.isDisplaydemo}),(function(e){return e.realtime.peerStatus}),(function(e,t,n){return e&&t&&"connected"===n?(0,y.S9)():null})),j=(0,c.P1)((function(e){return e.realtime.isRecording}),(function(e){return e.realtime.isRecordingAccepted}),(function(e){return e.app.org.optinRecording}),(function(e,t,n){return e&&(!n||n&&t)})),F=function(e){return!!e.realtime.helpedBy&&e.realtime.isVideo&&("connected"!==e.realtime.peerStatus||"connected"!==e.realtime.serverStatus)},B=m.S.thunks,W=B.apiConnect,U=B.apiDisconnect,V=g.r.thunks.fetchInitialData,H=v.H.thunks,Z=H.callAccepted,q=H.callRejected,z=H.endCallWanted,G=H.callEnded,$=M.actions,K=$.clientKeyReady,Y=$.sbidChanged,X=($.connectTriggersChanged,$.serverStatusChanged),J=$.clearServerErrorCode,Q=$.visitorAway,ee=$.visitorActive,te=$.visitorUpdated,ne=$.iframeLoaded,re=$.feDashboardStateUpdated,ie=$.outgoingCameraStreamChanged,oe=$.outgoingDisplayStreamChanged,ae=$.introducedToServer,se=$.raiseConnectTrigger,ce=($.rrwebInjectedIntoIframe,$.peerStatusUpdated),ue=$.incomingCameraStreamChanged,le=$.urlChanged,de=$.incomingDisplayStreamChanged;const fe=M.reducer},3078:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l,Z:()=>d});var r=n(8429),i=n(4890),o=n(2611),a=n(5164),s=n(7736),c=n(9513),u=(0,i.UY)({app:o.ZP,realtime:a.ZP,demo:s.ZP,chat:c.ZP}),l=r.v9;const d=u},7887:(e,t,n)=>{"use strict";n.d(t,{Dg:()=>a,_v:()=>c,aE:()=>o,dE:()=>s});var r=n(2222),i=n(8998),o=(0,r.P1)((function(e){return e.app.org.widgetSettings.mode}),(function(e){return e.app.options.mode}),(function(e,t){return"api"===e?t||i.W.mode:e})),a=(0,r.P1)((function(e){var t=e.realtime;return{id:t.helpedBy,name:t.helpedByName,title:t.helpedByTitle,avatar:t.helpedByAvatar,sid:t.helpedBySid}}),(function(e){return e})),s=(0,r.P1)((function(e){return e.app.org}),(function(e){return e.app.calendlyData}),(function(e,t){var n=e.integrations.calendly.defaultEventTypeUrl||"",r=!!(null==t?void 0:t.eventTypes.find((function(e){return e.schedulingUrl===n}))),i=1===(null==t?void 0:t.eventTypes.length)?t.eventTypes[0].schedulingUrl:"";return r?n:i})),c=(0,r.P1)((function(e){return e.app.org}),(function(e){return e.app.calendlyData}),(function(e,t){var n=e.integrations.calendly.defaultEventTypeSlug||"",r=!!(null==t?void 0:t.eventTypes.find((function(e){return e.slug===n}))),i=1===(null==t?void 0:t.eventTypes.length)?t.eventTypes[0].slug:"",o=r?n:i;return o?"https://calendly.com/".concat(null==t?void 0:t.userSlug,"/").concat(o):""}))},7220:(e,t,n)=>{"use strict";n.d(t,{TL:()=>s,ZP:()=>c});var r=n(6403),i=n(8429),o=n(3078),a=(0,r.xC)({reducer:o.Z,middleware:function(e){return e()},devTools:!1}),s=function(){return(0,i.I0)()};const c=a},7109:(e,t,n)=>{"use strict";n.d(t,{Cs:()=>a.Cs,EL:()=>u.E,Hf:()=>r,L0:()=>o,Oi:()=>u.O,QO:()=>c.QO,_y:()=>s._,r4:()=>c.r4,xz:()=>i});var r,i,o,a=n(3889),s=n(1151),c=n(2024),u=n(8931);!function(e){e.NEED_HELP="NEED_HELP",e.DIALING="DIALING",e.ANSWER_CALL="ANSWER_CALL",e.ACTIVE_CALL="ACTIVE_CALL",e.CALL_ENDED="CALL_ENDED",e.BOOK_MEETING="BOOK_MEETING",e.MEETING_CALENDAR="MEETING_CALENDAR",e.PROACTIVE_VIDEO="PROACTIVE_VIDEO"}(r||(r={})),function(e){e.STREAM_EVENTS="STREAM_EVENTS",e.START_VIDEO="START_VIDEO",e.STOP_VIDEO="STOP_VIDEO",e.STOP_TAKEOVER="STOP_SCREENSHARE",e.STOP_DISPLAYSHARE="STOP_DISPLAYSHARE",e.RESTART="RESTART",e.REJECT_CALL="REJECT_CALL",e.REJECT_TAKEOVER="REJECT_TAKEOVER",e.REJECT_DISPLAYSHARE="REJECT_DISPLAYSHARE"}(i||(i={})),function(e){e.event="event",e.trigger="trigger",e.widgetState="widgetState",e.buildInformation="buildInformation"}(o||(o={}))},6242:(e,t,n)=>{"use strict";n.d(t,{BF:()=>d,Fi:()=>h,Fo:()=>v,o2:()=>p,ox:()=>m,s2:()=>g,tC:()=>b,yp:()=>f});var r=n(5861),i=n(7757),o=n.n(i),a=n(785),s=n.n(a),c=n(9943);function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=s().osName,f=(s().osVersion,s().browser.isChrome),h=s().browser.isOpera,p=s().browser.isFirefox,v=s().browser.isSafari,m=s().browser.isEdge,g=s().isMobileDevice,y=["HeadlessChrome"];function b(){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){s().load((function(){if(_())return c.Z.info("Overriding bad browser check, widget will show no matter what!"),e("");if(!s().isWebSocketsSupported)return e("websocket support required");if(!s().isWebRTCSupported)return e("WebRTC support required");var t,n=u(y);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(navigator.userAgent.includes(r))return e("User agent contains disqualifier '".concat(r,"'"))}}catch(e){n.e(e)}finally{n.f()}return e("")}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){var e="_sbbrowseroverride_",t=document.location.search.substring(1),n=new URLSearchParams(t),r=n.get("sbbrowseroverride");if(r&&(["0","off","false"].includes(r)?localStorage.removeItem(e):localStorage.setItem(e,"true")),r){n.delete("sbbrowseroverride");var i=n.toString(),o="".concat(window.location.pathname).concat(i?"?".concat(i):"");history.replaceState(null,"",o)}return!!localStorage.getItem(e)}},3593:(e,t,n)=>{"use strict";n.d(t,{Ek:()=>u,Hb:()=>a,Q4:()=>o,YR:()=>i,ex:()=>c,gO:()=>l,uC:()=>r,uK:()=>s});var r="https://uploads.servicebell.com/video/woman-3-700.jpg",i="https://uploads.servicebell.com/video/woman-3-400.mp4",o="servicebell--live-playback-hide",a="svb-iframe-wrap",s="svb-iframe-container",c="svb-iframe-block-capture",u="WIDGETROOT",l=540},2212:(e,t,n)=>{"use strict";n.d(t,{E_:()=>i,Tu:()=>s,fr:()=>c});var r=n(5776),i=function(){return{IDLE_HELP_TEXT:"Talk to a<br />live agent",IDLE_HELP_TEXT_FOCUSED:"Start a<br />call now",IDLE_BUSY_TEXT:"Book a<br />meeting",IDLE_BUSY_TEXT_FOCUSED:"We're busy<br />right now",IDLE_AWAY_TEXT:"Book a<br />meeting",IDLE_AWAY_TEXT_FOCUSED:"We're gone<br />right now",ANSWER_CALL:"I'd like to join your session and speak with you",NEED_HELP_TITLE:"Chat with us",NEED_HELP_TEXT:"Agents are standing by to help you.",NEED_HELP_CTA:"Start a call",DIALING_TITLE:"We're on<br />our way",RECORDING_OPTIN_TITLE:"Allow agent to record?",RECORDING_OPTIN_TEXT:"An agent is requesting permission to begin recording."}},o=/<br\s?\/?>/,a=/(\r\n|\r|\n)/g,s=function(e){var t=e.split(o).map((function(e,t){return r.ZP.createElement(r.ZP.Fragment,{key:t},0!==t&&r.ZP.createElement("br",null),e.trim())}));return r.ZP.createElement(r.ZP.Fragment,null,t)},c=function(e){return e?e.replace(a,"<br />"):e}},9046:(e,t,n)=>{"use strict";n.d(t,{$Q:()=>l,AU:()=>_,D9:()=>y,GD:()=>E,Mf:()=>S,O9:()=>f,fI:()=>g,gX:()=>b,gm:()=>k,jU:()=>v,lp:()=>d,mj:()=>C,nC:()=>T,oU:()=>O,so:()=>w,ve:()=>s,yL:()=>p,zb:()=>m});var r=n(885),i=(n(7757),n(5776)),o=n(9943),a=(n(3668),n(2611),n(3593));function s(e,t){return new Promise((function(n,r){var i=t||document,o=i.createElement("script");o.src=e,o.onload=n,o.onerror=r,i.head.appendChild(o)}))}var c=function(e,t){for(var n="",r=!1,i=window.location.hostname.split("."),a=i.length-2;a>=0;a--){var s=i.slice(a,i.length).join(".");if(n="".concat(u(t),"=").concat(e,"; path=/; domain=").concat(s),document.cookie=n,document.cookie.includes(e)){r=!0;break}o.Z.debug("Failed to save cookie with domain ".concat(s))}r||(n="".concat(u(t),"=").concat(e,"; path=/"),document.cookie=n),o.Z.debug("Saved cookie ",n)},u=function(e){return"servicebelltoken_".concat(e)};function l(e){var t=d(e);return t||(o.Z.info("Could not find org namespaced sbid cookie, will look for legacy version"),(t=h("servicebelltoken"))&&(o.Z.info("Migrate legacy sbid cookie to namespaced"),c(t,e))),t&&"undefined"!==t&&"null"!==t?o.Z.debug("Found cookie ".concat(t," for org ").concat(e),{sbid:t,orgId:e}):(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),c(t,e)),t}function d(e){return h(u(e))}function f(e,t){e&&"undefined"!==e&&"null"!==e?d(t)?c(e,t):o.Z.warn("Attempted to update sbid cookie with ".concat(e," before one was set, doing nothing.")):o.Z.warn("Attempted to update sbid cookie with invalid sbid '".concat(e,"', doing nothing."))}function h(e){var t=(document.cookie||"").match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t&&t.pop()||""}function p(){return window.frameElement&&window.top&&"svb-top-body"===window.top.document.body.id}function v(){var e=document.getElementById(a.uK);return e?e.contentWindow:null}function m(){var e=document.getElementById(a.uK);return e?e.contentWindow.document:document}var g=function(e){var t=function(e){return e.replace("http://","").replace("https://","").split("/")[0]};return t(location.href)!==t(e)};function y(e){var t=(0,i.sO)(e);return(0,i.d4)((function(){t.current=e})),t.current}var b=function(){return"complete"===document.readyState||"interactive"===document.readyState?Promise.resolve():new Promise((function(e){document.addEventListener("DOMContentLoaded",e)}))},w=function(){var e="sb-root-".concat(Date.now()),t=document.createElement("div");return t.setAttribute("id",e),t},_=function(){var e="undefined"!=typeof globalThis?globalThis:window,t={RTCPeerConnection:e.RTCPeerConnection||e.mozRTCPeerConnection||e.webkitRTCPeerConnection,RTCSessionDescription:e.RTCSessionDescription||e.mozRTCSessionDescription||e.webkitRTCSessionDescription,RTCIceCandidate:e.RTCIceCandidate||e.mozRTCIceCandidate||e.webkitRTCIceCandidate};if(t.RTCPeerConnection)return t},S=function(e){return new Promise((function(t){return e.duration?e.duration&&Number.isFinite(e.duration)?t(e.duration):(e.addEventListener("timeupdate",(function n(){t(e.duration),e.removeEventListener("timeupdate",n)})),void(e.currentTime=1e101)):t(0)}))},E=function(e){var t=window,n=t.__sbwexpose__||{};t.__sbwexpose__=Object.assign(Object.assign({},n),e)},C=function(){if(navigator.connection)return{type:navigator.connection.type,effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,downlinkMax:navigator.connection.downlinkMax,rtt:navigator.connection.rtt};o.Z.debug("Browser does not support navigator.connection")},T=function(){return document.hidden||"hidden"===document.visibilityState},k=function(e){var t=new Audio("https://assets.servicebell.com/bell-ding.mp3");t.volume=.1,e?setTimeout((function(){t.play()}),e):t.play()},O=function(e,t){var n=e.split(":").map((function(e){return parseInt(e)})),i=(0,r.Z)(n,2),o=i[0],a=i[1],s=t.split(":").map((function(e){return parseInt(e)})),c=(0,r.Z)(s,2),u=o/a,l=c[0]/c[1],d=Math.min(u,l),f=Math.max(u,l);return function(e,t){var n=e/t;if(n<f&&n>d)return{width:e,height:t,widthDiff:0,heightDiff:0};if(e>t){var r=f*t;return{width:r,height:t,widthDiff:e-r,heightDiff:0}}var i=e/d;return{width:e,height:i,widthDiff:0,heightDiff:t-i}}}},8891:(e,t,n)=>{"use strict";n.d(t,{A2:()=>s,rS:()=>a});const r=new RegExp("[^#a-f\\d]","gi"),i=new RegExp("^#?[a-f\\d]{3}[a-f\\d]?$|^#?[a-f\\d]{6}([a-f\\d]{2})?$","i");var o=n(9943),a={colors:{colorStart:"#e77709",colorStartRgb:"231, 119, 9",colorStop:"#d99e00",colorStopRgb:"217, 158, 0",colorGradient:"linear-gradient(38.12deg, #e77709 4.57%, #d99e00 102.26%)",bgColor:"#1e2749",bgColorRgb:"30, 39, 73"}},s=function(e,t,n){var r=u(e||"".concat(a.colors.colorStart," ").concat(a.colors.colorStop),t||a.colors.bgColor),i=document.getElementById(n);if(!i)throw new Error("Tried to set theme style, but no Element found for rootId");r&&l(r,i)},c=function(e){return function(e,t={}){if("string"!=typeof e||r.test(e)||!i.test(e))throw new TypeError("Expected a valid hex string");let n=1;8===(e=e.replace(/^#/,"")).length&&(n=Number.parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),4===e.length&&(n=Number.parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const o=Number.parseInt(e,16),a=o>>16,s=o>>8&255,c=255&o,u="number"==typeof t.alpha?t.alpha:n;return"array"===t.format?[a,s,c,u]:"css"===t.format?`rgb(${a} ${s} ${c}${1===u?"":` / ${Number((100*u).toFixed(2))}%`})`:{red:a,green:s,blue:c,alpha:u}}(e,{format:"array"}).slice(0,3).join(", ")},u=function(e,t){if(/^(#(?:[0-9a-fA-F]{3}){1,2}(\s|$)){1,2}/.test(e)){var n=e.split(" ");a.colors.colorGradient=1===n.length?n[0]:"linear-gradient(38.12deg, ".concat(n[0]," 4.57%, ").concat(n[1]," 102.26%)"),a.colors.colorStart=n.length?n[0]:a.colors.colorStart,a.colors.colorStartRgb=c(a.colors.colorStart),a.colors.colorStop=2===n.length?n[1]:a.colors.colorStart,a.colors.colorStopRgb=c(a.colors.colorStop)}else o.Z.warn('OrgSetting.color is invalid, will ignore, was "'.concat(e,'"'));return/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(t)?(a.colors.bgColor=t,a.colors.bgColorRgb=c(t)):o.Z.warn('OrgSetting.bgColor is invalid, will ignore, was "'.concat(t,'"')),"\n    #sbstyle {\n      --custom-color-start: ".concat(a.colors.colorStart,";\n      --custom-color-start-rgb: ").concat(a.colors.colorStartRgb,";\n      --custom-color-stop: ").concat(a.colors.colorStop,";\n      --custom-color-stop-rgb: ").concat(a.colors.colorStopRgb,";\n      --custom-color-gradient: ").concat(a.colors.colorGradient,";\n      --custom-bgColor: ").concat(a.colors.bgColor,";\n      --custom-bgColor-rgb: ").concat(a.colors.bgColorRgb,";\n    }\n  ")},l=function(e,t){var n=document.createElement("style");n.textContent=e,t.prepend(n)}},5713:(e,t,n)=>{"use strict";n.d(t,{BR:()=>v,Qt:()=>d,Tm:()=>f,ce:()=>p,lg:()=>h,sA:()=>m});var r=n(5671),i=n(136),o=n(2963),a=n(1120),s=n(2407),c=n(9046),u=n(7220);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}function d(){var e=u.ZP.getState().app.stage,t=null,n=null,r=null;u.ZP.subscribe((function(){var i=u.ZP.getState().app,o=i.stage,a=i.org,s=i.hasReceivedOrg;o!==e&&f("sb:stagechange",{stage:o}),e=o,s&&(a.available===t&&a.busy===n&&a.isWorkingHours===r||f("sb:availabilitychange",{isAvailable:a.available,isBusy:a.busy,isWorkingHours:a.isWorkingHours}),t=a.available,n=a.busy,r=a.isWorkingHours)}))}function f(e,t){var n=new CustomEvent(e,{detail:t}),r=(0,c.jU)();r?r.dispatchEvent(n):window.dispatchEvent(n)}var h=function(e){(0,i.Z)(n,e);var t=l(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}((0,s.Z)(Error)),p=function(e){(0,i.Z)(n,e);var t=l(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}((0,s.Z)(Error)),v=function(e){(0,i.Z)(n,e);var t=l(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}((0,s.Z)(Error));function m(e){f("sb:error",{error:e})}},1950:(e,t,n)=>{"use strict";n.d(t,{T:()=>l,e:()=>d});var r=n(9046),i=n(9943),o=n(7220),a=n(7109),s=n(5164),c=window,u=0;function l(e){var t=c.Intercom;if(t){var n=(0,r.lp)(e);i.Z.debug("Added service_bell_id to intercom"),t("update",{service_bell_id:n}),t("onShow",(function(){o.ZP.dispatch((0,s.m7)(a.r4.INTERCOM))}))}else++u<25&&setTimeout((function(){return l(e)}),200)}function d(){var e=c.Intercom;e&&e("hide")}},8998:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var r={expanded:!1,blockClass:"sb-block",mode:"retrigger",answer:"ask"}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=c(e),a=o[0],s=o[1],u=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,c=r-i;s<c;s+=a)o.push(u(e,s,s+a>c?c:s+a));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8764:(e,t,n)=>{"use strict";const r=n(9742),i=n(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|v(e,t);let r=s(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const i=function(e){if(c.isBuffer(e)){const t=0|p(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return l(e),s(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function p(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function v(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return r?-1:z(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(u(e,o+r)!==u(t,r)){n=!1;break}if(n)return o}return-1}function w(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(Y(r))return a;e[n+a]=r}return a}function _(e,t,n,r){return $(z(t,e.length-n),e,n,r)}function S(e,t,n,r){return $(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return $(G(t),e,n,r)}function C(e,t,n,r){return $(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,c;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}t.kMaxLength=a,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(K(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(K(t,Uint8Array))i+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},c.byteLength=v,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,i){if(K(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n);for(let e=0;e<s;++e)if(u[e]!==l[e]){o=u[e],a=l[e];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function I(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=X[e[r]];return i}function A(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r,i){V(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function P(e,t,n,r,i){V(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,o){return t=+t,n>>>=0,o||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return t=+t,n>>>=0,o||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Z(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||D(this,e,t,n,Math.pow(2,8*n)-1,0);let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||D(this,e,t,n,Math.pow(2,8*n)-1,0);let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=J((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=J((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);D(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);D(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=J((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=J((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=c.isBuffer(e)?e:c.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const B={};function W(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function V(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new B.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Z(t,e.length-(n+1))}(r,i,o)}function H(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function Z(e,t,n){if(Math.floor(e)!==e)throw H(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=U(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=U(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function z(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function J(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},2114:e=>{"use strict";function t(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}e.exports=function(e,n,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof n&&(r=n,n=""),n&&(r.code=n);try{return t(e,r)}catch(n){r.message=e.message,r.stack=e.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),t(new i,r)}}},7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}v(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&v(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,o,a,u;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=p(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},5177:e=>{e.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},8679:(e,t,n)=>{"use strict";var r=n(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=h(n);i&&i!==p&&e(t,i,r)}var a=l(n);d&&(a=a.concat(d(n)));for(var s=c(t),v=c(n),m=0;m<a.length;++m){var g=a[m];if(!(o[g]||r&&r[g]||v&&v[g]||s&&s[g])){var y=f(n,g);try{u(t,g,y)}catch(e){}}}}return t}},645:(e,t)=>{t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=255&a,h+=p,a/=256,u-=8);e[n+h-p]|=128*v}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},1296:(e,t,n)=>{var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),d=Object.prototype.toString,f=Math.max,h=Math.min,p=function(){return l.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,c,u=0,l=!1,d=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function b(e){return u=e,s=setTimeout(_,t),l?y(e):a}function w(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=o}function _(){var e=p();if(w(e))return S(e);s=setTimeout(_,function(e){var n=t-(e-c);return d?h(n,o-(e-u)):n}(e))}function S(e){return s=void 0,g&&r?y(e):(r=i=void 0,a)}function E(){var e=p(),n=w(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return b(c);if(d)return s=setTimeout(_,t),y(c)}return void 0===s&&(s=setTimeout(_,t)),a}return t=m(t)||0,v(n)&&(l=!!n.leading,o=(d="maxWait"in n)?f(m(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),E.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},E.flush=function(){return void 0===s?a:S(p())},E}},7824:e=>{var t=1e3,n=60*t,r=60*n,i=24*r;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,a){a=a||{};var s,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(s=e,(c=Math.abs(s))>=i?o(s,c,i,"day"):c>=r?o(s,c,r,"hour"):c>=n?o(s,c,n,"minute"):c>=t?o(s,c,t,"second"):s+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},5776:(e,t,n)=>{"use strict";n.d(t,{hu:()=>ye,HY:()=>v,Tm:()=>Be,kr:()=>F,az:()=>h,ZP:()=>Ue,Gp:()=>me,l$:()=>Fe,mm:()=>We,I4:()=>ne,qp:()=>re,Qb:()=>ie,d4:()=>J,bt:()=>Q,Ye:()=>te,_Y:()=>X,sO:()=>ee,eJ:()=>Y});var r,i,o,a,s,c={},u=[],l=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function d(e,t){for(var n in t)e[n]=t[n];return e}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function h(e,t,n){var r,i,o,a=arguments,s={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(a[o]);if(null!=n&&(s.children=n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return p(e,s,r,i,null)}function p(e,t,n,i,o){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++r.__v:o};return null!=r.vnode&&r.vnode(a),a}function v(e){return e.children}function m(e,t){this.props=e,this.context=t}function g(e,t){if(null==t)return e.__?g(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?g(e):null}function y(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return y(e)}}function b(e){(!e.__d&&(e.__d=!0)&&i.push(e)&&!w.__r++||a!==r.debounceRendering)&&((a=r.debounceRendering)||o)(w)}function w(){for(var e;w.__r=i.length;)e=i.sort((function(e,t){return e.__v.__b-t.__v.__b})),i=[],e.some((function(e){var t,n,r,i,o,a;e.__d&&(o=(i=(t=e).__v).__e,(a=t.__P)&&(n=[],(r=d({},i)).__v=i.__v+1,R(a,i,r,t.__n,void 0!==a.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?g(i):o,i.__h),x(n,i),i.__e!=o&&y(i)))}))}function _(e,t,n,r,i,o,a,s,l,d){var f,h,m,y,b,w,_,E=r&&r.__k||u,T=E.length;for(n.__k=[],f=0;f<t.length;f++)if(null!=(y=n.__k[f]=null==(y=t[f])||"boolean"==typeof y?null:"string"==typeof y||"number"==typeof y?p(null,y,null,null,y):Array.isArray(y)?p(v,{children:y},null,null,null):y.__b>0?p(y.type,y.props,y.key,null,y.__v):y)){if(y.__=n,y.__b=n.__b+1,null===(m=E[f])||m&&y.key==m.key&&y.type===m.type)E[f]=void 0;else for(h=0;h<T;h++){if((m=E[h])&&y.key==m.key&&y.type===m.type){E[h]=void 0;break}m=null}R(e,y,m=m||c,i,o,a,s,l,d),b=y.__e,(h=y.ref)&&m.ref!=h&&(_||(_=[]),m.ref&&_.push(m.ref,null,y),_.push(h,y.__c||b,y)),null!=b?(null==w&&(w=b),"function"==typeof y.type&&null!=y.__k&&y.__k===m.__k?y.__d=l=S(y,l,e):l=C(e,y,m,E,b,l),d||"option"!==n.type?"function"==typeof n.type&&(n.__d=l):e.value=""):l&&m.__e==l&&l.parentNode!=e&&(l=g(m))}for(n.__e=w,f=T;f--;)null!=E[f]&&("function"==typeof n.type&&null!=E[f].__e&&E[f].__e==n.__d&&(n.__d=g(r,f+1)),D(E[f],E[f]));if(_)for(f=0;f<_.length;f++)M(_[f],_[++f],_[++f])}function S(e,t,n){var r,i;for(r=0;r<e.__k.length;r++)(i=e.__k[r])&&(i.__=e,t="function"==typeof i.type?S(i,t,n):C(n,i,i,e.__k,i.__e,t));return t}function E(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){E(e,t)})):t.push(e)),t}function C(e,t,n,r,i,o){var a,s,c;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||i!=o||null==i.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(i),a=null;else{for(s=o,c=0;(s=s.nextSibling)&&c<r.length;c+=2)if(s==i)break e;e.insertBefore(i,o),a=o}return void 0!==a?a:i.nextSibling}function T(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||l.test(t)?n:n+"px"}function k(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||T(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||T(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?I:O,o):e.removeEventListener(t,o?I:O,o);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function O(e){this.l[e.type+!1](r.event?r.event(e):e)}function I(e){this.l[e.type+!0](r.event?r.event(e):e)}function R(e,t,n,i,o,a,s,c,u){var l,f,h,p,g,y,b,w,S,E,C,T=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(u=n.__h,c=t.__e=n.__e,t.__h=null,a=[c]),(l=r.__b)&&l(t);try{e:if("function"==typeof T){if(w=t.props,S=(l=T.contextType)&&i[l.__c],E=l?S?S.props.value:l.__:i,n.__c?b=(f=t.__c=n.__c).__=f.__E:("prototype"in T&&T.prototype.render?t.__c=f=new T(w,E):(t.__c=f=new m(w,E),f.constructor=T,f.render=L),S&&S.sub(f),f.props=w,f.state||(f.state={}),f.context=E,f.__n=i,h=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=T.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=d({},f.__s)),d(f.__s,T.getDerivedStateFromProps(w,f.__s))),p=f.props,g=f.state,h)null==T.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==T.getDerivedStateFromProps&&w!==p&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(w,E),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(w,f.__s,E)||t.__v===n.__v){f.props=w,f.state=f.__s,t.__v!==n.__v&&(f.__d=!1),f.__v=t,t.__e=n.__e,t.__k=n.__k,f.__h.length&&s.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(w,f.__s,E),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(p,g,y)}))}f.context=E,f.props=w,f.state=f.__s,(l=r.__r)&&l(t),f.__d=!1,f.__v=t,f.__P=e,l=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(i=d(d({},i),f.getChildContext())),h||null==f.getSnapshotBeforeUpdate||(y=f.getSnapshotBeforeUpdate(p,g)),C=null!=l&&l.type===v&&null==l.key?l.props.children:l,_(e,Array.isArray(C)?C:[C],t,n,i,o,a,s,c,u),f.base=t.__e,t.__h=null,f.__h.length&&s.push(f),b&&(f.__E=f.__=null),f.__e=!1}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=A(n.__e,t,n,i,o,a,s,u);(l=r.diffed)&&l(t)}catch(e){t.__v=null,(u||null!=a)&&(t.__e=c,t.__h=!!u,a[a.indexOf(c)]=null),r.__e(e,t,n)}}function x(e,t){r.__c&&r.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){r.__e(e,t.__v)}}))}function A(e,t,n,r,i,o,a,s){var l,d,h,p,v=n.props,m=t.props,g=t.type,y=0;if("svg"===g&&(i=!0),null!=o)for(;y<o.length;y++)if((l=o[y])&&(l===e||(g?l.localName==g:3==l.nodeType))){e=l,o[y]=null;break}if(null==e){if(null===g)return document.createTextNode(m);e=i?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,m.is&&m),o=null,s=!1}if(null===g)v===m||s&&e.data===m||(e.data=m);else{if(o=o&&u.slice.call(e.childNodes),d=(v=n.props||c).dangerouslySetInnerHTML,h=m.dangerouslySetInnerHTML,!s){if(null!=o)for(v={},p=0;p<e.attributes.length;p++)v[e.attributes[p].name]=e.attributes[p].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(function(e,t,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in t||k(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||k(e,o,t[o],n[o],r)}(e,m,v,i,s),h)t.__k=[];else if(y=t.props.children,_(e,Array.isArray(y)?y:[y],t,n,r,i&&"foreignObject"!==g,o,a,e.firstChild,s),null!=o)for(y=o.length;y--;)null!=o[y]&&f(o[y]);s||("value"in m&&void 0!==(y=m.value)&&(y!==e.value||"progress"===g&&!y)&&k(e,"value",y,v.value,!1),"checked"in m&&void 0!==(y=m.checked)&&y!==e.checked&&k(e,"checked",y,v.checked,!1))}return e}function M(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){r.__e(e,n)}}function D(e,t,n){var i,o,a;if(r.unmount&&r.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||M(i,null,t)),n||"function"==typeof e.type||(n=null!=(o=e.__e)),e.__e=e.__d=void 0,null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){r.__e(e,t)}i.base=i.__P=null}if(i=e.__k)for(a=0;a<i.length;a++)i[a]&&D(i[a],t,n);null!=o&&f(o)}function L(e,t,n){return this.constructor(e,n)}function P(e,t,n){var i,o,a;r.__&&r.__(e,t),o=(i="function"==typeof n)?null:n&&n.__k||t.__k,a=[],R(t,e=(!i&&n||t).__k=h(v,null,[e]),o||c,c,void 0!==t.ownerSVGElement,!i&&n?[n]:o?null:t.firstChild?u.slice.call(t.childNodes):null,a,!i&&n?n:o?o.__e:t.firstChild,i),x(a,e)}function N(e,t){P(e,t,N)}function j(e,t,n){var r,i,o,a=arguments,s=d({},e.props);for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(a[o]);return null!=n&&(s.children=n),p(e.type,s,r||e.key,i||e.ref,null)}function F(e,t){var n={__c:t="__cC"+s++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(b)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}r={__e:function(e,t){for(var n,r,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e},__v:0},m.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=d({},this.state),"function"==typeof e&&(e=e(d({},n),this.props)),e&&d(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),b(this))},m.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),b(this))},m.prototype.render=v,i=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,w.__r=0,s=0;var B,W,U,V=0,H=[],Z=r.__b,q=r.__r,z=r.diffed,G=r.__c,$=r.unmount;function K(e,t){r.__h&&r.__h(W,e,V||t),V=0;var n=W.__H||(W.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Y(e){return V=1,X(le,e)}function X(e,t,n){var r=K(B++,2);return r.t=e,r.__c||(r.__=[n?n(t):le(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=W),r.__}function J(e,t){var n=K(B++,3);!r.__s&&ue(n.__H,t)&&(n.__=e,n.__H=t,W.__H.__h.push(n))}function Q(e,t){var n=K(B++,4);!r.__s&&ue(n.__H,t)&&(n.__=e,n.__H=t,W.__h.push(n))}function ee(e){return V=5,te((function(){return{current:e}}),[])}function te(e,t){var n=K(B++,7);return ue(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ne(e,t){return V=8,te((function(){return e}),t)}function re(e){var t=W.context[e.__c],n=K(B++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(W)),t.props.value):e.__}function ie(e,t){r.useDebugValue&&r.useDebugValue(t?t(e):e)}function oe(){H.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(se),e.__H.__h.forEach(ce),e.__H.__h=[]}catch(t){e.__H.__h=[],r.__e(t,e.__v)}})),H=[]}r.__b=function(e){W=null,Z&&Z(e)},r.__r=function(e){q&&q(e),B=0;var t=(W=e.__c).__H;t&&(t.__h.forEach(se),t.__h.forEach(ce),t.__h=[])},r.diffed=function(e){z&&z(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==H.push(t)&&U===r.requestAnimationFrame||((U=r.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),ae&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ae&&(t=requestAnimationFrame(n))})(oe)),W=void 0},r.__c=function(e,t){t.some((function(e){try{e.__h.forEach(se),e.__h=e.__h.filter((function(e){return!e.__||ce(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],r.__e(n,e.__v)}})),G&&G(e,t)},r.unmount=function(e){$&&$(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(se)}catch(e){r.__e(e,t.__v)}};var ae="function"==typeof requestAnimationFrame;function se(e){var t=W;"function"==typeof e.__c&&e.__c(),W=t}function ce(e){var t=W;e.__c=e.__(),W=t}function ue(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function le(e,t){return"function"==typeof t?t(e):t}function de(e,t){for(var n in t)e[n]=t[n];return e}function fe(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function he(e){this.props=e}(he.prototype=new m).isPureReactComponent=!0,he.prototype.shouldComponentUpdate=function(e,t){return fe(this.props,e)||fe(this.state,t)};var pe=r.__b;r.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),pe&&pe(e)};var ve="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function me(e){function t(t,n){var r=de({},t);return delete r.ref,e(r,(n=t.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return t.$$typeof=ve,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var ge=function(e,t){return null==e?null:E(E(e).map(t))},ye={map:ge,forEach:ge,count:function(e){return e?E(e).length:0},only:function(e){var t=E(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:E},be=r.__e;function we(){this.__u=0,this.t=null,this.__b=null}function _e(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function Se(){this.u=null,this.o=null}r.__e=function(e,t,n){if(e.then)for(var r,i=t;i=i.__;)if((r=i.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);be(e,t,n)},(we.prototype=new m).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=_e(r.__v),o=!1,a=function(){o||(o=!0,n.componentWillUnmount=n.__c,i?i(s):s())};n.__c=n.componentWillUnmount,n.componentWillUnmount=function(){a(),n.__c&&n.__c()};var s=function(){if(!--r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},c=!0===t.__h;r.__u++||c||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(a,a)},we.prototype.componentWillUnmount=function(){this.t=[]},we.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=de({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__e&&h(v,null,e.fallback);return i&&(i.__h=null),[h(v,null,t.__e?null:e.children),i]};var Ee=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Ce(e){return this.getChildContext=function(){return e.context},e.children}function Te(e){var t=this,n=e.i;t.componentWillUnmount=function(){P(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),P(h(Ce,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}(Se.prototype=new m).__e=function(e){var t=this,n=_e(t.__v),r=t.o.get(e);return r[0]++,function(i){var o=function(){t.props.revealOrder?(r.push(i),Ee(t,e,r)):i()};n?n(o):o()}},Se.prototype.render=function(e){this.u=null,this.o=new Map;var t=E(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Se.prototype.componentDidUpdate=Se.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Ee(e,n,t)}))};var ke="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Oe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ie=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};m.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(m.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Re=r.event;function xe(){}function Ae(){return this.cancelBubble}function Me(){return this.defaultPrevented}r.event=function(e){return Re&&(e=Re(e)),e.persist=xe,e.isPropagationStopped=Ae,e.isDefaultPrevented=Me,e.nativeEvent=e};var De,Le={configurable:!0,get:function(){return this.class}},Pe=r.vnode;r.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){for(var i in r={},n){var o=n[i];"value"===i&&"defaultValue"in n&&null==o||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===o?o="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!Ie(n.type)?i="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():Oe.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===o&&(o=void 0),r[i]=o)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=E(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=E(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r}t&&n.class!=n.className&&(Le.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Le)),e.$$typeof=ke,Pe&&Pe(e)};var Ne=r.__r;r.__r=function(e){Ne&&Ne(e),De=e.__c};var je={ReactCurrentDispatcher:{current:{readContext:function(e){return De.__n[e.__c].props.value}}}};function Fe(e){return!!e&&e.$$typeof===ke}function Be(e){return Fe(e)?j.apply(null,arguments):e}"object"==typeof performance&&"function"==typeof performance.now&&performance.now.bind(performance);var We=function(e,t){return e(t)};const Ue={useState:Y,useReducer:X,useEffect:J,useLayoutEffect:Q,useRef:ee,useImperativeHandle:function(e,t,n){V=6,Q((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==n?n:n.concat(e))},useMemo:te,useCallback:ne,useContext:re,useDebugValue:ie,version:"16.8.0",Children:ye,render:function(e,t,n){return null==t.__k&&(t.textContent=""),P(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return N(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(P(null,e),!0)},createPortal:function(e,t){return h(Te,{__v:e,i:t})},createElement:h,createContext:F,createFactory:function(e){return h.bind(null,e)},cloneElement:Be,createRef:function(){return{current:null}},Fragment:v,isValidElement:Fe,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:m,PureComponent:he,memo:function(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:fe(this.props,e)}function r(t){return this.shouldComponentUpdate=n,h(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r},forwardRef:me,unstable_batchedUpdates:We,StrictMode:v,Suspense:we,SuspenseList:Se,lazy:function(e){var t,n,r;function i(i){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return h(n,i)}return i.displayName="Lazy",i.__f=!0,i},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:je}},4155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],u=!1,l=-1;function d(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&f())}function f(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},2703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4375:(e,t,n)=>{let r;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:n.g):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},1798:(e,t,n)=>{"use strict";var r=n(4155),i=65536,o=n(9509).Buffer,a=n.g.crypto||n.g.msCrypto;a&&a.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=o.allocUnsafe(e);if(e>0)if(e>i)for(var s=0;s<e;s+=i)a.getRandomValues(n.slice(s,s+i));else a.getRandomValues(n);return"function"==typeof t?r.nextTick((function(){t(null,n)})):n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},9921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case o:case s:case a:case h:return e;default:switch(e=e&&e.$$typeof){case u:case f:case m:case v:case c:return e;default:return t}}case i:return t}}}function S(e){return _(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=h,t.isAsyncMode=function(e){return S(e)||_(e)===l},t.isConcurrentMode=S,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===f},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===m},t.isMemo=function(e){return _(e)===v},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===a},t.isSuspense=function(e){return _(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===s||e===a||e===h||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===c||e.$$typeof===u||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===g)},t.typeOf=_},9864:(e,t,n)=>{"use strict";e.exports=n(9921)},8429:(e,t,n)=>{"use strict";n.d(t,{zt:()=>u,I0:()=>v,v9:()=>b,oR:()=>h});var r=n(5776),i=(n(5697),r.ZP.createContext(null)),o=function(e){e()},a=function(){return o},s={notify:function(){}},c=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=s,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=a(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=s)},e}();const u=function(e){var t=e.store,n=e.context,o=e.children,a=(0,r.Ye)((function(){var e=new c(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),s=(0,r.Ye)((function(){return t.getState()}),[t]);(0,r.d4)((function(){var e=a.subscription;return e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,s]);var u=n||i;return r.ZP.createElement(u.Provider,{value:a},o)};n(8679),n(9864);var l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.bt:r.d4;function d(){return(0,r.qp)(i)}function f(e){void 0===e&&(e=i);var t=e===i?d:function(){return(0,r.qp)(e)};return function(){return t().store}}n(4890);var h=f();function p(e){void 0===e&&(e=i);var t=e===i?h:f(e);return function(){return t().dispatch}}var v=p(),m=function(e,t){return e===t};function g(e){void 0===e&&(e=i);var t=e===i?d:function(){return(0,r.qp)(e)};return function(e,n){void 0===n&&(n=m);var i=t(),o=function(e,t,n,i){var o,a=(0,r._Y)((function(e){return e+1}),0)[1],s=(0,r.Ye)((function(){return new c(n,i)}),[n,i]),u=(0,r.sO)(),d=(0,r.sO)(),f=(0,r.sO)(),h=(0,r.sO)(),p=n.getState();try{o=e!==d.current||p!==f.current||u.current?e(p):h.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return l((function(){d.current=e,f.current=p,h.current=o,u.current=void 0})),l((function(){function e(){try{var e=d.current(n.getState());if(t(e,h.current))return;h.current=e}catch(e){u.current=e}a()}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[n,s]),o}(e,n,i.store,i.subscription);return(0,r.Qb)(o),o}}var y,b=g();y=r.mm,o=y},4281:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,o,a,s,c;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var u=("number"!=typeof c&&(c=0),c+".".length>(s=e).length||-1===s.indexOf(".",c)?"argument":"property");a='The "'.concat(e,'" ').concat(u," ").concat(i," ").concat(r(t,"type"))}return a+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},6753:(e,t,n)=>{"use strict";var r=n(4155),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var o=n(9481),a=n(4229);n(5717)(l,o);for(var s=i(a.prototype),c=0;c<s.length;c++){var u=s[c];l.prototype[u]||(l.prototype[u]=a.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},2725:(e,t,n)=>{"use strict";e.exports=i;var r=n(4605);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(5717)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},9481:(e,t,n)=>{"use strict";var r,i=n(4155);e.exports=T,T.ReadableState=C,n(7187).EventEmitter;var o,a=function(e,t){return e.listeners(t).length},s=n(2503),c=n(8764).Buffer,u=n.g.Uint8Array||function(){},l=n(4616);o=l&&l.debuglog?l.debuglog("stream"):function(){};var d,f,h,p=n(7327),v=n(1195),m=n(2457).getHighWaterMark,g=n(4281).q,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(5717)(T,s);var S=v.errorOrDestroy,E=["error","close","destroy","pause","resume"];function C(e,t,i){r=r||n(6753),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(2553).s),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function T(e){if(r=r||n(6753),!(this instanceof T))return new T(e);var t=this instanceof r;this._readableState=new C(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function k(e,t,n,r,i){o("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?x(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}}(e,s);else if(i||(a=function(e,t){var n,r;return r=t,c.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(s,t)),a)S(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r)s.endEmitted?S(e,new _):O(e,s,t,!0);else if(s.ended)S(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?O(e,s,t,!1):M(e,s)):O(e,s,t,!1)}else r||(s.reading=!1,M(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function O(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),M(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=v.destroy,T.prototype._undestroy=v.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),k(this,e,t,!1,n)},T.prototype.unshift=function(e){return k(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){d||(d=n(2553).s);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(A,e))}function A(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,j(e)}function M(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function P(e){o("readable nexttick read 0"),e.read(0)}function N(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(W,t,e))}function W(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}T.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):x(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},T.prototype._read=function(e){S(this,new w("_read()"))},T.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,o("pipe count=%d opts=%j",r.pipesCount,t);var s=t&&!1===t.end||e===i.stdout||e===i.stderr?v:c;function c(){o("onend"),e.end()}r.endEmitted?i.nextTick(s):n.once("end",s),e.on("unpipe",(function t(i,a){o("onunpipe"),i===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,o("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",t),n.removeListener("end",c),n.removeListener("end",v),n.removeListener("data",d),l=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,j(e))}}(n);e.on("drain",u);var l=!1;function d(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==U(r.pipes,e))&&!l&&(o("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function f(t){o("onerror",t),v(),e.removeListener("error",f),0===a(e,"error")&&S(e,t)}function h(){e.removeListener("finish",p),v()}function p(){o("onfinish"),e.removeListener("close",h),v()}function v(){o("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",f),e.once("close",h),e.once("finish",p),e.emit("pipe",n),r.flowing||(o("pipe resume"),n.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=U(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},T.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,o("on readable",r.length,r.reading),r.length?x(this):r.reading||i.nextTick(P,this))),n},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(L,this),n},T.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(L,this),t},T.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(N,e,t))}(this,e)),e.paused=!1,this},T.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){o("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=n(5850)),f(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=F,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,t){return void 0===h&&(h=n(5167)),h(T,e,t)})},4605:(e,t,n)=>{"use strict";e.exports=l;var r=n(4281).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,c=n(6753);function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,n){f(e,t,n)}))}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}n(5717)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},4229:(e,t,n)=>{"use strict";var r,i=n(4155);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(undefined),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=T,T.WritableState=C;var a,s={deprecate:n(4927)},c=n(2503),u=n(8764).Buffer,l=n.g.Uint8Array||function(){},d=n(1195),f=n(2457).getHighWaterMark,h=n(4281).q,p=h.ERR_INVALID_ARG_TYPE,v=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,b=h.ERR_STREAM_NULL_VALUES,w=h.ERR_STREAM_WRITE_AFTER_END,_=h.ERR_UNKNOWN_ENCODING,S=d.errorOrDestroy;function E(){}function C(e,t,a){r=r||n(6753),e=e||{},"boolean"!=typeof a&&(a=t instanceof r),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(A,e,t),e._writableState.errorEmitted=!0,S(e,r)):(o(r),e._writableState.errorEmitted=!0,S(e,r),A(e,t))}(e,n,r,t,o);else{var a=R(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||I(e,n),r?i.nextTick(O,e,n,a,o):O(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function T(e){var t=this instanceof(r=r||n(6753));if(!t&&!a.call(T,this))return new T(e);this._writableState=new C(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function k(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function O(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function I(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,c=!0;n;)i[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;i.allBuffers=c,k(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(k(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(n){t.pendingcb--,n&&S(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var n=R(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(x,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(5717)(T,c),C.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(C.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===T&&e&&e._writableState instanceof C}})):a=function(e){return e instanceof this},T.prototype.pipe=function(){S(this,new g)},T.prototype.write=function(e,t,n){var r,o=this._writableState,a=!1,s=!o.objectMode&&(r=e,u.isBuffer(r)||r instanceof l);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=E),o.ending?function(e,t){var n=new w;S(e,n),i.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var o;return null===n?o=new b:"string"==typeof n||t.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(S(e,o),i.nextTick(r,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,s,r,i,o);return c}(this,o,s,e,t,n)),a},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,n){n(new v("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=d.destroy,T.prototype._undestroy=d.undestroy,T.prototype._destroy=function(e,t){t(e)}},5850:(e,t,n)=>{"use strict";var r,i=n(4155);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(8610),s=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),d=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function v(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[d]=null,e[s]=null,e[c]=null,t(p(n,!1)))}}function m(e){i.nextTick(v,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(r={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[u]?n(e[u]):t(p(void 0,!0))}))}));var n,r=this[d];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(p(void 0,!0)):t[f](n,r)}),r)}}(r,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[f])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),o(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(y,(o(t={},h,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,f,{value:function(e,t){var r=n[h].read();r?(n[d]=null,n[s]=null,n[c]=null,e(p(r,!1))):(n[s]=e,n[c]=t)},writable:!0}),t));return n[d]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[c];return null!==t&&(n[d]=null,n[s]=null,n[c]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[d]=null,n[s]=null,n[c]=null,r(p(void 0,!0))),n[l]=!0})),e.on("readable",m.bind(null,n)),n}},7327:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(8764).Buffer,s=n(2361).inspect,c=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,n,r,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=i,r=s,a.prototype.copy.call(t,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),e}()},1195:(e,t,n)=>{"use strict";var r=n(4155);function i(e,t){a(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(a,this,e)):r.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?r.nextTick(o,n):(n._writableState.errorEmitted=!0,r.nextTick(i,n,e)):r.nextTick(i,n,e):t?(r.nextTick(o,n),t(e)):r.nextTick(o,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},8610:(e,t,n)=>{"use strict";var r=n(4281).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){s=!1,u=!0,a||o.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){a=!1,d=!0,s||o.call(t)},h=function(e){o.call(t,e)},p=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},v=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",p),t.req?v():t.on("request",v)):s&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",f),t.on("finish",l),!1!==n.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",v),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",h),t.removeListener("close",p)}}},5167:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},9946:(e,t,n)=>{"use strict";var r,i=n(4281).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function c(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===r&&(r=n(8610)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var c=!1;return function(t){if(!s&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,n){var o=n<t.length-1;return c(e,o,n>0,(function(e){r||(r=e),e&&a.forEach(u),o||(a.forEach(u),i(r))}))}));return t.reduce(l)}},2457:(e,t,n)=>{"use strict";var r=n(4281).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},2503:(e,t,n)=>{e.exports=n(7187).EventEmitter},8473:(e,t,n)=>{(t=e.exports=n(9481)).Stream=t,t.Readable=t,t.Writable=n(4229),t.Duplex=n(6753),t.Transform=n(4605),t.PassThrough=n(2725),t.finished=n(8610),t.pipeline=n(9946)},4890:(e,t,n)=>{"use strict";n.d(t,{DE:()=>d,MT:()=>s,UY:()=>u,md:()=>m,qC:()=>v});var r=n(7121),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,n){var i;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var c=e,u=t,l=[],d=l,f=!1;function h(){d===l&&(d=l.slice())}function p(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function v(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return h(),d.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,h();var n=d.indexOf(e);d.splice(n,1),l=null}}}function m(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,u=c(u,e)}finally{f=!1}for(var t=l=d,n=0;n<t.length;n++)(0,t[n])();return e}function g(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,m({type:o.REPLACE})}function y(){var e,t=v;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(p())}return n(),{unsubscribe:t(n)}}})[r.Z]=function(){return this},e}return m({type:o.INIT}),(i={dispatch:m,subscribe:v,getState:p,replaceReducer:g})[r.Z]=y,i}function c(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function u(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},o=0;o<s.length;o++){var u=s[o],l=n[u],d=e[u],f=l(d,t);if(void 0===f){var h=c(u,t);throw new Error(h)}i[u]=f,r=r||f!==d}return(r=r||s.length!==Object.keys(e).length)?i:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=l(i,t))}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return p({},n,{dispatch:r=v.apply(void 0,o)(n.dispatch)})}}}},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new I(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",h="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(R([])));_&&_!==n&&r.call(_,o)&&(b=_);var S=y.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function R(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:x}}function x(){return{value:t,done:!0}}return g.prototype=S.constructor=y,y.constructor=g,g.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},E(C.prototype),C.prototype[a]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new C(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,s,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},2222:(e,t,n)=>{"use strict";function r(e,t){return e===t}function i(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}function o(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}n.d(t,{P1:()=>a});var a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=0,s=r.pop(),c=o(r),u=e.apply(void 0,[function(){return a++,s.apply(null,arguments)}].concat(n)),l=e((function(){for(var e=[],t=c.length,n=0;n<t;n++)e.push(c[n].apply(null,arguments));return u.apply(null,e)}));return l.resultFunc=s,l.dependencies=c,l.recomputations=function(){return a},l.resetRecomputations=function(){return a=0},l}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,o=null;return function(){return i(t,n,arguments)||(o=e.apply(null,arguments)),n=arguments,o}}))},9509:(e,t,n)=>{var r=n(8764),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},8853:(e,t,n)=>{const r=n(2488)("simple-peer"),i=n(5177),o=n(1798),a=n(8473),s=n(4375),c=n(2114),{Buffer:u}=n(8764),l=65536;function d(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}class f extends a.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=o(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||o(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||f.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},f.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:i(),!this._wrtc)throw"undefined"==typeof window?c(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):c(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void this.destroy(c(e,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((e=>{this.destroy(c(e,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach((e=>{this.addStream(e)})),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((e=>{this._addIceCandidate(e)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((e=>{this.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(c(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch((e=>{!t.address||t.address.endsWith(".local")?("Ignoring unsupported ICE candidate.",console.warn("Ignoring unsupported ICE candidate.")):this.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))}))}send(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(c(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((t=>{this.addTrack(t,e)}))}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let r=n.get(t);if(r)throw r.removed?c(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):c(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(e),i=r?r.get(n):null;if(!i)throw c(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null!=i.replaceTrack?i.replaceTrack(t):this.destroy(c(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw c(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(r):this.destroy(c(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((t=>{this.removeTrack(t,e)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,s((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,(()=>{}))}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),s((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()})))}_setupData(e){if(!e.channel)return this.destroy(c(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=l),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(c(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1}),5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(c(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>l?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=d(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})};this._pc.setLocalDescription(e).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(c(e,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=d(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()};this._pc.setLocalDescription(e).then((()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(c(e,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(c(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(c(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((t=>{Object.assign(e,t)})),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((n=>{const r=[];n.forEach((e=>{r.push(t(e))})),e(null,r)}),(t=>e(t))):this._pc.getStats.length>0?this._pc.getStats((n=>{if(this.destroyed)return;const r=[];n.result().forEach((e=>{const n={};e.names().forEach((t=>{n[t]=e.stat(t)})),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))})),e(null,r)}),(t=>e(t))):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats(((t,n)=>{if(this.destroyed)return;t&&(n=[]);const r={},i={},o={};let a=!1;n.forEach((e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(r[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(i[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(o[e.id]=e)}));const s=e=>{a=!0;let t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=Number(n.port)):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=Number(n.portNumber)):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=Number(n[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach((e=>{"transport"===e.type&&e.selectedCandidatePairId&&s(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&s(e)})),a||Object.keys(o).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(c(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)}))};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>l||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=u.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach((t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some((e=>e.id===t.id))||(this._remoteStreams.push(t),s((()=>{this._debug("on stream"),this.emit("stream",t)})))}))}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)}}f.WEBRTC_SUPPORT=!!i(),f.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},f.channelConfig={},e.exports=f},2488:(e,t,n)=>{var r=n(4155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=!1),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(9474)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},9474:(e,t,n)=>{e.exports=function(e){function t(e){let n,i=null;function o(...e){if(!o.enabled)return;const r=o,i=Number(new Date),a=i-(n||i);r.diff=a,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===i?t.enabled(e):i,set:e=>{i=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},2553:(e,t,n)=>{"use strict";var r=n(9509).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},7121:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),e=n.hmd(e);const r=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e)},4927:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},2361:()=>{},4616:()=>{},907:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},7326:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:()=>r})},5861:(e,t,n)=>{"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:()=>i})},5671:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>r})},3144:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{Z:()=>i})},4942:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>r})},1120:(e,t,n)=>{"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:()=>r})},136:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9611);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,r.Z)(e,t)}},2963:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1002),i=n(7326);function o(e,t){return!t||"object"!==(0,r.Z)(t)&&"function"!=typeof t?(0,i.Z)(e):t}},9611:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:()=>r})},885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(907),i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:()=>r})},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(907);function i(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},2407:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(1120),i=n(9611);function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return a=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,i.Z)(o,n.prototype),o},a.apply(null,arguments)}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return a(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(o,e)},s(e)}}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,c),n.loaded=!0,n.exports}c.m=a,c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);c.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,c.d(i,o),i},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,n)=>(c.f[n](e,t),t)),[])),c.u=e=>({143:"app",347:"@stardazed/streams-compression",830:"web-streams-polyfill"}[e]+".47fdf44ce6911dfb668a48ff94cc566fad169579.js"),c.miniCssF=e=>"app.47fdf44ce6911dfb668a48ff94cc566fad169579.css",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="servicebell-widget:",c.l=(e,t,i,o)=>{if(n[e])n[e].push(t);else{var a,s;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+i){a=d;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,c.nc&&a.setAttribute("nonce",c.nc),a.setAttribute("data-webpack",r+i),a.src=e),n[e]=[t];var f=(t,r)=>{a.onerror=a.onload=null,clearTimeout(h);var i=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(r))),t)return t(r)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),s&&document.head.appendChild(a)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),c.p="https://cdn.servicebell.com/",i=e=>new Promise(((t,n)=>{var r=c.miniCssF(e),i=c.p+r;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var a;if((i=(a=o[r]).getAttribute("data-href"))===e||i===t)return a}})(r,i))return t();((e,t,n,r)=>{var i=document.createElement("link");i.setAttribute("id","svb-styles"),i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=o=>{if(i.onerror=i.onload=null,"load"===o.type)n();else{var a=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=s,i.parentNode.removeChild(i),r(c)}},i.href=t,document.head.appendChild(i)})(e,i,t,n)})),o={179:0},c.f.miniCss=(e,t)=>{o[e]?t.push(o[e]):0!==o[e]&&{143:1}[e]&&t.push(o[e]=i(e).then((()=>{o[e]=0}),(t=>{throw delete o[e],t})))},(()=>{var e={179:0};c.f.j=(t,n)=>{var r=c.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=c.p+c.u(t),a=new Error;c.l(o,(n=>{if(c.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,a,s]=n,u=0;if(o.some((t=>0!==e[t]))){for(r in a)c.o(a,r)&&(c.m[r]=a[r]);s&&s(c)}for(t&&t(n);u<o.length;u++)i=o[u],c.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkservicebell_widget=self.webpackChunkservicebell_widget||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=c(2982),t=c(885),n=c(7937),r=c(5861),i=c(7757),o=c.n(i),a=c(6403),s=c(9046),u=c(6242),l=c(7220),d=c(2611),f=c(2795),h=c(7109);function p(){window.addEventListener("message",(function(e){var t;if("hsFormCallback"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)&&"onFormSubmit"===e.data.eventName){var n={},r=e.data.data.reduce((function(e,t){return e[t.name]=t.value,e}),{});r.email&&(n.email=r.email),(r.firstname||r.lastname)&&(n.displayName="".concat(r.firstname," ").concat(r.lastname).trim()),j.identify(void 0,n)}}))}var v=c(9943);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g="__sb_last_location__",y="startCall";function b(){return null!==new URLSearchParams(window.location.search.toLowerCase()).get(y.toLowerCase())}function w(){var e,t=new URL(window.location.href),n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t.searchParams.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;r.toLowerCase()==y.toLowerCase()&&t.searchParams.delete(r)}}catch(e){n.e(e)}finally{n.f()}history.replaceState(history.state,document.title,t.toString())}function _(){if(!b())return!1;var e=function(){var e=localStorage.getItem(g);if(e){try{var t=JSON.parse(e);if(t.location&&t.timestamp&&t.timestamp>Date.now()-9e5)return t.location;v.Z.debug("Location data was either expired or missing data, deleting key and ignoring.")}catch(e){v.Z.warn("Failed to parse last location local storage JSON, deleting key and ignoring")}localStorage.removeItem(g)}}();if(!e)return!1;var t=function(e){var t=new URL(e);return t.searchParams.delete(y),t.pathname+t.search};if(t(e)!==t(window.location.href)){var n=new URL(e);return n.searchParams.set(y,""),v.Z.info("Redirecting to last url ".concat(n.toString()," due to call query param")),window.location.replace(n.toString()),!0}return!1}var S=c(5713),E=c(5164),C=c(8477),T=c(7887),k=c(7736),O=(0,f.U)("src/index");O.debug("Running ServiceBell widget from commit ".concat((0,n.i)(),", protocol version ").concat((0,n.J)()));var I,R=!1,x=(0,s.yL)()&&window.top.ServiceBell;function A(){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b()){e.next=5;break}return O.info("Starting call from query parameter"),w(),e.next=5,L();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return D=(0,r.Z)(o().mark((function e(t){var n,r,i,a,f,h,v=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.length>1&&void 0!==v[1]?v[1]:{},e.prev=1,n||(n={}),!I){e.next=6;break}return O.warn("ServiceBell initialize called twice, ignoring subsequent calls"),e.abrupt("return");case 6:return I=t,(r="demo"===t)&&l.ZP.dispatch((0,k.rn)(!0)),e.next=11,(0,u.tC)();case 11:if(i=e.sent,r||!i){e.next=18;break}return R=!0,a="ServiceBell didn't load because ".concat(i),O.info(a),(0,S.sA)(new S.lg(a)),e.abrupt("return");case 18:if(!_()){e.next=20;break}return e.abrupt("return");case 20:if((f=window).ServiceBell&&(f.ServiceBell.__clientKey=t),l.ZP.dispatch((0,d.Ov)(n)),!(0,s.yL)()){e.next=36;break}return O.debug("[iframe] Fetching init data to determine if retrigger mode"),e.next=27,l.ZP.dispatch((0,E.XC)({clientKey:t}));case 27:if(null==(h=(0,T.aE)(l.ZP.getState()))?void 0:h.includes("iframe")){e.next=32;break}return O.warn('[iframe] In iframe but mode is "'.concat(h,'", loading iframe URL in top window')),window.top&&(window.top.location=window.location),e.abrupt("return");case 32:return O.debug("[iframe] Injecting rrweb record fn"),(0,C._Y)(),A(),e.abrupt("return");case 36:return A(),e.next=39,c.e(143).then(c.bind(c,1060));case 39:(0,e.sent.mount)(t),(0,S.Qt)(),p(),e.next=50;break;case 46:throw e.prev=46,e.t0=e.catch(1),(0,S.sA)(e.t0),e.t0;case 50:case"end":return e.stop()}}),e,null,[[1,46]])}))),D.apply(this,arguments)}function L(){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.ZP.dispatch((0,E.m7)(h.r4.DIAL)),!R){e.next=3;break}return e.abrupt("return",!1);case 3:if(!x){e.next=7;break}return e.next=6,x.dial();case 6:return e.abrupt("return",e.sent);case 7:return e.t0=a.SI,e.next=10,l.ZP.dispatch((0,d.FN)());case 10:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function e(t){if(t in e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e[t].apply(e,r)}else{var o="ServiceBell called with unknown command '".concat(t,"'");O.warn(o),console.log(o)}};N.init=function(e){return D.apply(this,arguments)},N.identify=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;R||(x?x.identify(e,t,n):l.ZP.dispatch((0,E.Ax)({customId:e,customMetadata:t,secureIdentityHash:n})))},N.dial=L,N.alert=function(e){if(l.ZP.dispatch((0,E.m7)(h.r4.ALERT)),!R)if(x)x.alert(e);else if(l.ZP.getState().app.isStreamEvents)O.info("Ignoring api call to alert during active session",e);else{var t="string"==typeof e?{title:e}:e;l.ZP.dispatch((0,E.Kq)(t))}},N.bookMeeting=function(){R||(x?x.bookMeeting():l.ZP.dispatch((0,d.jD)(h.Hf.BOOK_MEETING)))},N.hide=function(){R||(x?x.hide():l.ZP.dispatch((0,d.Ov)({hidden:!0})))},N.show=function(){R||(x?x.show():l.ZP.dispatch((0,d.Ov)({hidden:!1})))},N.expand=function(){R||(x?x.expand():(l.ZP.dispatch((0,d.ld)()),l.ZP.dispatch((0,d.Ov)({expanded:!0}))))},N.collapse=function(){R||(x?x.collapse():(l.ZP.dispatch((0,d.cp)()),l.ZP.dispatch((0,d.Ov)({expanded:!1}))))},N.connect=function(){R||(x?x.connect():(O.debug("ServiceBell.connect() called"),l.ZP.dispatch((0,E.Ie)())))},N.disconnect=function(){R||(x?x.disconnect():(O.debug("ServiceBell.disconnect() called"),l.ZP.dispatch((0,E.yn)())))},N.showPopup=function(e){R||(x?x.showPopup(e):e&&"large"===e.size?l.ZP.dispatch((0,d.Hj)(!0)):l.ZP.dispatch((0,d.qm)(!0)))},N.__clientKey=void 0;const j=N;!function(r){var i=r.ServiceBell;i&&i.q&&i.q.forEach((function(n){var r=(0,t.Z)(n,2),i=r[0],o=r[1];j.apply(void 0,[i].concat((0,e.Z)(o)))})),r.ServiceBell=j,r.ServiceBell.__commit=(0,n.i)()}(window)})()})();